var Ve=Object.defineProperty;var Ge=(b,t,i)=>t in b?Ve(b,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):b[t]=i;var Nt=(b,t,i)=>(Ge(b,typeof t!="symbol"?t+"":t,i),i),ae=(b,t,i)=>{if(!t.has(b))throw TypeError("Cannot "+i)};var O=(b,t,i)=>(ae(b,t,"read from private field"),i?i.call(b):t.get(b)),ot=(b,t,i)=>{if(t.has(b))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(b):t.set(b,i)},pt=(b,t,i,e)=>(ae(b,t,"write to private field"),e?e.call(b,i):t.set(b,i),i),oe=(b,t,i,e)=>({set _(u){pt(b,t,u,i)},get _(){return O(b,t,e)}}),ct=(b,t,i)=>(ae(b,t,"access private method"),i);import{S as SvelteComponent,i as init,s as safe_not_equal,F as create_slot,l as element,a as space,m as claim_element,n as children,h as detach,c as claim_space,p as attr,b as insert_hydration,J as append_hydration,K as listen,G as update_slot_base,H as get_all_dirty_from_scope,I as get_slot_changes,f as transition_in,g as group_outros,t as transition_out,d as check_outros,L as run_all,M as null_to_empty,N as add_render_callback,O as create_in_transition,P as create_out_transition,Q as bubble,R as svg_element,T as claim_svg_element,U as onDestroy,V as globals,D as tick,W as binding_callbacks,E as noop,w as create_component,r as text,x as claim_component,u as claim_text,y as mount_component,v as set_data,B as destroy_component,X as set_input_value,q as set_style,Y as is_function,Z as destroy_each,e as empty,_ as src_url_equal,$ as query_selector_all}from"../../chunks/index-37fe09c4.js";import{w as windowPositionLocalStorage,a as activeWindowZIndex,T as Terminal}from"../../chunks/Terminal-f9013af3.js";import"../../chunks/index-31e7635f.js";const browser=!0;var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(b){var t=b.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(b).forEach(function(e){var u=Object.getOwnPropertyDescriptor(b,e);Object.defineProperty(i,e,u.get?u:{enumerable:!0,get:function(){return b[e]}})}),i}function commonjsRequire(b){throw new Error('Could not dynamically require "'+b+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,i){module.exports=i()})(globalThis,()=>(()=>{var __webpack_modules__=[,(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=et,t.arraysToBytes=J,t.assert=ut,t.bytesToString=Y,t.createPromiseCapability=dt,t.createValidAbsoluteUrl=y,t.escapeString=At,t.getModificationDate=it,t.getVerbosityLevel=rt,t.info=at,t.isArrayBuffer=$t,t.isArrayEqual=It,t.isAscii=kt,t.objectFromMap=_t,t.objectSize=ht,t.setVerbosityLevel=U,t.shadow=f,t.string32=nt,t.stringToBytes=H,t.stringToPDFString=Ct,t.stringToUTF16BEString=Ft,t.stringToUTF8String=jt,t.unreachable=mt,t.utf8StringToString=xt,t.warn=lt,i(2);const e=[1,0,0,1,0,0];t.IDENTITY_MATRIX=e;const u=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=u;const x=1.35;t.LINE_FACTOR=x;const p=.35;t.LINE_DESCENT_FACTOR=p;const S={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=S;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=d;const o="pdfjs_internal_editor_";t.AnnotationEditorPrefix=o;const g={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=g;const E={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=E;const A={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=A;const k={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=k;const m={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=m;const s={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=s;const r={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=r;const l={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=l;const F={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=F;const P={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=P;const v={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=v;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=a;const h={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=h;const C={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=C;const D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=D;const I={O:"PageOpen",C:"PageClose"};t.PageActionEventType=I;const L={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=L;const W={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=W;const tt={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=tt;const $={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=$;const N={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=N;const G={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=G;const M={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=M;let q=tt.WARNINGS;function U(Q){Number.isInteger(Q)&&(q=Q)}function rt(){return q}function at(Q){q>=tt.INFOS&&console.log(`Info: ${Q}`)}function lt(Q){q>=tt.WARNINGS&&console.log(`Warning: ${Q}`)}function mt(Q){throw new Error(Q)}function ut(Q,V){Q||mt(V)}function j(Q){if(!Q)return!1;switch(Q.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function y(Q,V=null,X=null){if(!Q)return null;try{if(X&&typeof Q=="string"){if(X.addDefaultProtocol&&Q.startsWith("www.")){const gt=Q.match(/\./g);gt&&gt.length>=2&&(Q=`http://${Q}`)}if(X.tryConvertEncoding)try{Q=jt(Q)}catch{}}const ft=V?new URL(Q,V):new URL(Q);if(j(ft))return ft}catch{}return null}function f(Q,V,X){return Object.defineProperty(Q,V,{value:X,enumerable:!0,configurable:!0,writable:!1}),X}const w=function(){function V(X,ft){this.constructor===V&&mt("Cannot initialize BaseException."),this.message=X,this.name=ft}return V.prototype=new Error,V.constructor=V,V}();t.BaseException=w;class n extends w{constructor(V,X){super(V,"PasswordException"),this.code=X}}t.PasswordException=n;class c extends w{constructor(V,X){super(V,"UnknownErrorException"),this.details=X}}t.UnknownErrorException=c;class _ extends w{constructor(V){super(V,"InvalidPDFException")}}t.InvalidPDFException=_;class T extends w{constructor(V){super(V,"MissingPDFException")}}t.MissingPDFException=T;class R extends w{constructor(V,X){super(V,"UnexpectedResponseException"),this.status=X}}t.UnexpectedResponseException=R;class B extends w{constructor(V){super(V,"FormatError")}}t.FormatError=B;class z extends w{constructor(V){super(V,"AbortException")}}t.AbortException=z;function Y(Q){(typeof Q!="object"||Q===null||Q.length===void 0)&&mt("Invalid argument for bytesToString");const V=Q.length,X=8192;if(V<X)return String.fromCharCode.apply(null,Q);const ft=[];for(let gt=0;gt<V;gt+=X){const yt=Math.min(gt+X,V),wt=Q.subarray(gt,yt);ft.push(String.fromCharCode.apply(null,wt))}return ft.join("")}function H(Q){typeof Q!="string"&&mt("Invalid argument for stringToBytes");const V=Q.length,X=new Uint8Array(V);for(let ft=0;ft<V;++ft)X[ft]=Q.charCodeAt(ft)&255;return X}function et(Q){if(Q.length!==void 0)return Q.length;if(Q.byteLength!==void 0)return Q.byteLength;mt("Invalid argument for arrayByteLength")}function J(Q){const V=Q.length;if(V===1&&Q[0]instanceof Uint8Array)return Q[0];let X=0;for(let yt=0;yt<V;yt++)X+=et(Q[yt]);let ft=0;const gt=new Uint8Array(X);for(let yt=0;yt<V;yt++){let wt=Q[yt];wt instanceof Uint8Array||(typeof wt=="string"?wt=H(wt):wt=new Uint8Array(wt));const Tt=wt.byteLength;gt.set(wt,ft),ft+=Tt}return gt}function nt(Q){return String.fromCharCode(Q>>24&255,Q>>16&255,Q>>8&255,Q&255)}function ht(Q){return Object.keys(Q).length}function _t(Q){const V=Object.create(null);for(const[X,ft]of Q)V[X]=ft;return V}function vt(){const Q=new Uint8Array(4);return Q[0]=1,new Uint32Array(Q.buffer,0,1)[0]===1}function Z(){try{return new Function(""),!0}catch{return!1}}class bt{static get isLittleEndian(){return f(this,"isLittleEndian",vt())}static get isEvalSupported(){return f(this,"isEvalSupported",Z())}static get isOffscreenCanvasSupported(){return f(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}t.FeatureTest=bt;const K=[...Array(256).keys()].map(Q=>Q.toString(16).padStart(2,"0"));class st{static makeHexColor(V,X,ft){return`#${K[V]}${K[X]}${K[ft]}`}static scaleMinMax(V,X){let ft;V[0]?(V[0]<0&&(ft=X[0],X[0]=X[1],X[1]=ft),X[0]*=V[0],X[1]*=V[0],V[3]<0&&(ft=X[2],X[2]=X[3],X[3]=ft),X[2]*=V[3],X[3]*=V[3]):(ft=X[0],X[0]=X[2],X[2]=ft,ft=X[1],X[1]=X[3],X[3]=ft,V[1]<0&&(ft=X[2],X[2]=X[3],X[3]=ft),X[2]*=V[1],X[3]*=V[1],V[2]<0&&(ft=X[0],X[0]=X[1],X[1]=ft),X[0]*=V[2],X[1]*=V[2]),X[0]+=V[4],X[1]+=V[4],X[2]+=V[5],X[3]+=V[5]}static transform(V,X){return[V[0]*X[0]+V[2]*X[1],V[1]*X[0]+V[3]*X[1],V[0]*X[2]+V[2]*X[3],V[1]*X[2]+V[3]*X[3],V[0]*X[4]+V[2]*X[5]+V[4],V[1]*X[4]+V[3]*X[5]+V[5]]}static applyTransform(V,X){const ft=V[0]*X[0]+V[1]*X[2]+X[4],gt=V[0]*X[1]+V[1]*X[3]+X[5];return[ft,gt]}static applyInverseTransform(V,X){const ft=X[0]*X[3]-X[1]*X[2],gt=(V[0]*X[3]-V[1]*X[2]+X[2]*X[5]-X[4]*X[3])/ft,yt=(-V[0]*X[1]+V[1]*X[0]+X[4]*X[1]-X[5]*X[0])/ft;return[gt,yt]}static getAxialAlignedBoundingBox(V,X){const ft=st.applyTransform(V,X),gt=st.applyTransform(V.slice(2,4),X),yt=st.applyTransform([V[0],V[3]],X),wt=st.applyTransform([V[2],V[1]],X);return[Math.min(ft[0],gt[0],yt[0],wt[0]),Math.min(ft[1],gt[1],yt[1],wt[1]),Math.max(ft[0],gt[0],yt[0],wt[0]),Math.max(ft[1],gt[1],yt[1],wt[1])]}static inverseTransform(V){const X=V[0]*V[3]-V[1]*V[2];return[V[3]/X,-V[1]/X,-V[2]/X,V[0]/X,(V[2]*V[5]-V[4]*V[3])/X,(V[4]*V[1]-V[5]*V[0])/X]}static apply3dTransform(V,X){return[V[0]*X[0]+V[1]*X[1]+V[2]*X[2],V[3]*X[0]+V[4]*X[1]+V[5]*X[2],V[6]*X[0]+V[7]*X[1]+V[8]*X[2]]}static singularValueDecompose2dScale(V){const X=[V[0],V[2],V[1],V[3]],ft=V[0]*X[0]+V[1]*X[2],gt=V[0]*X[1]+V[1]*X[3],yt=V[2]*X[0]+V[3]*X[2],wt=V[2]*X[1]+V[3]*X[3],Tt=(ft+wt)/2,Mt=Math.sqrt((ft+wt)**2-4*(ft*wt-yt*gt))/2,Rt=Tt+Mt||1,Et=Tt-Mt||1;return[Math.sqrt(Rt),Math.sqrt(Et)]}static normalizeRect(V){const X=V.slice(0);return V[0]>V[2]&&(X[0]=V[2],X[2]=V[0]),V[1]>V[3]&&(X[1]=V[3],X[3]=V[1]),X}static intersect(V,X){const ft=Math.max(Math.min(V[0],V[2]),Math.min(X[0],X[2])),gt=Math.min(Math.max(V[0],V[2]),Math.max(X[0],X[2]));if(ft>gt)return null;const yt=Math.max(Math.min(V[1],V[3]),Math.min(X[1],X[3])),wt=Math.min(Math.max(V[1],V[3]),Math.max(X[1],X[3]));return yt>wt?null:[ft,yt,gt,wt]}static bezierBoundingBox(V,X,ft,gt,yt,wt,Tt,Mt){const Rt=[],Et=[[],[]];let Ot,Dt,Ut,Pt,Lt,qt,Gt,Xt;for(let Yt=0;Yt<2;++Yt){if(Yt===0?(Dt=6*V-12*ft+6*yt,Ot=-3*V+9*ft-9*yt+3*Tt,Ut=3*ft-3*V):(Dt=6*X-12*gt+6*wt,Ot=-3*X+9*gt-9*wt+3*Mt,Ut=3*gt-3*X),Math.abs(Ot)<1e-12){if(Math.abs(Dt)<1e-12)continue;Pt=-Ut/Dt,0<Pt&&Pt<1&&Rt.push(Pt);continue}Gt=Dt*Dt-4*Ut*Ot,Xt=Math.sqrt(Gt),!(Gt<0)&&(Lt=(-Dt+Xt)/(2*Ot),0<Lt&&Lt<1&&Rt.push(Lt),qt=(-Dt-Xt)/(2*Ot),0<qt&&qt<1&&Rt.push(qt))}let Ht=Rt.length,Bt;const zt=Ht;for(;Ht--;)Pt=Rt[Ht],Bt=1-Pt,Et[0][Ht]=Bt*Bt*Bt*V+3*Bt*Bt*Pt*ft+3*Bt*Pt*Pt*yt+Pt*Pt*Pt*Tt,Et[1][Ht]=Bt*Bt*Bt*X+3*Bt*Bt*Pt*gt+3*Bt*Pt*Pt*wt+Pt*Pt*Pt*Mt;return Et[0][zt]=V,Et[1][zt]=X,Et[0][zt+1]=Tt,Et[1][zt+1]=Mt,Et[0].length=Et[1].length=zt+2,[Math.min(...Et[0]),Math.min(...Et[1]),Math.max(...Et[0]),Math.max(...Et[1])]}}t.Util=st;const St=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ct(Q){if(Q[0]>="\xEF"){let X;if(Q[0]==="\xFE"&&Q[1]==="\xFF"?X="utf-16be":Q[0]==="\xFF"&&Q[1]==="\xFE"?X="utf-16le":Q[0]==="\xEF"&&Q[1]==="\xBB"&&Q[2]==="\xBF"&&(X="utf-8"),X)try{const ft=new TextDecoder(X,{fatal:!0}),gt=H(Q);return ft.decode(gt)}catch(ft){lt(`stringToPDFString: "${ft}".`)}}const V=[];for(let X=0,ft=Q.length;X<ft;X++){const gt=St[Q.charCodeAt(X)];V.push(gt?String.fromCharCode(gt):Q.charAt(X))}return V.join("")}function At(Q){return Q.replace(/([()\\\n\r])/g,V=>V===`
`?"\\n":V==="\r"?"\\r":`\\${V}`)}function kt(Q){return/^[\x00-\x7F]*$/.test(Q)}function Ft(Q){const V=["\xFE\xFF"];for(let X=0,ft=Q.length;X<ft;X++){const gt=Q.charCodeAt(X);V.push(String.fromCharCode(gt>>8&255),String.fromCharCode(gt&255))}return V.join("")}function jt(Q){return decodeURIComponent(escape(Q))}function xt(Q){return unescape(encodeURIComponent(Q))}function $t(Q){return typeof Q=="object"&&Q!==null&&Q.byteLength!==void 0}function It(Q,V){if(Q.length!==V.length)return!1;for(let X=0,ft=Q.length;X<ft;X++)if(Q[X]!==V[X])return!1;return!0}function it(Q=new Date){return[Q.getUTCFullYear().toString(),(Q.getUTCMonth()+1).toString().padStart(2,"0"),Q.getUTCDate().toString().padStart(2,"0"),Q.getUTCHours().toString().padStart(2,"0"),Q.getUTCMinutes().toString().padStart(2,"0"),Q.getUTCSeconds().toString().padStart(2,"0")].join("")}function dt(){const Q=Object.create(null);let V=!1;return Object.defineProperty(Q,"settled",{get(){return V}}),Q.promise=new Promise(function(X,ft){Q.resolve=function(gt){V=!0,X(gt)},Q.reject=function(gt){V=!0,ft(gt)}}),Q}},(b,t,i)=>{i(3)},(b,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const i=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=i},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.binarySearchFirstItem=W,t.deprecated=a,t.getColorValues=L,t.getFilenameFromUrl=r,t.getPdfFilenameFromUrl=l,t.getRGB=I,t.getXfaPageViewport=D,t.isDataScheme=m,t.isPdfFile=s,t.isValidFetchUrl=P,t.loadScript=v;var e=i(5),u=i(1);const x="http://www.w3.org/2000/svg",tt=class{};let p=tt;Nt(p,"CSS",96),Nt(p,"PDF",72),Nt(p,"PDF_TO_CSS_UNITS",tt.CSS/tt.PDF),t.PixelsPerInch=p;class S extends e.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,G){const M=this._document.createElement("canvas");return M.width=N,M.height=G,M}}t.DOMCanvasFactory=S;async function d($,N=!1){if(P($,document.baseURI)){const G=await fetch($);if(!G.ok)throw new Error(G.statusText);return N?new Uint8Array(await G.arrayBuffer()):(0,u.stringToBytes)(await G.text())}return new Promise((G,M)=>{const q=new XMLHttpRequest;q.open("GET",$,!0),N&&(q.responseType="arraybuffer"),q.onreadystatechange=()=>{if(q.readyState===XMLHttpRequest.DONE){if(q.status===200||q.status===0){let U;if(N&&q.response?U=new Uint8Array(q.response):!N&&q.responseText&&(U=(0,u.stringToBytes)(q.responseText)),U){G(U);return}}M(new Error(q.statusText))}},q.send(null)})}class o extends e.BaseCMapReaderFactory{_fetchData(N,G){return d(N,this.isCompressed).then(M=>({cMapData:M,compressionType:G}))}}t.DOMCMapReaderFactory=o;class g extends e.BaseStandardFontDataFactory{_fetchData(N){return d(N,!0)}}t.DOMStandardFontDataFactory=g;class E extends e.BaseSVGFactory{_createSVG(N){return document.createElementNS(x,N)}}t.DOMSVGFactory=E;class A{constructor({viewBox:N,scale:G,rotation:M,offsetX:q=0,offsetY:U=0,dontFlip:rt=!1}){this.viewBox=N,this.scale=G,this.rotation=M,this.offsetX=q,this.offsetY=U;const at=(N[2]+N[0])/2,lt=(N[3]+N[1])/2;let mt,ut,j,y;switch(M%=360,M<0&&(M+=360),M){case 180:mt=-1,ut=0,j=0,y=1;break;case 90:mt=0,ut=1,j=1,y=0;break;case 270:mt=0,ut=-1,j=-1,y=0;break;case 0:mt=1,ut=0,j=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}rt&&(j=-j,y=-y);let f,w,n,c;mt===0?(f=Math.abs(lt-N[1])*G+q,w=Math.abs(at-N[0])*G+U,n=Math.abs(N[3]-N[1])*G,c=Math.abs(N[2]-N[0])*G):(f=Math.abs(at-N[0])*G+q,w=Math.abs(lt-N[1])*G+U,n=Math.abs(N[2]-N[0])*G,c=Math.abs(N[3]-N[1])*G),this.transform=[mt*G,ut*G,j*G,y*G,f-mt*G*at-j*G*lt,w-ut*G*at-y*G*lt],this.width=n,this.height=c}clone({scale:N=this.scale,rotation:G=this.rotation,offsetX:M=this.offsetX,offsetY:q=this.offsetY,dontFlip:U=!1}={}){return new A({viewBox:this.viewBox.slice(),scale:N,rotation:G,offsetX:M,offsetY:q,dontFlip:U})}convertToViewportPoint(N,G){return u.Util.applyTransform([N,G],this.transform)}convertToViewportRectangle(N){const G=u.Util.applyTransform([N[0],N[1]],this.transform),M=u.Util.applyTransform([N[2],N[3]],this.transform);return[G[0],G[1],M[0],M[1]]}convertToPdfPoint(N,G){return u.Util.applyInverseTransform([N,G],this.transform)}}t.PageViewport=A;class k extends u.BaseException{constructor(N,G){super(N,"RenderingCancelledException"),this.type=G}}t.RenderingCancelledException=k;function m($){const N=$.length;let G=0;for(;G<N&&$[G].trim()==="";)G++;return $.substring(G,G+5).toLowerCase()==="data:"}function s($){return typeof $=="string"&&/\.pdf$/i.test($)}function r($){const N=$.indexOf("#"),G=$.indexOf("?"),M=Math.min(N>0?N:$.length,G>0?G:$.length);return $.substring($.lastIndexOf("/",M)+1,M)}function l($,N="document.pdf"){if(typeof $!="string")return N;if(m($))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const G=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,M=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,q=G.exec($);let U=M.exec(q[1])||M.exec(q[2])||M.exec(q[3]);if(U&&(U=U[0],U.includes("%")))try{U=M.exec(decodeURIComponent(U))[0]}catch{}return U||N}class F{constructor(){this.started=Object.create(null),this.times=[]}time(N){N in this.started&&(0,u.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,u.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let G=0;for(const M of this.times){const q=M.name;q.length>G&&(G=q.length)}for(const M of this.times){const q=M.end-M.start;N.push(`${M.name.padEnd(G)} ${q}ms
`)}return N.join("")}}t.StatTimer=F;function P($,N){try{const{protocol:G}=N?new URL($,N):new URL($);return G==="http:"||G==="https:"}catch{return!1}}function v($,N=!1){return new Promise((G,M)=>{const q=document.createElement("script");q.src=$,q.onload=function(U){N&&q.remove(),G(U)},q.onerror=function(){M(new Error(`Cannot load script at: ${q.src}`))},(document.head||document.documentElement).append(q)})}function a($){console.log("Deprecated API usage: "+$)}let h;class C{static toDateObject(N){if(!N||typeof N!="string")return null;h||(h=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const G=h.exec(N);if(!G)return null;const M=parseInt(G[1],10);let q=parseInt(G[2],10);q=q>=1&&q<=12?q-1:0;let U=parseInt(G[3],10);U=U>=1&&U<=31?U:1;let rt=parseInt(G[4],10);rt=rt>=0&&rt<=23?rt:0;let at=parseInt(G[5],10);at=at>=0&&at<=59?at:0;let lt=parseInt(G[6],10);lt=lt>=0&&lt<=59?lt:0;const mt=G[7]||"Z";let ut=parseInt(G[8],10);ut=ut>=0&&ut<=23?ut:0;let j=parseInt(G[9],10)||0;return j=j>=0&&j<=59?j:0,mt==="-"?(rt+=ut,at+=j):mt==="+"&&(rt-=ut,at-=j),new Date(Date.UTC(M,q,U,rt,at,lt))}}t.PDFDateString=C;function D($,{scale:N=1,rotation:G=0}){const{width:M,height:q}=$.attributes.style,U=[0,0,parseInt(M),parseInt(q)];return new A({viewBox:U,scale:N,rotation:G})}function I($){if($.startsWith("#")){const N=parseInt($.slice(1),16);return[(N&16711680)>>16,(N&65280)>>8,N&255]}return $.startsWith("rgb(")?$.slice(4,-1).split(",").map(N=>parseInt(N)):$.startsWith("rgba(")?$.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,u.warn)(`Not a valid color format: "${$}"`),[0,0,0])}function L($){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const G of $.keys()){N.style.color=G;const M=window.getComputedStyle(N).color;$.set(G,I(M))}N.remove()}function W($,N,G=0){let M=G,q=$.length-1;if(q<0||!N($[q]))return $.length;if(N($[M]))return M;for(;M<q;){const U=M+q>>1,rt=$[U];N(rt)?q=U:M=U+1}return M}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var e=i(1);class u{constructor(){this.constructor===u&&(0,e.unreachable)("Cannot initialize BaseCanvasFactory.")}create(o,g){if(o<=0||g<=0)throw new Error("Invalid canvas size");const E=this._createCanvas(o,g);return{canvas:E,context:E.getContext("2d")}}reset(o,g,E){if(!o.canvas)throw new Error("Canvas is not specified");if(g<=0||E<=0)throw new Error("Invalid canvas size");o.canvas.width=g,o.canvas.height=E}destroy(o){if(!o.canvas)throw new Error("Canvas is not specified");o.canvas.width=0,o.canvas.height=0,o.canvas=null,o.context=null}_createCanvas(o,g){(0,e.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=u;class x{constructor({baseUrl:o=null,isCompressed:g=!1}){this.constructor===x&&(0,e.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=o,this.isCompressed=g}async fetch({name:o}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!o)throw new Error("CMap name must be specified.");const g=this.baseUrl+o+(this.isCompressed?".bcmap":""),E=this.isCompressed?e.CMapCompressionType.BINARY:e.CMapCompressionType.NONE;return this._fetchData(g,E).catch(A=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${g}`)})}_fetchData(o,g){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=x;class p{constructor({baseUrl:o=null}){this.constructor===p&&(0,e.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=o}async fetch({filename:o}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!o)throw new Error("Font filename must be specified.");const g=`${this.baseUrl}${o}`;return this._fetchData(g).catch(E=>{throw new Error(`Unable to load font data at: ${g}`)})}_fetchData(o){(0,e.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=p;class S{constructor(){this.constructor===S&&(0,e.unreachable)("Cannot initialize BaseSVGFactory.")}create(o,g,E=!1){if(o<=0||g<=0)throw new Error("Invalid SVG dimensions");const A=this._createSVG("svg:svg");return A.setAttribute("version","1.1"),E||(A.setAttribute("width",`${o}px`),A.setAttribute("height",`${g}px`)),A.setAttribute("preserveAspectRatio","none"),A.setAttribute("viewBox",`0 0 ${o} ${g}`),A}createElement(o){if(typeof o!="string")throw new Error("Invalid SVG element type");return this._createSVG(o)}_createSVG(o){(0,e.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=S},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var b,i,e,u,x,p,S,d,o,le,E,A;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(7),_display_utils=__w_pdfjs_require__(4),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:m,NodeCMapReaderFactory:s,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=m,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=s,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;function setPDFNetworkStreamFactory(m){createPDFNetworkStream=m}function getDocument(m){const s=new PDFDocumentLoadingTask;let r;if(typeof m=="string"||m instanceof URL)r={url:m};else if((0,_util.isArrayBuffer)(m))r={data:m};else if(m instanceof PDFDataRangeTransport)r={range:m};else{if(typeof m!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!m.url&&!m.data&&!m.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=m}const l=Object.create(null);let F=null,P=null;for(const a in r){const h=r[a];switch(a){case"url":if(typeof window<"u")try{l[a]=new URL(h,window.location).href;continue}catch(C){(0,_util.warn)(`Cannot create valid URL: "${C}".`)}else if(typeof h=="string"||h instanceof URL){l[a]=h.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":F=h;continue;case"worker":P=h;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&h instanceof Buffer)l[a]=new Uint8Array(h);else{if(h instanceof Uint8Array)break;if(typeof h=="string")l[a]=(0,_util.stringToBytes)(h);else if(typeof h=="object"&&h!==null&&!isNaN(h.length))l[a]=new Uint8Array(h);else if((0,_util.isArrayBuffer)(h))l[a]=new Uint8Array(h);else throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.")}continue}l[a]=h}if(l.CMapReaderFactory=l.CMapReaderFactory||DefaultCMapReaderFactory,l.StandardFontDataFactory=l.StandardFontDataFactory||DefaultStandardFontDataFactory,l.ignoreErrors=l.stopAtErrors!==!0,l.fontExtraProperties=l.fontExtraProperties===!0,l.pdfBug=l.pdfBug===!0,l.enableXfa=l.enableXfa===!0,(!Number.isInteger(l.rangeChunkSize)||l.rangeChunkSize<1)&&(l.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof l.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(l.docBaseUrl))&&(l.docBaseUrl=null),(!Number.isInteger(l.maxImageSize)||l.maxImageSize<-1)&&(l.maxImageSize=-1),typeof l.cMapUrl!="string"&&(l.cMapUrl=null),typeof l.standardFontDataUrl!="string"&&(l.standardFontDataUrl=null),typeof l.useWorkerFetch!="boolean"&&(l.useWorkerFetch=l.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&l.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof l.isEvalSupported!="boolean"&&(l.isEvalSupported=!0),typeof l.disableFontFace!="boolean"&&(l.disableFontFace=_is_node.isNodeJS),typeof l.useSystemFonts!="boolean"&&(l.useSystemFonts=!_is_node.isNodeJS&&!l.disableFontFace),(typeof l.ownerDocument!="object"||l.ownerDocument===null)&&(l.ownerDocument=globalThis.document),typeof l.disableRange!="boolean"&&(l.disableRange=!1),typeof l.disableStream!="boolean"&&(l.disableStream=!1),typeof l.disableAutoFetch!="boolean"&&(l.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(l.verbosity),!P){const a={verbosity:l.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};P=a.port?PDFWorker.fromPort(a):new PDFWorker(a),s._worker=P}const v=s.docId;return P.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const a=_fetchDocument(P,l,F,v),h=new Promise(function(C){let D;F?D=new _transport_stream.PDFDataTransportStream({length:l.length,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:l.disableRange,disableStream:l.disableStream},F):l.data||(D=createPDFNetworkStream({url:l.url,length:l.length,httpHeaders:l.httpHeaders,withCredentials:l.withCredentials,rangeChunkSize:l.rangeChunkSize,disableRange:l.disableRange,disableStream:l.disableStream})),C(D)});return Promise.all([a,h]).then(function([C,D]){if(s.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(v,C,P.port),L=new WorkerTransport(I,s,D,l);s._transport=L,I.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(m,s,r,l){if(m.destroyed)throw new Error("Worker was destroyed");r&&(s.length=r.length,s.initialData=r.initialData,s.progressiveDone=r.progressiveDone,s.contentDispositionFilename=r.contentDispositionFilename);const F=await m.messageHandler.sendWithPromise("GetDocRequest",{docId:l,apiVersion:"2.15.349",source:{data:s.data,url:s.url,password:s.password,disableAutoFetch:s.disableAutoFetch,rangeChunkSize:s.rangeChunkSize,length:s.length},maxImageSize:s.maxImageSize,disableFontFace:s.disableFontFace,docBaseUrl:s.docBaseUrl,ignoreErrors:s.ignoreErrors,isEvalSupported:s.isEvalSupported,fontExtraProperties:s.fontExtraProperties,enableXfa:s.enableXfa,useSystemFonts:s.useSystemFonts,cMapUrl:s.useWorkerFetch?s.cMapUrl:null,standardFontDataUrl:s.useWorkerFetch?s.standardFontDataUrl:null});if(s.data&&(s.data=null),m.destroyed)throw new Error("Worker was destroyed");return F}const t=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${oe(t,b)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;b=new WeakMap,ot(PDFDocumentLoadingTask,b,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,r,l=!1,F=null){this.length=s,this.initialData=r,this.progressiveDone=l,this.contentDispositionFilename=F,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,r){for(const l of this._rangeListeners)l(s,r)}onDataProgress(s,r){this._readyCapability.promise.then(()=>{for(const l of this._progressListeners)l(s,r)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,r){this._pdfInfo=s,this._transport=r,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,r,l,F,P=!1){this._pageIndex=s,this._pageInfo=r,this._ownerDocument=F,this._transport=l,this._stats=P?new _display_utils.StatTimer:null,this._pdfBug=P,this.commonObjs=l.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:r=this.rotate,offsetX:l=0,offsetY:F=0,dontFlip:P=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:r,offsetX:l,offsetY:F,dontFlip:P})}getAnnotations({intent:s="display"}={}){const r=this._transport.getRenderingIntent(s);let l=this._annotationPromises.get(r.cacheKey);return l||(l=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,l),l=l.then(F=>{for(const P of F)P.titleObj!==void 0&&Object.defineProperty(P,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),P.titleObj.str}}),P.contentsObj!==void 0&&Object.defineProperty(P,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),P.contentsObj.str}});return F})),l}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:r,intent:l="display",annotationMode:F=_util.AnnotationMode.ENABLE,transform:P=null,imageLayer:v=null,canvasFactory:a=null,background:h=null,optionalContentConfigPromise:C=null,annotationCanvasMap:D=null,pageColors:I=null,printAnnotationStorage:L=null}){var U,rt;((U=arguments[0])==null?void 0:U.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&F===_util.AnnotationMode.ENABLE&&(F=_util.AnnotationMode.ENABLE_FORMS)),((rt=arguments[0])==null?void 0:rt.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&F===_util.AnnotationMode.ENABLE&&(F=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const W=this._transport.getRenderingIntent(l,F,L);this.pendingCleanup=!1,C||(C=this._transport.getOptionalContentConfig());let tt=this._intentStates.get(W.cacheKey);tt||(tt=Object.create(null),this._intentStates.set(W.cacheKey,tt)),tt.streamReaderCancelTimeout&&(clearTimeout(tt.streamReaderCancelTimeout),tt.streamReaderCancelTimeout=null);const $=a||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),N=!!(W.renderingIntent&_util.RenderingIntentFlag.PRINT);tt.displayReadyCapability||(tt.displayReadyCapability=(0,_util.createPromiseCapability)(),tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(W));const G=at=>{tt.renderTasks.delete(M),(this.cleanupAfterRender||N)&&(this.pendingCleanup=!0),this._tryCleanup(),at?(M.capability.reject(at),this._abortOperatorList({intentState:tt,reason:at instanceof Error?at:new Error(at)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},M=new InternalRenderTask({callback:G,params:{canvasContext:s,viewport:r,transform:P,imageLayer:v,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:D,operatorList:tt.operatorList,pageIndex:this._pageIndex,canvasFactory:$,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:I});(tt.renderTasks||(tt.renderTasks=new Set)).add(M);const q=M.task;return Promise.all([tt.displayReadyCapability.promise,C]).then(([at,lt])=>{if(this.pendingCleanup){G();return}this._stats&&this._stats.time("Rendering"),M.initializeGraphics({transparency:at,optionalContentConfig:lt}),M.operatorListChanged()}).catch(G),q}getOperatorList({intent:s="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:l=null}={}){function F(){v.operatorList.lastChunk&&(v.opListReadCapability.resolve(v.operatorList),v.renderTasks.delete(a))}const P=this._transport.getRenderingIntent(s,r,l,!0);let v=this._intentStates.get(P.cacheKey);v||(v=Object.create(null),this._intentStates.set(P.cacheKey,v));let a;return v.opListReadCapability||(a=Object.create(null),a.operatorListChanged=F,v.opListReadCapability=(0,_util.createPromiseCapability)(),(v.renderTasks||(v.renderTasks=new Set)).add(a),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P)),v.opListReadCapability.promise}streamTextContent({disableCombineTextItems:s=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:s!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(F){return F.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(l=>_xfa_text.XfaText.textContent(l));const r=this.streamTextContent(s);return new Promise(function(l,F){function P(){v.read().then(function({value:h,done:C}){if(C){l(a);return}Object.assign(a.styles,h.styles),a.items.push(...h.items),P()},F)}const v=r.getReader(),a={items:[],styles:Object.create(null)};P()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const s=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const l of r.renderTasks)s.push(l.completed),l.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(s)}cleanup(s=!1){return this.pendingCleanup=!0,this._tryCleanup(s)}_tryCleanup(s=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:l}of this._intentStates.values())if(r.size>0||!l.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,s&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(s,r){const l=this._intentStates.get(r);!l||(this._stats&&this._stats.timeEnd("Page Request"),l.displayReadyCapability&&l.displayReadyCapability.resolve(s))}_renderPageChunk(s,r){for(let l=0,F=s.length;l<F;l++)r.operatorList.fnArray.push(s.fnArray[l]),r.operatorList.argsArray.push(s.argsArray[l]);r.operatorList.lastChunk=s.lastChunk,r.operatorList.separateAnnots=s.separateAnnots;for(const l of r.renderTasks)l.operatorListChanged();s.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:s,cacheKey:r,annotationStorageMap:l}){const P=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:r,annotationStorage:l}).getReader(),v=this._intentStates.get(r);v.streamReader=P;const a=()=>{P.read().then(({value:h,done:C})=>{if(C){v.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,v),a())},h=>{if(v.streamReader=null,!this._transport.destroyed){if(v.operatorList){v.operatorList.lastChunk=!0;for(const C of v.renderTasks)C.operatorListChanged();this._tryCleanup()}if(v.displayReadyCapability)v.displayReadyCapability.reject(h);else if(v.opListReadCapability)v.opListReadCapability.reject(h);else throw h}})};a()}_abortOperatorList({intentState:s,reason:r,force:l=!1}){if(!!s.streamReader){if(!l){if(s.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){s.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:s,reason:r,force:!0}),s.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(s.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[F,P]of this._intentStates)if(P===s){this._intentStates.delete(F);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(s,r){const l={data:structuredClone(s,r)};this._deferred.then(()=>{for(const F of this._listeners)F.call(this,l)})}addEventListener(s,r){this._listeners.push(r)}removeEventListener(s,r){const l=this._listeners.indexOf(r);this._listeners.splice(l,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const m=(i=document==null?void 0:document.currentScript)==null?void 0:i.src;m&&(PDFWorkerUtil.fallbackWorkerSrc=m.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(m,s){let r;try{if(r=new URL(m),!r.origin||r.origin==="null")return!1}catch{return!1}const l=new URL(s,r);return r.origin===l.origin},PDFWorkerUtil.createCDNWrapper=function(m){const s=`importScripts("${m}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class{constructor({name:m=null,port:s=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(s&&O(_PDFWorker,e).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=m,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,s){O(_PDFWorker,e).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(m){this._port=m,this._messageHandler=new _message_handler.MessageHandler("main","worker",m),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let m=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,m)||(m=PDFWorkerUtil.createCDNWrapper(new URL(m,window.location).href));const s=new Worker(m),r=new _message_handler.MessageHandler("main","worker",s),l=()=>{s.removeEventListener("error",F),r.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},F=()=>{this._webWorker||l()};s.addEventListener("error",F),r.on("test",v=>{if(s.removeEventListener("error",F),this.destroyed){l();return}v?(this._messageHandler=r,this._port=s,this._webWorker=s,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),s.terminate())}),r.on("ready",v=>{if(s.removeEventListener("error",F),this.destroyed){l();return}try{P()}catch{this._setupFakeWorker()}});const P=()=>{const v=new Uint8Array;r.send("test",v,[v.buffer])};P();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(m=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,l=new _message_handler.MessageHandler(r+"_worker",r,s);m.setup(l,s);const F=new _message_handler.MessageHandler(r,r+"_worker",s);this._messageHandler=F,this._readyCapability.resolve(),F.send("configure",{verbosity:this.verbosity})}).catch(m=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${m.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),O(_PDFWorker,e).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(m){if(!(m!=null&&m.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return O(this,e).has(m.port)?O(this,e).get(m.port):new _PDFWorker(m)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var m;try{return((m=globalThis.pdfjsWorker)==null?void 0:m.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;e=new WeakMap,ot(PDFWorker,e,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(s,r,l,F){ot(this,u,null);ot(this,x,new Map);ot(this,p,new Map);ot(this,S,null);this.messageHandler=s,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:F.ownerDocument,styleElement:F.styleElement}),this._params=F,F.useWorkerFetch||(this.CMapReaderFactory=new F.CMapReaderFactory({baseUrl:F.cMapUrl,isCompressed:F.cMapPacked}),this.StandardFontDataFactory=new F.StandardFontDataFactory({baseUrl:F.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=l,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return O(this,u)}getRenderingIntent(s,r=_util.AnnotationMode.ENABLE,l=null,F=!1){let P=_util.RenderingIntentFlag.DISPLAY,v=null;switch(s){case"any":P=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":P=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(r){case _util.AnnotationMode.DISABLE:P+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:P+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:P+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,v=(P&_util.RenderingIntentFlag.PRINT&&l instanceof _annotation_storage.PrintAnnotationStorage?l:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return F&&(P+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:P,cacheKey:`${P}_${_annotation_storage.AnnotationStorage.getHash(v)}`,annotationStorageMap:v}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const l of O(this,x).values())s.push(l._destroy());O(this,x).clear(),O(this,p).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return s.push(r),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),pt(this,S,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:r}=this;s.on("GetReader",(l,F)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=P=>{this._lastProgress={loaded:P.loaded,total:P.total}},F.onPull=()=>{this._fullReader.read().then(function({value:P,done:v}){if(v){F.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(P),"GetReader - expected an ArrayBuffer."),F.enqueue(new Uint8Array(P),1,[P])}).catch(P=>{F.error(P)})},F.onCancel=P=>{this._fullReader.cancel(P),F.ready.catch(v=>{if(!this.destroyed)throw v})}}),s.on("ReaderHeadersReady",l=>{const F=(0,_util.createPromiseCapability)(),P=this._fullReader;return P.headersReady.then(()=>{var v;(!P.isStreamingSupported||!P.isRangeSupported)&&(this._lastProgress&&((v=r.onProgress)==null||v.call(r,this._lastProgress)),P.onProgress=a=>{var h;(h=r.onProgress)==null||h.call(r,{loaded:a.loaded,total:a.total})}),F.resolve({isStreamingSupported:P.isStreamingSupported,isRangeSupported:P.isRangeSupported,contentLength:P.contentLength})},F.reject),F.promise}),s.on("GetRangeReader",(l,F)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const P=this._networkStream.getRangeReader(l.begin,l.end);if(!P){F.close();return}F.onPull=()=>{P.read().then(function({value:v,done:a}){if(a){F.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(v),"GetRangeReader - expected an ArrayBuffer."),F.enqueue(new Uint8Array(v),1,[v])}).catch(v=>{F.error(v)})},F.onCancel=v=>{P.cancel(v),F.ready.catch(a=>{if(!this.destroyed)throw a})}}),s.on("GetDoc",({pdfInfo:l})=>{this._numPages=l.numPages,this._htmlForXfa=l.htmlForXfa,delete l.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(l,this))}),s.on("DocException",function(l){let F;switch(l.name){case"PasswordException":F=new _util.PasswordException(l.message,l.code);break;case"InvalidPDFException":F=new _util.InvalidPDFException(l.message);break;case"MissingPDFException":F=new _util.MissingPDFException(l.message);break;case"UnexpectedResponseException":F=new _util.UnexpectedResponseException(l.message,l.status);break;case"UnknownErrorException":F=new _util.UnknownErrorException(l.message,l.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(F)}),s.on("PasswordRequest",l=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const F=P=>{P instanceof Error?this._passwordCapability.reject(P):this._passwordCapability.resolve({password:P})};try{r.onPassword(F,l.code)}catch(P){this._passwordCapability.reject(P)}}else this._passwordCapability.reject(new _util.PasswordException(l.message,l.code));return this._passwordCapability.promise}),s.on("DataLoaded",l=>{var F;(F=r.onProgress)==null||F.call(r,{loaded:l.length,total:l.length}),this.downloadInfoCapability.resolve(l)}),s.on("StartRenderPage",l=>{if(this.destroyed)return;O(this,x).get(l.pageIndex)._startRenderPage(l.transparency,l.cacheKey)}),s.on("commonobj",([l,F,P])=>{var v;if(!this.destroyed&&!this.commonObjs.has(l))switch(F){case"Font":const a=this._params;if("error"in P){const D=P.error;(0,_util.warn)(`Error during font loading: ${D}`),this.commonObjs.resolve(l,D);break}let h=null;a.pdfBug&&((v=globalThis.FontInspector)==null?void 0:v.enabled)&&(h={registerFont(D,I){globalThis.FontInspector.fontAdded(D,I)}});const C=new _font_loader.FontFaceObject(P,{isEvalSupported:a.isEvalSupported,disableFontFace:a.disableFontFace,ignoreErrors:a.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:h});this.fontLoader.bind(C).catch(D=>s.sendWithPromise("FontFallback",{id:l})).finally(()=>{!a.fontExtraProperties&&C.data&&(C.data=null),this.commonObjs.resolve(l,C)});break;case"FontPath":case"Image":this.commonObjs.resolve(l,P);break;default:throw new Error(`Got unknown common object type ${F}`)}}),s.on("obj",([l,F,P,v])=>{var h;if(this.destroyed)return;const a=O(this,x).get(F);if(!a.objs.has(l))switch(P){case"Image":a.objs.resolve(l,v);const C=8e6;if(v){let D;if(v.bitmap){const{bitmap:I,width:L,height:W}=v;D=L*W*4,a._bitmaps.add(I)}else D=((h=v.data)==null?void 0:h.length)||0;D>C&&(a.cleanupAfterRender=!0)}break;case"Pattern":a.objs.resolve(l,v);break;default:throw new Error(`Got unknown object type ${P}`)}}),s.on("DocProgress",l=>{var F;this.destroyed||(F=r.onProgress)==null||F.call(r,{loaded:l.loaded,total:l.total})}),s.on("DocStats",l=>{this.destroyed||pt(this,u,Object.freeze({streamTypes:Object.freeze(l.streamTypes),fontTypes:Object.freeze(l.fontTypes)}))}),s.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),s.on("FetchBuiltInCMap",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(l):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",l=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(l):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:s}){var r,l;this.destroyed||(l=(r=this.loadingTask).onUnsupportedFeature)==null||l.call(r,s)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=s-1,l=O(this,p).get(r);if(l)return l;const F=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(P=>{if(this.destroyed)throw new Error("Transport destroyed");const v=new PDFPageProxy(r,P,this,this._params.ownerDocument,this._params.pdfBug);return O(this,x).set(r,v),v});return O(this,p).set(r,F),F}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:r})}saveDocument(){var s,r;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(r=(s=this._fullReader)==null?void 0:s.filename)!=null?r:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return O(this,S)||pt(this,S,this.messageHandler.sendWithPromise("GetMetadata",null).then(s=>{var r,l,F,P;return{info:s[0],metadata:s[1]?new _metadata.Metadata(s[1]):null,contentDispositionFilename:(l=(r=this._fullReader)==null?void 0:r.filename)!=null?l:null,contentLength:(P=(F=this._fullReader)==null?void 0:F.contentLength)!=null?P:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const r of O(this,x).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),pt(this,S,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const s=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s.disableAutoFetch,enableXfa:s.enableXfa})}}u=new WeakMap,x=new WeakMap,p=new WeakMap,S=new WeakMap;class PDFObjects{constructor(){ot(this,o);ot(this,d,Object.create(null))}get(s,r=null){if(r){const F=ct(this,o,le).call(this,s);return F.capability.promise.then(()=>r(F.data)),null}const l=O(this,d)[s];if(!(l!=null&&l.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return l.data}has(s){const r=O(this,d)[s];return(r==null?void 0:r.capability.settled)||!1}resolve(s,r=null){const l=ct(this,o,le).call(this,s);l.data=r,l.capability.resolve()}clear(){pt(this,d,Object.create(null))}}d=new WeakMap,o=new WeakSet,le=function(s){const r=O(this,d)[s];return r||(O(this,d)[s]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(s){ot(this,E,null);pt(this,E,s),this.onContinue=null}get promise(){return O(this,E).capability.promise}cancel(){O(this,E).cancel()}get separateAnnots(){const{separateAnnots:s}=O(this,E).operatorList;if(!s)return!1;const{annotationCanvasMap:r}=O(this,E);return s.form||s.canvas&&(r==null?void 0:r.size)>0}}E=new WeakMap,exports.RenderTask=RenderTask;const k=class{constructor({callback:s,params:r,objs:l,commonObjs:F,annotationCanvasMap:P,operatorList:v,pageIndex:a,canvasFactory:h,useRequestAnimationFrame:C=!1,pdfBug:D=!1,pageColors:I=null}){this.callback=s,this.params=r,this.objs=l,this.commonObjs=F,this.annotationCanvasMap=P,this.operatorListIdx=null,this.operatorList=v,this._pageIndex=a,this.canvasFactory=h,this._pdfBug=D,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=C===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:r}){var h;if(this.cancelled)return;if(this._canvas){if(O(k,A).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");O(k,A).add(this._canvas)}this._pdfBug&&((h=globalThis.StepperManager)==null?void 0:h.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:l,viewport:F,transform:P,imageLayer:v,background:a}=this.params;this.gfx=new _canvas.CanvasGraphics(l,this.commonObjs,this.objs,this.canvasFactory,v,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:P,viewport:F,transparency:s,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(s=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&O(k,A).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&O(k,A).delete(this._canvas),this.callback())))}};let InternalRenderTask=k;A=new WeakMap,ot(InternalRenderTask,A,new WeakSet);const version="2.15.349";exports.version=version;const build="b8aa9c622";exports.build=build},(b,t,i)=>{var d,Ce,g;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var e=i(1),u=i(8),x=i(10);class p{constructor(){ot(this,d);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(A,k){const m=this._storage.get(A);return m===void 0?k:Object.assign(k,m)}getRawValue(A){return this._storage.get(A)}removeKey(A){this._storage.delete(A),this._storage.size===0&&this.resetModified()}setValue(A,k){const m=this._storage.get(A);let s=!1;if(m!==void 0)for(const[r,l]of Object.entries(k))m[r]!==l&&(s=!0,m[r]=l);else s=!0,this._storage.set(A,k);s&&ct(this,d,Ce).call(this)}has(A){return this._storage.has(A)}getAll(){return this._storage.size>0?(0,e.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new S(this)}get serializable(){if(this._storage.size===0)return null;const A=new Map;for(const[k,m]of this._storage){const s=m instanceof u.AnnotationEditor?m.serialize():m;s&&A.set(k,s)}return A}static getHash(A){if(!A)return"";const k=new x.MurmurHash3_64;for(const[m,s]of A)k.update(`${m}:${JSON.stringify(s)}`);return k.hexdigest()}}d=new WeakSet,Ce=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=p;class S extends p{constructor(k){super();ot(this,g,null);pt(this,g,structuredClone(k.serializable))}get print(){(0,e.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return O(this,g)}}g=new WeakMap,t.PrintAnnotationStorage=S},(b,t,i)=>{var p,S,d,o,g,E;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var e=i(9),u=i(1);const A=class{constructor(m){ot(this,p,this.focusin.bind(this));ot(this,S,this.focusout.bind(this));ot(this,d,!1);ot(this,o,!1);ot(this,g,!1);ot(this,E,A._zIndex++);this.constructor===A&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=m.parent,this.id=m.id,this.width=this.height=null,this.pageIndex=m.parent.pageIndex,this.name=m.name,this.div=null;const[s,r]=this.parent.viewportBaseDimensions;this.x=m.x/s,this.y=m.y/r,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=O(this,E)}focusin(m){O(this,d)?pt(this,d,!1):this.parent.setSelected(this)}focusout(m){if(!this.isAttachedToDOM)return;const s=m.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(m.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(m){const s=this.parent.div.getBoundingClientRect();this.startX=m.clientX-s.x,this.startY=m.clientY-s.y,m.dataTransfer.setData("text/plain",this.id),m.dataTransfer.effectAllowed="move"}setAt(m,s,r,l){const[F,P]=this.parent.viewportBaseDimensions;[r,l]=this.screenToPageTranslation(r,l),this.x=(m+r)/F,this.y=(s+l)/P,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(m,s){const[r,l]=this.parent.viewportBaseDimensions;[m,s]=this.screenToPageTranslation(m,s),this.x+=m/r,this.y+=s/l,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(m,s){const{rotation:r}=this.parent.viewport;switch(r){case 90:return[s,-m];case 180:return[-m,-s];case 270:return[-s,m];default:return[m,s]}}setDims(m,s){const[r,l]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*m/r}%`,this.div.style.height=`${100*s/l}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",O(this,p)),this.div.addEventListener("focusout",O(this,S));const[m,s]=this.getInitialTranslation();return this.translate(m,s),(0,e.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(m){const s=e.KeyboardManager.platform.isMac;if(m.button!==0||m.ctrlKey&&s){m.preventDefault();return}m.ctrlKey&&!s||m.shiftKey||m.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),pt(this,d,!0)}getRect(m,s){const[r,l]=this.parent.viewportBaseDimensions,[F,P]=this.parent.pageDimensions,v=F*m/r,a=P*s/l,h=this.x*F,C=this.y*P,D=this.width*F,I=this.height*P;switch(this.rotation){case 0:return[h+v,P-C-a-I,h+v+D,P-C-a];case 90:return[h+a,P-C+v,h+a+I,P-C+v+D];case 180:return[h-v-D,P-C+a,h-v,P-C+a+I];case 270:return[h-a-I,P-C-v-D,h-a,P-C-v];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(m,s){const[r,l,F,P]=m,v=F-r,a=P-l;switch(this.rotation){case 0:return[r,s-P,v,a];case 90:return[r,s-l,a,v];case 180:return[F,s-l,v,a];case 270:return[F,s-P,a,v];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pt(this,g,!0)}disableEditMode(){pt(this,g,!1)}isInEditMode(){return O(this,g)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var m;(m=this.div)==null||m.addEventListener("focusin",O(this,p))}serialize(){(0,u.unreachable)("An editor must be serializable")}static deserialize(m,s){const r=new this.prototype.constructor({parent:s,id:s.getNextId()});r.rotation=m.rotation;const[l,F]=s.pageDimensions,[P,v,a,h]=r.getRectInCurrentCoords(m.rect,F);return r.x=P/l,r.y=v/F,r.width=a/l,r.height=h/F,r}remove(){this.div.removeEventListener("focusin",O(this,p)),this.div.removeEventListener("focusout",O(this,S)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var m;(m=this.div)==null||m.classList.add("selectedEditor")}unselect(){var m;(m=this.div)==null||m.classList.remove("selectedEditor")}updateParams(m,s){}disableEditing(){}enableEditing(){}getIdForTextLayer(){return this.id}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return O(this,o)}set isEditing(m){pt(this,o,m),m?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let x=A;p=new WeakMap,S=new WeakMap,d=new WeakMap,o=new WeakMap,g=new WeakMap,E=new WeakMap,Nt(x,"_colorManager",new e.ColorManager),Nt(x,"_zIndex",1),t.AnnotationEditor=x},(b,t,i)=>{var k,m,s,r,l,F,Te,a,C,D,I,L,W,tt,$,N,G,M,q,U,rt,at,lt,mt,ut,j,y,xe,w,ce,c,Wt,T,Qt,B,Pe,Y,ke,et,he,nt,Zt,_t,te;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=x,t.opacityToHex=p;var e=i(1),u=i(4);function x(bt,K,st){for(const St of st)K.addEventListener(St,bt[St].bind(bt))}function p(bt){return Math.round(Math.min(255,Math.max(1,255*bt))).toString(16).padStart(2,"0")}class S{constructor(){ot(this,k,0)}getId(){return`${e.AnnotationEditorPrefix}${oe(this,k)._++}`}}k=new WeakMap;class d{constructor(K=128){ot(this,m,[]);ot(this,s,!1);ot(this,r,void 0);ot(this,l,-1);pt(this,r,K)}add({cmd:K,undo:st,mustExec:St,type:Ct=NaN,overwriteIfSameType:At=!1,keepUndo:kt=!1}){if(St&&K(),O(this,s))return;const Ft={cmd:K,undo:st,type:Ct};if(O(this,l)===-1){O(this,m).length>0&&(O(this,m).length=0),pt(this,l,0),O(this,m).push(Ft);return}if(At&&O(this,m)[O(this,l)].type===Ct){kt&&(Ft.undo=O(this,m)[O(this,l)].undo),O(this,m)[O(this,l)]=Ft;return}const jt=O(this,l)+1;jt===O(this,r)?O(this,m).splice(0,1):(pt(this,l,jt),jt<O(this,m).length&&O(this,m).splice(jt)),O(this,m).push(Ft)}undo(){O(this,l)!==-1&&(pt(this,s,!0),O(this,m)[O(this,l)].undo(),pt(this,s,!1),pt(this,l,O(this,l)-1))}redo(){O(this,l)<O(this,m).length-1&&(pt(this,l,O(this,l)+1),pt(this,s,!0),O(this,m)[O(this,l)].cmd(),pt(this,s,!1))}hasSomethingToUndo(){return O(this,l)!==-1}hasSomethingToRedo(){return O(this,l)<O(this,m).length-1}destroy(){pt(this,m,null)}}m=new WeakMap,s=new WeakMap,r=new WeakMap,l=new WeakMap,t.CommandManager=d;const v=class{constructor(K){ot(this,F);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const st=v.platform.isMac;for(const[St,Ct]of K)for(const At of St){const kt=At.startsWith("mac+");st&&kt?(this.callbacks.set(At.slice(4),Ct),this.allKeys.add(At.split("+").at(-1))):!st&&!kt&&(this.callbacks.set(At,Ct),this.allKeys.add(At.split("+").at(-1)))}}static get platform(){const K=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:K.includes("Win"),isMac:K.includes("Mac")})}exec(K,st){if(!this.allKeys.has(st.key))return;const St=this.callbacks.get(ct(this,F,Te).call(this,st));!St||(St.bind(K)(),st.stopPropagation(),st.preventDefault())}};let o=v;F=new WeakSet,Te=function(K){K.altKey&&this.buffer.push("alt"),K.ctrlKey&&this.buffer.push("ctrl"),K.metaKey&&this.buffer.push("meta"),K.shiftKey&&this.buffer.push("shift"),this.buffer.push(K.key);const st=this.buffer.join("+");return this.buffer.length=0,st},t.KeyboardManager=o;class g{constructor(){ot(this,a,null)}copy(K){!K||(Array.isArray(K)?pt(this,a,K.map(st=>st.serialize())):pt(this,a,[K.serialize()]),pt(this,a,O(this,a).filter(st=>!!st)),O(this,a).length===0&&pt(this,a,null))}paste(){return O(this,a)}isEmpty(){return O(this,a)===null}destroy(){pt(this,a,null)}}a=new WeakMap;const h=class{get _colors(){const K=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(K),(0,e.shadow)(this,"_colors",K)}convert(K){const st=(0,u.getRGB)(K);if(!window.matchMedia("(forced-colors: active)").matches)return st;for(const[St,Ct]of this._colors)if(Ct.every((At,kt)=>At===st[kt]))return h._colorsMapping.get(St);return st}getHexCode(K){const st=this._colors.get(K);return st?e.Util.makeHexColor(...st):K}};let E=h;Nt(E,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=E;const Z=class{constructor(K,st){ot(this,y);ot(this,w);ot(this,c);ot(this,T);ot(this,B);ot(this,Y);ot(this,et);ot(this,nt);ot(this,_t);ot(this,C,null);ot(this,D,new Map);ot(this,I,new Map);ot(this,L,new g);ot(this,W,new d);ot(this,tt,0);ot(this,$,null);ot(this,N,null);ot(this,G,new S);ot(this,M,!1);ot(this,q,e.AnnotationEditorType.NONE);ot(this,U,new Set);ot(this,rt,this.keydown.bind(this));ot(this,at,this.onEditingAction.bind(this));ot(this,lt,this.onPageChanging.bind(this));ot(this,mt,this.onTextLayerRendered.bind(this));ot(this,ut,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ot(this,j,null);pt(this,j,K),pt(this,N,st),O(this,N)._on("editingaction",O(this,at)),O(this,N)._on("pagechanging",O(this,lt)),O(this,N)._on("textlayerrendered",O(this,mt))}destroy(){ct(this,w,ce).call(this),O(this,N)._off("editingaction",O(this,at)),O(this,N)._off("pagechanging",O(this,lt)),O(this,N)._off("textlayerrendered",O(this,mt));for(const K of O(this,I).values())K.destroy();O(this,I).clear(),O(this,D).clear(),pt(this,C,null),O(this,U).clear(),O(this,L).destroy(),O(this,W).destroy()}onPageChanging({pageNumber:K}){pt(this,tt,K-1)}onTextLayerRendered({pageNumber:K}){const st=K-1,St=O(this,I).get(st);St==null||St.onTextLayerRendered()}focusMainContainer(){O(this,j).focus()}keydown(K){var st;(st=this.getActive())!=null&&st.shouldGetKeyboardEvents()||Z._keyboardManager.exec(this,K)}onEditingAction(K){["undo","redo","cut","copy","paste","delete","selectAll"].includes(K.name)&&this[K.name]()}setEditingState(K){K?(ct(this,y,xe).call(this),ct(this,c,Wt).call(this,{isEditing:O(this,q)!==e.AnnotationEditorType.NONE,isEmpty:ct(this,nt,Zt).call(this),hasSomethingToUndo:O(this,W).hasSomethingToUndo(),hasSomethingToRedo:O(this,W).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:O(this,L).isEmpty()})):(ct(this,w,ce).call(this),ct(this,c,Wt).call(this,{isEditing:!1}))}registerEditorTypes(K){pt(this,$,K);for(const st of O(this,$))ct(this,T,Qt).call(this,st.defaultPropertiesToUpdate)}getId(){return O(this,G).getId()}addLayer(K){O(this,I).set(K.pageIndex,K),O(this,M)?K.enable():K.disable()}removeLayer(K){O(this,I).delete(K.pageIndex)}updateMode(K){if(pt(this,q,K),K===e.AnnotationEditorType.NONE)this.setEditingState(!1),ct(this,Y,ke).call(this);else{this.setEditingState(!0),ct(this,B,Pe).call(this);for(const st of O(this,I).values())st.updateMode(K)}}updateToolbar(K){K!==O(this,q)&&O(this,N).dispatch("switchannotationeditormode",{source:this,mode:K})}updateParams(K,st){for(const St of O(this,U))St.updateParams(K,st);for(const St of O(this,$))St.updateDefaultParams(K,st)}getEditors(K){const st=[];for(const St of O(this,D).values())St.pageIndex===K&&st.push(St);return st}getEditor(K){return O(this,D).get(K)}addEditor(K){O(this,D).set(K.id,K)}removeEditor(K){O(this,D).delete(K.id),this.unselect(K)}setActiveEditor(K){O(this,C)!==K&&(pt(this,C,K),K&&ct(this,T,Qt).call(this,K.propertiesToUpdate))}toggleSelected(K){if(O(this,U).has(K)){O(this,U).delete(K),K.unselect(),ct(this,c,Wt).call(this,{hasSelectedEditor:this.hasSelection});return}O(this,U).add(K),K.select(),ct(this,T,Qt).call(this,K.propertiesToUpdate),ct(this,c,Wt).call(this,{hasSelectedEditor:!0})}setSelected(K){for(const st of O(this,U))st!==K&&st.unselect();O(this,U).clear(),O(this,U).add(K),K.select(),ct(this,T,Qt).call(this,K.propertiesToUpdate),ct(this,c,Wt).call(this,{hasSelectedEditor:!0})}isSelected(K){return O(this,U).has(K)}unselect(K){K.unselect(),O(this,U).delete(K),ct(this,c,Wt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return O(this,U).size!==0}undo(){O(this,W).undo(),ct(this,c,Wt).call(this,{hasSomethingToUndo:O(this,W).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ct(this,nt,Zt).call(this)})}redo(){O(this,W).redo(),ct(this,c,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:O(this,W).hasSomethingToRedo(),isEmpty:ct(this,nt,Zt).call(this)})}addCommands(K){O(this,W).add(K),ct(this,c,Wt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ct(this,nt,Zt).call(this)})}delete(){if(O(this,C)&&O(this,C).commitOrRemove(),!this.hasSelection)return;const K=[...O(this,U)],st=()=>{for(const Ct of K)Ct.remove()},St=()=>{for(const Ct of K)ct(this,et,he).call(this,Ct)};this.addCommands({cmd:st,undo:St,mustExec:!0})}copy(){if(O(this,C)&&O(this,C).commitOrRemove(),this.hasSelection){const K=[];for(const st of O(this,U))st.isEmpty()||K.push(st);if(K.length===0)return;O(this,L).copy(K),ct(this,c,Wt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(O(this,L).isEmpty())return;this.unselectAll();const K=O(this,I).get(O(this,tt)),st=O(this,L).paste().map(At=>K.deserialize(At)),St=()=>{for(const At of st)ct(this,et,he).call(this,At);ct(this,_t,te).call(this,st)},Ct=()=>{for(const At of st)At.remove()};this.addCommands({cmd:St,undo:Ct,mustExec:!0})}selectAll(){for(const K of O(this,U))K.commit();ct(this,_t,te).call(this,O(this,D).values())}unselectAll(){if(O(this,C)){O(this,C).commitOrRemove();return}if(ct(this,_t,te).size!==0){for(const K of O(this,U))K.unselect();O(this,U).clear(),ct(this,c,Wt).call(this,{hasSelectedEditor:!1})}}isActive(K){return O(this,C)===K}getActive(){return O(this,C)}getMode(){return O(this,q)}};let A=Z;C=new WeakMap,D=new WeakMap,I=new WeakMap,L=new WeakMap,W=new WeakMap,tt=new WeakMap,$=new WeakMap,N=new WeakMap,G=new WeakMap,M=new WeakMap,q=new WeakMap,U=new WeakMap,rt=new WeakMap,at=new WeakMap,lt=new WeakMap,mt=new WeakMap,ut=new WeakMap,j=new WeakMap,y=new WeakSet,xe=function(){O(this,j).addEventListener("keydown",O(this,rt))},w=new WeakSet,ce=function(){O(this,j).removeEventListener("keydown",O(this,rt))},c=new WeakSet,Wt=function(K){Object.entries(K).some(([St,Ct])=>O(this,ut)[St]!==Ct)&&O(this,N).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(O(this,ut),K)})},T=new WeakSet,Qt=function(K){O(this,N).dispatch("annotationeditorparamschanged",{source:this,details:K})},B=new WeakSet,Pe=function(){if(!O(this,M)){pt(this,M,!0);for(const K of O(this,I).values())K.enable()}},Y=new WeakSet,ke=function(){if(this.unselectAll(),O(this,M)){pt(this,M,!1);for(const K of O(this,I).values())K.disable()}},et=new WeakSet,he=function(K){const st=O(this,I).get(K.pageIndex);st?st.addOrRebuild(K):this.addEditor(K)},nt=new WeakSet,Zt=function(){if(O(this,D).size===0)return!0;if(O(this,D).size===1)for(const K of O(this,D).values())return K.isEmpty();return!1},_t=new WeakSet,te=function(K){O(this,U).clear();for(const st of K)st.isEmpty()||(O(this,U).add(st),st.select());ct(this,c,Wt).call(this,{hasSelectedEditor:!0})},Nt(A,"_keyboardManager",new o([[["ctrl+a","mac+meta+a"],Z.prototype.selectAll],[["ctrl+c","mac+meta+c"],Z.prototype.copy],[["ctrl+v","mac+meta+v"],Z.prototype.paste],[["ctrl+x","mac+meta+x"],Z.prototype.cut],[["ctrl+z","mac+meta+z"],Z.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Z.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Z.prototype.delete],[["Escape","mac+Escape"],Z.prototype.unselectAll]])),t.AnnotationEditorUIManager=A},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var e=i(1);const u=3285377520,x=4294901760,p=65535;class S{constructor(o){this.h1=o?o&4294967295:u,this.h2=o?o&4294967295:u}update(o){let g,E;if(typeof o=="string"){g=new Uint8Array(o.length*2),E=0;for(let C=0,D=o.length;C<D;C++){const I=o.charCodeAt(C);I<=255?g[E++]=I:(g[E++]=I>>>8,g[E++]=I&255)}}else if((0,e.isArrayBuffer)(o))g=o.slice(),E=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const A=E>>2,k=E-A*4,m=new Uint32Array(g.buffer,0,A);let s=0,r=0,l=this.h1,F=this.h2;const P=3432918353,v=461845907,a=P&p,h=v&p;for(let C=0;C<A;C++)C&1?(s=m[C],s=s*P&x|s*a&p,s=s<<15|s>>>17,s=s*v&x|s*h&p,l^=s,l=l<<13|l>>>19,l=l*5+3864292196):(r=m[C],r=r*P&x|r*a&p,r=r<<15|r>>>17,r=r*v&x|r*h&p,F^=r,F=F<<13|F>>>19,F=F*5+3864292196);switch(s=0,k){case 3:s^=g[A*4+2]<<16;case 2:s^=g[A*4+1]<<8;case 1:s^=g[A*4],s=s*P&x|s*a&p,s=s<<15|s>>>17,s=s*v&x|s*h&p,A&1?l^=s:F^=s}this.h1=l,this.h2=F}hexdigest(){let o=this.h1,g=this.h2;o^=g>>>1,o=o*3981806797&x|o*36045&p,g=g*4283543511&x|((g<<16|o>>>16)*2950163797&x)>>>16,o^=g>>>1,o=o*444984403&x|o*60499&p,g=g*3301882366&x|((g<<16|o>>>16)*3120437893&x)>>>16,o^=g>>>1;const E=(o>>>0).toString(16),A=(g>>>0).toString(16);return E.padStart(8,"0")+A.padStart(8,"0")}}t.MurmurHash3_64=S},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var e=i(1);class u{constructor({docId:d,onUnsupportedFeature:o,ownerDocument:g=globalThis.document,styleElement:E=null}){this.constructor===u&&(0,e.unreachable)("Cannot initialize BaseFontLoader."),this.docId=d,this._onUnsupportedFeature=o,this._document=g,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(d){this.nativeFontFaces.push(d),this._document.fonts.add(d)}insertRule(d){let o=this.styleElement;o||(o=this.styleElement=this._document.createElement("style"),o.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(o));const g=o.sheet;g.insertRule(d,g.cssRules.length)}clear(){for(const d of this.nativeFontFaces)this._document.fonts.delete(d);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(d){if(d.attached||d.missingFile)return;if(d.attached=!0,this.isFontLoadingAPISupported){const g=d.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(E){throw this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,e.warn)(`Failed to load font '${g.family}': '${E}'.`),d.disableFontFace=!0,E}}return}const o=d.createFontFaceRule();if(o){if(this.insertRule(o),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const E=this._queueLoadingCallback(g);this._prepareFontLoadEvent([o],[d],E)})}}_queueLoadingCallback(d){(0,e.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var o;const d=!!((o=this._document)!=null&&o.fonts);return(0,e.shadow)(this,"isFontLoadingAPISupported",d)}get isSyncFontLoadingSupported(){(0,e.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,e.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(d,o,g){(0,e.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let x;t.FontLoader=x,t.FontLoader=x=class extends u{constructor(d){super(d),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let d=!1;if(typeof navigator>"u")d=!0;else{const o=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(o==null?void 0:o[1])>=14&&(d=!0)}return(0,e.shadow)(this,"isSyncFontLoadingSupported",d)}_queueLoadingCallback(d){function o(){for((0,e.assert)(!E.done,"completeRequest() cannot be called twice."),E.done=!0;g.requests.length>0&&g.requests[0].done;){const A=g.requests.shift();setTimeout(A.callback,0)}}const g=this.loadingContext,E={id:`pdfjs-font-loading-${g.nextRequestId++}`,done:!1,complete:o,callback:d};return g.requests.push(E),E}get _loadTestFont(){const d=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,e.shadow)(this,"_loadTestFont",d())}_prepareFontLoadEvent(d,o,g){function E($,N){return $.charCodeAt(N)<<24|$.charCodeAt(N+1)<<16|$.charCodeAt(N+2)<<8|$.charCodeAt(N+3)&255}function A($,N,G,M){const q=$.substring(0,N),U=$.substring(N+G);return q+M+U}let k,m;const s=this._document.createElement("canvas");s.width=1,s.height=1;const r=s.getContext("2d");let l=0;function F($,N){if(l++,l>30){(0,e.warn)("Load test font never loaded."),N();return}if(r.font="30px "+$,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){N();return}setTimeout(F.bind(null,$,N))}const P=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=A(v,976,P.length,P);const h=16,C=1482184792;let D=E(v,h);for(k=0,m=P.length-3;k<m;k+=4)D=D-C+E(P,k)|0;k<P.length&&(D=D-C+E(P+"XXX",k)|0),v=A(v,h,4,(0,e.string32)(D));const I=`url(data:font/opentype;base64,${btoa(v)});`,L=`@font-face {font-family:"${P}";src:${I}}`;this.insertRule(L);const W=[];for(const $ of o)W.push($.loadedName);W.push(P);const tt=this._document.createElement("div");tt.style.visibility="hidden",tt.style.width=tt.style.height="10px",tt.style.position="absolute",tt.style.top=tt.style.left="0px";for(const $ of W){const N=this._document.createElement("span");N.textContent="Hi",N.style.fontFamily=$,tt.append(N)}this._document.body.append(tt),F(P,()=>{tt.remove(),g.complete()})}};class p{constructor(d,{isEvalSupported:o=!0,disableFontFace:g=!1,ignoreErrors:E=!1,onUnsupportedFeature:A,fontRegistry:k=null}){this.compiledGlyphs=Object.create(null);for(const m in d)this[m]=d[m];this.isEvalSupported=o!==!1,this.disableFontFace=g===!0,this.ignoreErrors=E===!0,this._onUnsupportedFeature=A,this.fontRegistry=k}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let d;if(!this.cssFontInfo)d=new FontFace(this.loadedName,this.data,{});else{const o={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(o.style=`oblique ${this.cssFontInfo.italicAngle}deg`),d=new FontFace(this.cssFontInfo.fontFamily,this.data,o)}return this.fontRegistry&&this.fontRegistry.registerFont(this),d}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const d=(0,e.bytesToString)(this.data),o=`url(data:${this.mimetype};base64,${btoa(d)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${o}}`;else{let E=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(E+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${E}src:${o}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,o),g}getPathGenerator(d,o){if(this.compiledGlyphs[o]!==void 0)return this.compiledGlyphs[o];let g;try{g=d.get(this.loadedName+"_path_"+o)}catch(E){if(!this.ignoreErrors)throw E;return this._onUnsupportedFeature({featureId:e.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,e.warn)(`getPathGenerator - ignoring character: "${E}".`),this.compiledGlyphs[o]=function(A,k){}}if(this.isEvalSupported&&e.FeatureTest.isEvalSupported){const E=[];for(const A of g){const k=A.args!==void 0?A.args.join(","):"";E.push("c.",A.cmd,"(",k,`);
`)}return this.compiledGlyphs[o]=new Function("c","size",E.join(""))}return this.compiledGlyphs[o]=function(E,A){for(const k of g)k.cmd==="scale"&&(k.args=[A,-A]),E[k.cmd].apply(E,k.args)}}}t.FontFaceObject=p},(b,t,i)=>{var lt,de;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var e=i(1),u=i(4),x=i(13),p=i(14),S=i(3);const d=16,o=100,g=4096,E=15,A=10,k=1e3,m=16,s=1.000001;function r(j,y){if(j._removeMirroring)throw new Error("Context is already forwarding operations.");j.__originalSave=j.save,j.__originalRestore=j.restore,j.__originalRotate=j.rotate,j.__originalScale=j.scale,j.__originalTranslate=j.translate,j.__originalTransform=j.transform,j.__originalSetTransform=j.setTransform,j.__originalResetTransform=j.resetTransform,j.__originalClip=j.clip,j.__originalMoveTo=j.moveTo,j.__originalLineTo=j.lineTo,j.__originalBezierCurveTo=j.bezierCurveTo,j.__originalRect=j.rect,j.__originalClosePath=j.closePath,j.__originalBeginPath=j.beginPath,j._removeMirroring=()=>{j.save=j.__originalSave,j.restore=j.__originalRestore,j.rotate=j.__originalRotate,j.scale=j.__originalScale,j.translate=j.__originalTranslate,j.transform=j.__originalTransform,j.setTransform=j.__originalSetTransform,j.resetTransform=j.__originalResetTransform,j.clip=j.__originalClip,j.moveTo=j.__originalMoveTo,j.lineTo=j.__originalLineTo,j.bezierCurveTo=j.__originalBezierCurveTo,j.rect=j.__originalRect,j.closePath=j.__originalClosePath,j.beginPath=j.__originalBeginPath,delete j._removeMirroring},j.save=function(){y.save(),this.__originalSave()},j.restore=function(){y.restore(),this.__originalRestore()},j.translate=function(w,n){y.translate(w,n),this.__originalTranslate(w,n)},j.scale=function(w,n){y.scale(w,n),this.__originalScale(w,n)},j.transform=function(w,n,c,_,T,R){y.transform(w,n,c,_,T,R),this.__originalTransform(w,n,c,_,T,R)},j.setTransform=function(w,n,c,_,T,R){y.setTransform(w,n,c,_,T,R),this.__originalSetTransform(w,n,c,_,T,R)},j.resetTransform=function(){y.resetTransform(),this.__originalResetTransform()},j.rotate=function(w){y.rotate(w),this.__originalRotate(w)},j.clip=function(w){y.clip(w),this.__originalClip(w)},j.moveTo=function(f,w){y.moveTo(f,w),this.__originalMoveTo(f,w)},j.lineTo=function(f,w){y.lineTo(f,w),this.__originalLineTo(f,w)},j.bezierCurveTo=function(f,w,n,c,_,T){y.bezierCurveTo(f,w,n,c,_,T),this.__originalBezierCurveTo(f,w,n,c,_,T)},j.rect=function(f,w,n,c){y.rect(f,w,n,c),this.__originalRect(f,w,n,c)},j.closePath=function(){y.closePath(),this.__originalClosePath()},j.beginPath=function(){y.beginPath(),this.__originalBeginPath()}}function l(j){if(j._transformStack&&(j._transformStack=[]),!j.mozCurrentTransform){j._originalSave=j.save,j._originalRestore=j.restore,j._originalRotate=j.rotate,j._originalScale=j.scale,j._originalTranslate=j.translate,j._originalTransform=j.transform,j._originalSetTransform=j.setTransform,j._originalResetTransform=j.resetTransform,j._transformMatrix=j._transformMatrix||[1,0,0,1,0,0],j._transformStack=[];try{const y=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(j),"lineWidth");j._setLineWidth=y.set,j._getLineWidth=y.get,Object.defineProperty(j,"lineWidth",{set:function(w){this._setLineWidth(w*s)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(j,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(j,"mozCurrentTransformInverse",{get:function(){const[f,w,n,c,_,T]=this._transformMatrix,R=f*c-w*n,B=w*n-f*c;return[c/R,w/B,n/B,f/R,(c*_-n*T)/B,(w*_-f*T)/R]}}),j.save=function(){const f=this._transformMatrix;this._transformStack.push(f),this._transformMatrix=f.slice(0,6),this._originalSave()},j.restore=function(){this._transformStack.length===0&&(0,e.warn)("Tried to restore a ctx when the stack was already empty.");const f=this._transformStack.pop();f&&(this._transformMatrix=f,this._originalRestore())},j.translate=function(f,w){const n=this._transformMatrix;n[4]=n[0]*f+n[2]*w+n[4],n[5]=n[1]*f+n[3]*w+n[5],this._originalTranslate(f,w)},j.scale=function(f,w){const n=this._transformMatrix;n[0]*=f,n[1]*=f,n[2]*=w,n[3]*=w,this._originalScale(f,w)},j.transform=function(f,w,n,c,_,T){const R=this._transformMatrix;this._transformMatrix=[R[0]*f+R[2]*w,R[1]*f+R[3]*w,R[0]*n+R[2]*c,R[1]*n+R[3]*c,R[0]*_+R[2]*T+R[4],R[1]*_+R[3]*T+R[5]],j._originalTransform(f,w,n,c,_,T)},j.setTransform=function(f,w,n,c,_,T){this._transformMatrix=[f,w,n,c,_,T],j._originalSetTransform(f,w,n,c,_,T)},j.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],j._originalResetTransform()},j.rotate=function(f){const w=Math.cos(f),n=Math.sin(f),c=this._transformMatrix;this._transformMatrix=[c[0]*w+c[2]*n,c[1]*w+c[3]*n,c[0]*-n+c[2]*w,c[1]*-n+c[3]*w,c[4],c[5]],this._originalRotate(f)}}}class F{constructor(y){this.canvasFactory=y,this.cache=Object.create(null)}getCanvas(y,f,w,n){let c;return this.cache[y]!==void 0?(c=this.cache[y],this.canvasFactory.reset(c,f,w),c.context.setTransform(1,0,0,1,0,0)):(c=this.canvasFactory.create(f,w),this.cache[y]=c),n&&l(c.context),c}delete(y){delete this.cache[y]}clear(){for(const y in this.cache){const f=this.cache[y];this.canvasFactory.destroy(f),delete this.cache[y]}}}function P(j,y,f,w,n,c,_,T,R,B){const[z,Y,H,et,J,nt]=j.mozCurrentTransform;if(Y===0&&H===0){const vt=_*z+J,Z=Math.round(vt),bt=T*et+nt,K=Math.round(bt),st=(_+R)*z+J,St=Math.abs(Math.round(st)-Z)||1,Ct=(T+B)*et+nt,At=Math.abs(Math.round(Ct)-K)||1;return j.setTransform(Math.sign(z),0,0,Math.sign(et),Z,K),j.drawImage(y,f,w,n,c,0,0,St,At),j.setTransform(z,Y,H,et,J,nt),[St,At]}if(z===0&&et===0){const vt=T*H+J,Z=Math.round(vt),bt=_*Y+nt,K=Math.round(bt),st=(T+B)*H+J,St=Math.abs(Math.round(st)-Z)||1,Ct=(_+R)*Y+nt,At=Math.abs(Math.round(Ct)-K)||1;return j.setTransform(0,Math.sign(Y),Math.sign(H),0,Z,K),j.drawImage(y,f,w,n,c,0,0,At,St),j.setTransform(z,Y,H,et,J,nt),[At,St]}j.drawImage(y,f,w,n,c,_,T,R,B);const ht=Math.hypot(z,Y),_t=Math.hypot(H,et);return[ht*R,_t*B]}function v(j){const{width:y,height:f}=j;if(y>k||f>k)return null;const w=1e3,n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),c=y+1;let _=new Uint8Array(c*(f+1)),T,R,B;const z=y+7&-8;let Y=new Uint8Array(z*f),H=0;for(const Z of j.data){let bt=128;for(;bt>0;)Y[H++]=Z&bt?0:255,bt>>=1}let et=0;for(H=0,Y[H]!==0&&(_[0]=1,++et),R=1;R<y;R++)Y[H]!==Y[H+1]&&(_[R]=Y[H]?2:1,++et),H++;for(Y[H]!==0&&(_[R]=2,++et),T=1;T<f;T++){H=T*z,B=T*c,Y[H-z]!==Y[H]&&(_[B]=Y[H]?1:8,++et);let Z=(Y[H]?4:0)+(Y[H-z]?8:0);for(R=1;R<y;R++)Z=(Z>>2)+(Y[H+1]?4:0)+(Y[H-z+1]?8:0),n[Z]&&(_[B+R]=n[Z],++et),H++;if(Y[H-z]!==Y[H]&&(_[B+R]=Y[H]?2:4,++et),et>w)return null}for(H=z*(f-1),B=T*c,Y[H]!==0&&(_[B]=8,++et),R=1;R<y;R++)Y[H]!==Y[H+1]&&(_[B+R]=Y[H]?4:8,++et),H++;if(Y[H]!==0&&(_[B+R]=4,++et),et>w)return null;const J=new Int32Array([0,c,-1,0,-c,0,0,0,1]);let nt,ht,_t;for(S.isNodeJS?ht=[]:nt=new Path2D,T=0;et&&T<=f;T++){let Z=T*c;const bt=Z+y;for(;Z<bt&&!_[Z];)Z++;if(Z===bt)continue;nt?nt.moveTo(Z%c,T):_t=[Z%c,T];const K=Z;let st=_[Z];do{const St=J[st];do Z+=St;while(!_[Z]);const Ct=_[Z];Ct!==5&&Ct!==10?(st=Ct,_[Z]=0):(st=Ct&51*st>>4,_[Z]&=st>>2|st<<2),nt?nt.lineTo(Z%c,Z/c|0):_t.push(Z%c,Z/c|0),_[Z]||--et}while(K!==Z);nt||ht.push(_t),--T}return Y=null,_=null,function(Z){if(Z.save(),Z.scale(1/y,-1/f),Z.translate(0,-f),nt)Z.fill(nt);else{Z.beginPath();for(const bt of ht){Z.moveTo(bt[0],bt[1]);for(let K=2,st=bt.length;K<st;K+=2)Z.lineTo(bt[K],bt[K+1])}Z.fill()}Z.beginPath(),Z.restore()}}class a{constructor(y,f){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=e.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=e.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=e.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,y,f])}clone(){const y=Object.create(this);return y.clipBox=this.clipBox.slice(),y}setCurrentPoint(y,f){this.x=y,this.y=f}updatePathMinMax(y,f,w){[f,w]=e.Util.applyTransform([f,w],y),this.minX=Math.min(this.minX,f),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,f),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(y,f){const w=e.Util.applyTransform(f,y),n=e.Util.applyTransform(f.slice(2),y);this.minX=Math.min(this.minX,w[0],n[0]),this.minY=Math.min(this.minY,w[1],n[1]),this.maxX=Math.max(this.maxX,w[0],n[0]),this.maxY=Math.max(this.maxY,w[1],n[1])}updateScalingPathMinMax(y,f){e.Util.scaleMinMax(y,f),this.minX=Math.min(this.minX,f[0]),this.maxX=Math.max(this.maxX,f[1]),this.minY=Math.min(this.minY,f[2]),this.maxY=Math.max(this.maxY,f[3])}updateCurvePathMinMax(y,f,w,n,c,_,T,R,B,z){const Y=e.Util.bezierBoundingBox(f,w,n,c,_,T,R,B);if(z){z[0]=Math.min(z[0],Y[0],Y[2]),z[1]=Math.max(z[1],Y[0],Y[2]),z[2]=Math.min(z[2],Y[1],Y[3]),z[3]=Math.max(z[3],Y[1],Y[3]);return}this.updateRectMinMax(y,Y)}getPathBoundingBox(y=x.PathType.FILL,f=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(y===x.PathType.STROKE){f||(0,e.unreachable)("Stroke bounding box must include transform.");const n=e.Util.singularValueDecompose2dScale(f),c=n[0]*this.lineWidth/2,_=n[1]*this.lineWidth/2;w[0]-=c,w[1]-=_,w[2]+=c,w[3]+=_}return w}updateClipFromPath(){const y=e.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(y||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(y){this.clipBox=y,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(y=x.PathType.FILL,f=null){return e.Util.intersect(this.clipBox,this.getPathBoundingBox(y,f))}}function h(j,y,f=null){if(typeof ImageData<"u"&&y instanceof ImageData){j.putImageData(y,0,0);return}const w=y.height,n=y.width,c=w%m,_=(w-c)/m,T=c===0?_:_+1,R=j.createImageData(n,m);let B=0,z;const Y=y.data,H=R.data;let et,J,nt,ht,_t,vt,Z,bt;if(f)switch(f.length){case 1:_t=f[0],vt=f[0],Z=f[0],bt=f[0];break;case 4:_t=f[0],vt=f[1],Z=f[2],bt=f[3];break}if(y.kind===e.ImageKind.GRAYSCALE_1BPP){const K=Y.byteLength,st=new Uint32Array(H.buffer,0,H.byteLength>>2),St=st.length,Ct=n+7>>3;let At=4294967295,kt=e.FeatureTest.isLittleEndian?4278190080:255;for(bt&&bt[0]===255&&bt[255]===0&&([At,kt]=[kt,At]),et=0;et<T;et++){for(nt=et<_?m:c,z=0,J=0;J<nt;J++){const Ft=K-B;let jt=0;const xt=Ft>Ct?n:Ft*8-7,$t=xt&-8;let It=0,it=0;for(;jt<$t;jt+=8)it=Y[B++],st[z++]=it&128?At:kt,st[z++]=it&64?At:kt,st[z++]=it&32?At:kt,st[z++]=it&16?At:kt,st[z++]=it&8?At:kt,st[z++]=it&4?At:kt,st[z++]=it&2?At:kt,st[z++]=it&1?At:kt;for(;jt<xt;jt++)It===0&&(it=Y[B++],It=128),st[z++]=it&It?At:kt,It>>=1}for(;z<St;)st[z++]=0;j.putImageData(R,0,et*m)}}else if(y.kind===e.ImageKind.RGBA_32BPP){const K=!!(_t||vt||Z);for(J=0,ht=n*m*4,et=0;et<_;et++){if(H.set(Y.subarray(B,B+ht)),B+=ht,K)for(let st=0;st<ht;st+=4)_t&&(H[st+0]=_t[H[st+0]]),vt&&(H[st+1]=vt[H[st+1]]),Z&&(H[st+2]=Z[H[st+2]]);j.putImageData(R,0,J),J+=m}if(et<T){if(ht=n*c*4,H.set(Y.subarray(B,B+ht)),K)for(let st=0;st<ht;st+=4)_t&&(H[st+0]=_t[H[st+0]]),vt&&(H[st+1]=vt[H[st+1]]),Z&&(H[st+2]=Z[H[st+2]]);j.putImageData(R,0,J)}}else if(y.kind===e.ImageKind.RGB_24BPP){const K=!!(_t||vt||Z);for(nt=m,ht=n*nt,et=0;et<T;et++){for(et>=_&&(nt=c,ht=n*nt),z=0,J=ht;J--;)H[z++]=Y[B++],H[z++]=Y[B++],H[z++]=Y[B++],H[z++]=255;if(K)for(let st=0;st<z;st+=4)_t&&(H[st+0]=_t[H[st+0]]),vt&&(H[st+1]=vt[H[st+1]]),Z&&(H[st+2]=Z[H[st+2]]);j.putImageData(R,0,et*m)}}else throw new Error(`bad image kind: ${y.kind}`)}function C(j,y){if(y.bitmap){j.drawImage(y.bitmap,0,0);return}const f=y.height,w=y.width,n=f%m,c=(f-n)/m,_=n===0?c:c+1,T=j.createImageData(w,m);let R=0;const B=y.data,z=T.data;for(let Y=0;Y<_;Y++){const H=Y<c?m:n;({srcPos:R}=(0,p.applyMaskImageData)({src:B,srcPos:R,dest:z,width:w,height:H})),j.putImageData(T,0,Y*m)}}function D(j,y){const f=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let w=0,n=f.length;w<n;w++){const c=f[w];j[c]!==void 0&&(y[c]=j[c])}j.setLineDash!==void 0&&(y.setLineDash(j.getLineDash()),y.lineDashOffset=j.lineDashOffset)}function I(j,y){j.strokeStyle=j.fillStyle=y||"#000000",j.fillRule="nonzero",j.globalAlpha=1,j.lineWidth=1,j.lineCap="butt",j.lineJoin="miter",j.miterLimit=10,j.globalCompositeOperation="source-over",j.font="10px sans-serif",j.setLineDash!==void 0&&(j.setLineDash([]),j.lineDashOffset=0)}function L(j,y,f,w){const n=j.length;for(let c=3;c<n;c+=4){const _=j[c];if(_===0)j[c-3]=y,j[c-2]=f,j[c-1]=w;else if(_<255){const T=255-_;j[c-3]=j[c-3]*_+y*T>>8,j[c-2]=j[c-2]*_+f*T>>8,j[c-1]=j[c-1]*_+w*T>>8}}}function W(j,y,f){const w=j.length,n=1/255;for(let c=3;c<w;c+=4){const _=f?f[j[c]]:j[c];y[c]=y[c]*_*n|0}}function tt(j,y,f){const w=j.length;for(let n=3;n<w;n+=4){const c=j[n-3]*77+j[n-2]*152+j[n-1]*28;y[n]=f?y[n]*f[c>>8]>>8:y[n]*c>>16}}function $(j,y,f,w,n,c,_,T,R,B,z){const Y=!!c,H=Y?c[0]:0,et=Y?c[1]:0,J=Y?c[2]:0;let nt;n==="Luminosity"?nt=tt:nt=W;const _t=Math.min(w,Math.ceil(1048576/f));for(let vt=0;vt<w;vt+=_t){const Z=Math.min(_t,w-vt),bt=j.getImageData(T-B,vt+(R-z),f,Z),K=y.getImageData(T,vt+R,f,Z);Y&&L(bt.data,H,et,J),nt(bt.data,K.data,_),y.putImageData(K,T,vt+R)}}function N(j,y,f,w){const n=w[0],c=w[1],_=w[2]-n,T=w[3]-c;_===0||T===0||($(y.context,f,_,T,y.subtype,y.backdrop,y.transferMap,n,c,y.offsetX,y.offsetY),j.save(),j.globalAlpha=1,j.globalCompositeOperation="source-over",j.setTransform(1,0,0,1,0,0),j.drawImage(f.canvas,0,0),j.restore())}function G(j,y){const f=e.Util.singularValueDecompose2dScale(j);f[0]=Math.fround(f[0]),f[1]=Math.fround(f[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return y!==void 0?y:f[0]<=w||f[1]<=w}const M=["butt","round","square"],q=["miter","round","bevel"],U={},rt={},ut=class{constructor(y,f,w,n,c,_,T,R){ot(this,lt);this.ctx=y,this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=f,this.objs=w,this.canvasFactory=n,this.imageLayer=c,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=_,this.cachedCanvases=new F(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=T,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(R==null?void 0:R.background)||null,this.foregroundColor=(R==null?void 0:R.foreground)||null,y&&l(y),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(y,f=null){return typeof y=="string"?y.startsWith("g_")?this.commonObjs.get(y):this.objs.get(y):f}beginDrawing({transform:y,viewport:f,transparency:w=!1,background:n=null}){const c=this.ctx.canvas.width,_=this.ctx.canvas.height,T=n||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const R=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const B=this.backgroundColor=this.ctx.fillStyle;let z=!0,Y=T;if(this.ctx.fillStyle=T,Y=this.ctx.fillStyle,z=typeof Y=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Y),R==="#000000"&&B==="#ffffff"||R===B||!z)this.foregroundColor=this.backgroundColor=null;else{const[H,et,J]=(0,u.getRGB)(Y),nt=_t=>(_t/=255,_t<=.03928?_t/12.92:((_t+.055)/1.055)**2.4),ht=Math.round(.2126*nt(H)+.7152*nt(et)+.0722*nt(J));this.selectColor=(_t,vt,Z)=>{const bt=.2126*nt(_t)+.7152*nt(vt)+.0722*nt(Z);return Math.round(bt)===ht?B:R}}}if(this.ctx.fillStyle=this.backgroundColor||T,this.ctx.fillRect(0,0,c,_),this.ctx.restore(),w){const R=this.cachedCanvases.getCanvas("transparent",c,_,!0);this.compositeCtx=this.ctx,this.transparentCanvas=R.canvas,this.ctx=R.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),I(this.ctx,this.foregroundColor),y&&(this.ctx.transform.apply(this.ctx,y),this.outputScaleX=y[0],this.outputScaleY=y[0]),this.ctx.transform.apply(this.ctx,f.transform),this.viewportScale=f.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(y,f,w,n){const c=y.argsArray,_=y.fnArray;let T=f||0;const R=c.length;if(R===T)return T;const B=R-T>A&&typeof w=="function",z=B?Date.now()+E:0;let Y=0;const H=this.commonObjs,et=this.objs;let J;for(;;){if(n!==void 0&&T===n.nextBreakPoint)return n.breakIt(T,w),T;if(J=_[T],J!==e.OPS.dependency)this[J].apply(this,c[T]);else for(const nt of c[T]){const ht=nt.startsWith("g_")?H:et;if(!ht.has(nt))return ht.get(nt,w),T}if(T++,T===R)return T;if(B&&++Y>A){if(Date.now()>z)return w(),T;Y=0}}}endDrawing(){ct(this,lt,de).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const y of this._cachedBitmapsMap.values()){for(const f of y.values())typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement&&(f.width=f.height=0);y.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(y,f){const w=y.width,n=y.height;let c=Math.max(Math.hypot(f[0],f[1]),1),_=Math.max(Math.hypot(f[2],f[3]),1),T=w,R=n,B="prescale1",z,Y;for(;c>2&&T>1||_>2&&R>1;){let H=T,et=R;c>2&&T>1&&(H=Math.ceil(T/2),c/=T/H),_>2&&R>1&&(et=Math.ceil(R/2),_/=R/et),z=this.cachedCanvases.getCanvas(B,H,et,!1),Y=z.context,Y.clearRect(0,0,H,et),Y.drawImage(y,0,0,T,R,0,0,H,et),y=z.canvas,T=H,R=et,B=B==="prescale1"?"prescale2":"prescale1"}return{img:y,paintWidth:T,paintHeight:R}}_createMaskCanvas(y){const f=this.ctx,{width:w,height:n}=y,c=this.current.fillColor,_=this.current.patternFill,T=f.mozCurrentTransform;let R,B,z,Y;if((y.bitmap||y.data)&&y.count>1){const St=y.bitmap||y.data.buffer,Ct=T.slice(0,4);B=JSON.stringify(_?Ct:[Ct,c]),R=this._cachedBitmapsMap.get(St),R||(R=new Map,this._cachedBitmapsMap.set(St,R));const At=R.get(B);if(At&&!_){const kt=Math.round(Math.min(T[0],T[2])+T[4]),Ft=Math.round(Math.min(T[1],T[3])+T[5]);return{canvas:At,offsetX:kt,offsetY:Ft}}z=At}z||(Y=this.cachedCanvases.getCanvas("maskCanvas",w,n,!1),C(Y.context,y));let H=e.Util.transform(T,[1/w,0,0,-1/n,0,0]);H=e.Util.transform(H,[1,0,0,1,0,-n]);const et=e.Util.applyTransform([0,0],H),J=e.Util.applyTransform([w,n],H),nt=e.Util.normalizeRect([et[0],et[1],J[0],J[1]]),ht=Math.round(nt[2]-nt[0])||1,_t=Math.round(nt[3]-nt[1])||1,vt=this.cachedCanvases.getCanvas("fillCanvas",ht,_t,!0),Z=vt.context,bt=Math.min(et[0],J[0]),K=Math.min(et[1],J[1]);Z.translate(-bt,-K),Z.transform.apply(Z,H),z||(z=this._scaleImage(Y.canvas,Z.mozCurrentTransformInverse),z=z.img,R&&_&&R.set(B,z)),Z.imageSmoothingEnabled=G(Z.mozCurrentTransform,y.interpolate),P(Z,z,0,0,z.width,z.height,0,0,w,n),Z.globalCompositeOperation="source-in";const st=e.Util.transform(Z.mozCurrentTransformInverse,[1,0,0,1,-bt,-K]);return Z.fillStyle=_?c.getPattern(f,this,st,x.PathType.FILL):c,Z.fillRect(0,0,w,n),R&&!_&&(this.cachedCanvases.delete("fillCanvas"),R.set(B,vt.canvas)),{canvas:vt.canvas,offsetX:Math.round(bt),offsetY:Math.round(K)}}setLineWidth(y){y!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=y,this.ctx.lineWidth=y}setLineCap(y){this.ctx.lineCap=M[y]}setLineJoin(y){this.ctx.lineJoin=q[y]}setMiterLimit(y){this.ctx.miterLimit=y}setDash(y,f){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(y),w.lineDashOffset=f)}setRenderingIntent(y){}setFlatness(y){}setGState(y){for(let f=0,w=y.length;f<w;f++){const n=y[f],c=n[0],_=n[1];switch(c){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_[0],_[1]);break;case"CA":this.current.strokeAlpha=n[1];break;case"ca":this.current.fillAlpha=n[1],this.ctx.globalAlpha=n[1];break;case"BM":this.ctx.globalCompositeOperation=_;break;case"SMask":this.current.activeSMask=_?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=_}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const y=this.inSMaskMode;this.current.activeSMask&&!y?this.beginSMaskMode():!this.current.activeSMask&&y&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const y=this.ctx.canvas.width,f=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(w,y,f,!0);this.suspendedCtx=this.ctx,this.ctx=n.context;const c=this.ctx;c.setTransform.apply(c,this.suspendedCtx.mozCurrentTransform),D(this.suspendedCtx,c),r(c,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),D(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(y){if(!this.current.activeSMask)return;y?(y[0]=Math.floor(y[0]),y[1]=Math.floor(y[1]),y[2]=Math.ceil(y[2]),y[3]=Math.ceil(y[3])):y=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const f=this.current.activeSMask,w=this.suspendedCtx;N(w,f,this.ctx,y),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(D(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const y=this.current;this.stateStack.push(y),this.current=y.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),D(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(y,f,w,n,c,_){this.ctx.transform(y,f,w,n,c,_),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(y,f,w){const n=this.ctx,c=this.current;let _=c.x,T=c.y,R,B;const z=n.mozCurrentTransform,Y=z[0]===0&&z[3]===0||z[1]===0&&z[2]===0,H=Y?w.slice(0):null;for(let et=0,J=0,nt=y.length;et<nt;et++)switch(y[et]|0){case e.OPS.rectangle:_=f[J++],T=f[J++];const ht=f[J++],_t=f[J++],vt=_+ht,Z=T+_t;n.moveTo(_,T),ht===0||_t===0?n.lineTo(vt,Z):(n.lineTo(vt,T),n.lineTo(vt,Z),n.lineTo(_,Z)),Y||c.updateRectMinMax(z,[_,T,vt,Z]),n.closePath();break;case e.OPS.moveTo:_=f[J++],T=f[J++],n.moveTo(_,T),Y||c.updatePathMinMax(z,_,T);break;case e.OPS.lineTo:_=f[J++],T=f[J++],n.lineTo(_,T),Y||c.updatePathMinMax(z,_,T);break;case e.OPS.curveTo:R=_,B=T,_=f[J+4],T=f[J+5],n.bezierCurveTo(f[J],f[J+1],f[J+2],f[J+3],_,T),c.updateCurvePathMinMax(z,R,B,f[J],f[J+1],f[J+2],f[J+3],_,T,H),J+=6;break;case e.OPS.curveTo2:R=_,B=T,n.bezierCurveTo(_,T,f[J],f[J+1],f[J+2],f[J+3]),c.updateCurvePathMinMax(z,R,B,_,T,f[J],f[J+1],f[J+2],f[J+3],H),_=f[J+2],T=f[J+3],J+=4;break;case e.OPS.curveTo3:R=_,B=T,_=f[J+2],T=f[J+3],n.bezierCurveTo(f[J],f[J+1],_,T,_,T),c.updateCurvePathMinMax(z,R,B,f[J],f[J+1],_,T,_,T,H),J+=4;break;case e.OPS.closePath:n.closePath();break}Y&&c.updateScalingPathMinMax(z,H),c.setCurrentPoint(_,T)}closePath(){this.ctx.closePath()}stroke(y){y=typeof y<"u"?y:!0;const f=this.ctx,w=this.current.strokeColor;f.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&(w==null?void 0:w.getPattern)?(f.save(),f.strokeStyle=w.getPattern(f,this,f.mozCurrentTransformInverse,x.PathType.STROKE),this.rescaleAndStroke(!1),f.restore()):this.rescaleAndStroke(!0)),y&&this.consumePath(this.current.getClippedPathBoundingBox()),f.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(y){y=typeof y<"u"?y:!0;const f=this.ctx,w=this.current.fillColor,n=this.current.patternFill;let c=!1;n&&(f.save(),f.fillStyle=w.getPattern(f,this,f.mozCurrentTransformInverse,x.PathType.FILL),c=!0);const _=this.current.getClippedPathBoundingBox();this.contentVisible&&_!==null&&(this.pendingEOFill?(f.fill("evenodd"),this.pendingEOFill=!1):f.fill()),c&&f.restore(),y&&this.consumePath(_)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=U}eoClip(){this.pendingClip=rt}beginText(){this.current.textMatrix=e.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const y=this.pendingTextPaths,f=this.ctx;if(y===void 0){f.beginPath();return}f.save(),f.beginPath();for(const w of y)f.setTransform.apply(f,w.transform),f.translate(w.x,w.y),w.addToPath(f,w.fontSize);f.restore(),f.clip(),f.beginPath(),delete this.pendingTextPaths}setCharSpacing(y){this.current.charSpacing=y}setWordSpacing(y){this.current.wordSpacing=y}setHScale(y){this.current.textHScale=y/100}setLeading(y){this.current.leading=-y}setFont(y,f){const w=this.commonObjs.get(y),n=this.current;if(!w)throw new Error(`Can't find font for ${y}`);if(n.fontMatrix=w.fontMatrix||e.FONT_IDENTITY_MATRIX,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&(0,e.warn)("Invalid font matrix for font "+y),f<0?(f=-f,n.fontDirection=-1):n.fontDirection=1,this.current.font=w,this.current.fontSize=f,w.isType3Font)return;const c=w.loadedName||"sans-serif";let _="normal";w.black?_="900":w.bold&&(_="bold");const T=w.italic?"italic":"normal",R=`"${c}", ${w.fallbackName}`;let B=f;f<d?B=d:f>o&&(B=o),this.current.fontSizeScale=f/B,this.ctx.font=`${T} ${_} ${B}px ${R}`}setTextRenderingMode(y){this.current.textRenderingMode=y}setTextRise(y){this.current.textRise=y}moveText(y,f){this.current.x=this.current.lineX+=y,this.current.y=this.current.lineY+=f}setLeadingMoveText(y,f){this.setLeading(-f),this.moveText(y,f)}setTextMatrix(y,f,w,n,c,_){this.current.textMatrix=[y,f,w,n,c,_],this.current.textMatrixScale=Math.hypot(y,f),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(y,f,w,n){const c=this.ctx,_=this.current,T=_.font,R=_.textRenderingMode,B=_.fontSize/_.fontSizeScale,z=R&e.TextRenderingMode.FILL_STROKE_MASK,Y=!!(R&e.TextRenderingMode.ADD_TO_PATH_FLAG),H=_.patternFill&&!T.missingFile;let et;(T.disableFontFace||Y||H)&&(et=T.getPathGenerator(this.commonObjs,y)),T.disableFontFace||H?(c.save(),c.translate(f,w),c.beginPath(),et(c,B),n&&c.setTransform.apply(c,n),(z===e.TextRenderingMode.FILL||z===e.TextRenderingMode.FILL_STROKE)&&c.fill(),(z===e.TextRenderingMode.STROKE||z===e.TextRenderingMode.FILL_STROKE)&&c.stroke(),c.restore()):((z===e.TextRenderingMode.FILL||z===e.TextRenderingMode.FILL_STROKE)&&c.fillText(y,f,w),(z===e.TextRenderingMode.STROKE||z===e.TextRenderingMode.FILL_STROKE)&&c.strokeText(y,f,w)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:c.mozCurrentTransform,x:f,y:w,fontSize:B,addToPath:et})}get isFontSubpixelAAEnabled(){const{context:y}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);y.scale(1.5,1),y.fillText("I",0,10);const f=y.getImageData(0,0,10,10).data;let w=!1;for(let n=3;n<f.length;n+=4)if(f[n]>0&&f[n]<255){w=!0;break}return(0,e.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(y){const f=this.current,w=f.font;if(w.isType3Font)return this.showType3Text(y);const n=f.fontSize;if(n===0)return;const c=this.ctx,_=f.fontSizeScale,T=f.charSpacing,R=f.wordSpacing,B=f.fontDirection,z=f.textHScale*B,Y=y.length,H=w.vertical,et=H?1:-1,J=w.defaultVMetrics,nt=n*f.fontMatrix[0],ht=f.textRenderingMode===e.TextRenderingMode.FILL&&!w.disableFontFace&&!f.patternFill;c.save(),c.transform.apply(c,f.textMatrix),c.translate(f.x,f.y+f.textRise),B>0?c.scale(z,-1):c.scale(z,1);let _t;if(f.patternFill){c.save();const st=f.fillColor.getPattern(c,this,c.mozCurrentTransformInverse,x.PathType.FILL);_t=c.mozCurrentTransform,c.restore(),c.fillStyle=st}let vt=f.lineWidth;const Z=f.textMatrixScale;if(Z===0||vt===0){const st=f.textRenderingMode&e.TextRenderingMode.FILL_STROKE_MASK;(st===e.TextRenderingMode.STROKE||st===e.TextRenderingMode.FILL_STROKE)&&(vt=this.getSinglePixelWidth())}else vt/=Z;_!==1&&(c.scale(_,_),vt/=_),c.lineWidth=vt;let bt=0,K;for(K=0;K<Y;++K){const st=y[K];if(typeof st=="number"){bt+=et*st*n/1e3;continue}let St=!1;const Ct=(st.isSpace?R:0)+T,At=st.fontChar,kt=st.accent;let Ft,jt,xt=st.width;if(H){const It=st.vmetric||J,it=-(st.vmetric?It[1]:xt*.5)*nt,dt=It[2]*nt;xt=It?-It[0]:xt,Ft=it/_,jt=(bt+dt)/_}else Ft=bt/_,jt=0;if(w.remeasure&&xt>0){const It=c.measureText(At).width*1e3/n*_;if(xt<It&&this.isFontSubpixelAAEnabled){const it=xt/It;St=!0,c.save(),c.scale(it,1),Ft/=it}else xt!==It&&(Ft+=(xt-It)/2e3*n/_)}if(this.contentVisible&&(st.isInFont||w.missingFile)){if(ht&&!kt)c.fillText(At,Ft,jt);else if(this.paintChar(At,Ft,jt,_t),kt){const It=Ft+n*kt.offset.x/_,it=jt-n*kt.offset.y/_;this.paintChar(kt.fontChar,It,it,_t)}}let $t;H?$t=xt*nt-Ct*B:$t=xt*nt+Ct*B,bt+=$t,St&&c.restore()}H?f.y-=bt:f.x+=bt*z,c.restore(),this.compose()}showType3Text(y){const f=this.ctx,w=this.current,n=w.font,c=w.fontSize,_=w.fontDirection,T=n.vertical?1:-1,R=w.charSpacing,B=w.wordSpacing,z=w.textHScale*_,Y=w.fontMatrix||e.FONT_IDENTITY_MATRIX,H=y.length,et=w.textRenderingMode===e.TextRenderingMode.INVISIBLE;let J,nt,ht,_t;if(!(et||c===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,f.save(),f.transform.apply(f,w.textMatrix),f.translate(w.x,w.y),f.scale(z,_),J=0;J<H;++J){if(nt=y[J],typeof nt=="number"){_t=T*nt*c/1e3,this.ctx.translate(_t,0),w.x+=_t*z;continue}const vt=(nt.isSpace?B:0)+R,Z=n.charProcOperatorList[nt.operatorListId];if(!Z){(0,e.warn)(`Type3 character "${nt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=nt,this.save(),f.scale(c,c),f.transform.apply(f,Y),this.executeOperatorList(Z),this.restore()),ht=e.Util.applyTransform([nt.width,0],Y)[0]*c+vt,f.translate(ht,0),w.x+=ht*z}f.restore(),this.processingType3=null}}setCharWidth(y,f){}setCharWidthAndBounds(y,f,w,n,c,_){this.ctx.rect(w,n,c-w,_-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(y){let f;if(y[0]==="TilingPattern"){const w=y[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),c={createCanvasGraphics:_=>new ut(_,this.commonObjs,this.objs,this.canvasFactory)};f=new x.TilingPattern(y,w,this.ctx,c,n)}else f=this._getPattern(y[1],y[2]);return f}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(y,f,w){var c;const n=((c=this.selectColor)==null?void 0:c.call(this,y,f,w))||e.Util.makeHexColor(y,f,w);this.ctx.strokeStyle=n,this.current.strokeColor=n}setFillRGBColor(y,f,w){var c;const n=((c=this.selectColor)==null?void 0:c.call(this,y,f,w))||e.Util.makeHexColor(y,f,w);this.ctx.fillStyle=n,this.current.fillColor=n,this.current.patternFill=!1}_getPattern(y,f=null){let w;return this.cachedPatterns.has(y)?w=this.cachedPatterns.get(y):(w=(0,x.getShadingPattern)(this.objs.get(y)),this.cachedPatterns.set(y,w)),f&&(w.matrix=f),w}shadingFill(y){if(!this.contentVisible)return;const f=this.ctx;this.save();const w=this._getPattern(y);f.fillStyle=w.getPattern(f,this,f.mozCurrentTransformInverse,x.PathType.SHADING);const n=f.mozCurrentTransformInverse;if(n){const c=f.canvas,_=c.width,T=c.height,R=e.Util.applyTransform([0,0],n),B=e.Util.applyTransform([0,T],n),z=e.Util.applyTransform([_,0],n),Y=e.Util.applyTransform([_,T],n),H=Math.min(R[0],B[0],z[0],Y[0]),et=Math.min(R[1],B[1],z[1],Y[1]),J=Math.max(R[0],B[0],z[0],Y[0]),nt=Math.max(R[1],B[1],z[1],Y[1]);this.ctx.fillRect(H,et,J-H,nt-et)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,e.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,e.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(y,f){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(y)&&y.length===6&&this.transform.apply(this,y),this.baseTransform=this.ctx.mozCurrentTransform,f)){const w=f[2]-f[0],n=f[3]-f[1];this.ctx.rect(f[0],f[1],w,n),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,f),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(y){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const f=this.ctx;y.isolated||(0,e.info)("TODO: Support non-isolated groups."),y.knockout&&(0,e.warn)("Knockout groups not supported.");const w=f.mozCurrentTransform;if(y.matrix&&f.transform.apply(f,y.matrix),!y.bbox)throw new Error("Bounding box is required.");let n=e.Util.getAxialAlignedBoundingBox(y.bbox,f.mozCurrentTransform);const c=[0,0,f.canvas.width,f.canvas.height];n=e.Util.intersect(n,c)||[0,0,0,0];const _=Math.floor(n[0]),T=Math.floor(n[1]);let R=Math.max(Math.ceil(n[2])-_,1),B=Math.max(Math.ceil(n[3])-T,1),z=1,Y=1;R>g&&(z=R/g,R=g),B>g&&(Y=B/g,B=g),this.current.startNewPathAndClipBox([0,0,R,B]);let H="groupAt"+this.groupLevel;y.smask&&(H+="_smask_"+this.smaskCounter++%2);const et=this.cachedCanvases.getCanvas(H,R,B,!0),J=et.context;J.scale(1/z,1/Y),J.translate(-_,-T),J.transform.apply(J,w),y.smask?this.smaskStack.push({canvas:et.canvas,context:J,offsetX:_,offsetY:T,scaleX:z,scaleY:Y,subtype:y.smask.subtype,backdrop:y.smask.backdrop,transferMap:y.smask.transferMap||null,startTransformInverse:null}):(f.setTransform(1,0,0,1,0,0),f.translate(_,T),f.scale(z,Y),f.save()),D(f,J),this.ctx=J,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(f),this.groupLevel++}endGroup(y){if(!this.contentVisible)return;this.groupLevel--;const f=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,y.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,n);const c=e.Util.getAxialAlignedBoundingBox([0,0,f.canvas.width,f.canvas.height],n);this.ctx.drawImage(f.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(y,f,w,n,c){if(ct(this,lt,de).call(this),I(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform),Array.isArray(f)&&f.length===4){const _=f[2]-f[0],T=f[3]-f[1];if(c&&this.annotationCanvasMap){w=w.slice(),w[4]-=f[0],w[5]-=f[1],f=f.slice(),f[0]=f[1]=0,f[2]=_,f[3]=T;const[R,B]=e.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:z}=this,Y=Math.ceil(_*this.outputScaleX*z),H=Math.ceil(T*this.outputScaleY*z);this.annotationCanvas=this.canvasFactory.create(Y,H);const{canvas:et,context:J}=this.annotationCanvas;this.annotationCanvasMap.set(y,et),this.annotationCanvas.savedCtx=this.ctx,this.ctx=J,l(this.ctx),this.ctx.setTransform(R,0,0,-B,0,T*B),I(this.ctx,this.foregroundColor)}else I(this.ctx,this.foregroundColor),this.ctx.rect(f[0],f[1],_,T),this.ctx.clip(),this.endPath()}this.current=new a(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,w),this.transform.apply(this,n)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(y){if(!this.contentVisible)return;const f=y.count;y=this.getObject(y.data,y),y.count=f;const w=this.ctx,n=this.processingType3;if(n&&(n.compiled===void 0&&(n.compiled=v(y)),n.compiled)){n.compiled(w);return}const c=this._createMaskCanvas(y),_=c.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(_,c.offsetX,c.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(y,f,w=0,n=0,c,_){if(!this.contentVisible)return;y=this.getObject(y.data,y);const T=this.ctx;T.save();const R=T.mozCurrentTransform;T.transform(f,w,n,c,0,0);const B=this._createMaskCanvas(y);T.setTransform(1,0,0,1,0,0);for(let z=0,Y=_.length;z<Y;z+=2){const H=e.Util.transform(R,[f,w,n,c,_[z],_[z+1]]),[et,J]=e.Util.applyTransform([0,0],H);T.drawImage(B.canvas,et,J)}T.restore(),this.compose()}paintImageMaskXObjectGroup(y){if(!this.contentVisible)return;const f=this.ctx,w=this.current.fillColor,n=this.current.patternFill;for(const c of y){const{data:_,width:T,height:R,transform:B}=c,z=this.cachedCanvases.getCanvas("maskCanvas",T,R,!1),Y=z.context;Y.save();const H=this.getObject(_,c);C(Y,H),Y.globalCompositeOperation="source-in",Y.fillStyle=n?w.getPattern(Y,this,f.mozCurrentTransformInverse,x.PathType.FILL):w,Y.fillRect(0,0,T,R),Y.restore(),f.save(),f.transform.apply(f,B),f.scale(1,-1),P(f,z.canvas,0,0,T,R,0,-1,1,1),f.restore()}this.compose()}paintImageXObject(y){if(!this.contentVisible)return;const f=this.getObject(y);if(!f){(0,e.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(f)}paintImageXObjectRepeat(y,f,w,n){if(!this.contentVisible)return;const c=this.getObject(y);if(!c){(0,e.warn)("Dependent image isn't ready yet");return}const _=c.width,T=c.height,R=[];for(let B=0,z=n.length;B<z;B+=2)R.push({transform:[f,0,0,w,n[B],n[B+1]],x:0,y:0,w:_,h:T});this.paintInlineImageXObjectGroup(c,R)}paintInlineImageXObject(y){if(!this.contentVisible)return;const f=y.width,w=y.height,n=this.ctx;this.save(),n.scale(1/f,-1/w);let c;if(typeof HTMLElement=="function"&&y instanceof HTMLElement||!y.data)c=y;else{const B=this.cachedCanvases.getCanvas("inlineImage",f,w,!1),z=B.context;h(z,y,this.current.transferMaps),c=B.canvas}const _=this._scaleImage(c,n.mozCurrentTransformInverse);n.imageSmoothingEnabled=G(n.mozCurrentTransform,y.interpolate);const[T,R]=P(n,_.img,0,0,_.paintWidth,_.paintHeight,0,-w,f,w);if(this.imageLayer){const B=this.getCanvasPosition(0,-w);this.imageLayer.appendImage({imgData:y,left:B[0],top:B[1],width:T,height:R})}this.compose(),this.restore()}paintInlineImageXObjectGroup(y,f){if(!this.contentVisible)return;const w=this.ctx,n=y.width,c=y.height,_=this.cachedCanvases.getCanvas("inlineImage",n,c,!1),T=_.context;h(T,y,this.current.transferMaps);for(let R=0,B=f.length;R<B;R++){const z=f[R];if(w.save(),w.transform.apply(w,z.transform),w.scale(1,-1),P(w,_.canvas,z.x,z.y,z.w,z.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(z.x,z.y);this.imageLayer.appendImage({imgData:y,left:Y[0],top:Y[1],width:n,height:c})}w.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(y){}markPointProps(y,f){}beginMarkedContent(y){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(y,f){y==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(f)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(y){const f=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(y);const w=this.ctx;this.pendingClip&&(f||(this.pendingClip===rt?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const y=this.ctx.mozCurrentTransform;if(y[1]===0&&y[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(y[0]),Math.abs(y[3]));else{const f=Math.abs(y[0]*y[3]-y[2]*y[1]),w=Math.hypot(y[0],y[2]),n=Math.hypot(y[1],y[3]);this._cachedGetSinglePixelWidth=Math.max(w,n)/f}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:y}=this.current,f=this.ctx.mozCurrentTransform;let w,n;if(f[1]===0&&f[2]===0){const c=Math.abs(f[0]),_=Math.abs(f[3]);if(y===0)w=1/c,n=1/_;else{const T=c*y,R=_*y;w=T<1?1/T:1,n=R<1?1/R:1}}else{const c=Math.abs(f[0]*f[3]-f[2]*f[1]),_=Math.hypot(f[0],f[1]),T=Math.hypot(f[2],f[3]);if(y===0)w=T/c,n=_/c;else{const R=y*c;w=T>R?T/R:1,n=_>R?_/R:1}}this._cachedScaleForStroking=[w,n]}return this._cachedScaleForStroking}rescaleAndStroke(y){const{ctx:f}=this,{lineWidth:w}=this.current,[n,c]=this.getScaleForStroking();if(f.lineWidth=w||1,n===1&&c===1){f.stroke();return}let _,T,R;y&&(_=f.mozCurrentTransform.slice(),T=f.getLineDash().slice(),R=f.lineDashOffset),f.scale(n,c);const B=Math.max(n,c);f.setLineDash(f.getLineDash().map(z=>z/B)),f.lineDashOffset/=B,f.stroke(),y&&(f.setTransform(..._),f.setLineDash(T),f.lineDashOffset=R)}getCanvasPosition(y,f){const w=this.ctx.mozCurrentTransform;return[w[0]*y+w[2]*f+w[4],w[1]*y+w[3]*f+w[5]]}isContentVisible(){for(let y=this.markedContentStack.length-1;y>=0;y--)if(!this.markedContentStack[y].visible)return!1;return!0}};let at=ut;lt=new WeakSet,de=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},t.CanvasGraphics=at;for(const j in e.OPS)at.prototype[j]!==void 0&&(at.prototype[e.OPS[j]]=at.prototype[j])},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=k;var e=i(1),u=i(3);const x={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=x;function p(r,l){if(!l||u.isNodeJS)return;const F=l[2]-l[0],P=l[3]-l[1],v=new Path2D;v.rect(l[0],l[1],F,P),r.clip(v)}class S{constructor(){this.constructor===S&&(0,e.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,e.unreachable)("Abstract method `getPattern` called.")}}class d extends S{constructor(l){super(),this._type=l[1],this._bbox=l[2],this._colorStops=l[3],this._p0=l[4],this._p1=l[5],this._r0=l[6],this._r1=l[7],this.matrix=null}_createGradient(l){let F;this._type==="axial"?F=l.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(F=l.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const P of this._colorStops)F.addColorStop(P[0],P[1]);return F}getPattern(l,F,P,v){let a;if(v===x.STROKE||v===x.FILL){const h=F.current.getClippedPathBoundingBox(v,l.mozCurrentTransform)||[0,0,0,0],C=Math.ceil(h[2]-h[0])||1,D=Math.ceil(h[3]-h[1])||1,I=F.cachedCanvases.getCanvas("pattern",C,D,!0),L=I.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-h[0],-h[1]),P=e.Util.transform(P,[1,0,0,1,h[0],h[1]]),L.transform.apply(L,F.baseTransform),this.matrix&&L.transform.apply(L,this.matrix),p(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),a=l.createPattern(I.canvas,"no-repeat");const W=new DOMMatrix(P);try{a.setTransform(W)}catch(tt){(0,e.warn)(`RadialAxialShadingPattern.getPattern: "${tt==null?void 0:tt.message}".`)}}else p(l,this._bbox),a=this._createGradient(l);return a}}function o(r,l,F,P,v,a,h,C){const D=l.coords,I=l.colors,L=r.data,W=r.width*4;let tt;D[F+1]>D[P+1]&&(tt=F,F=P,P=tt,tt=a,a=h,h=tt),D[P+1]>D[v+1]&&(tt=P,P=v,v=tt,tt=h,h=C,C=tt),D[F+1]>D[P+1]&&(tt=F,F=P,P=tt,tt=a,a=h,h=tt);const $=(D[F]+l.offsetX)*l.scaleX,N=(D[F+1]+l.offsetY)*l.scaleY,G=(D[P]+l.offsetX)*l.scaleX,M=(D[P+1]+l.offsetY)*l.scaleY,q=(D[v]+l.offsetX)*l.scaleX,U=(D[v+1]+l.offsetY)*l.scaleY;if(N>=U)return;const rt=I[a],at=I[a+1],lt=I[a+2],mt=I[h],ut=I[h+1],j=I[h+2],y=I[C],f=I[C+1],w=I[C+2],n=Math.round(N),c=Math.round(U);let _,T,R,B,z,Y,H,et;for(let J=n;J<=c;J++){if(J<M){let Z;J<N?Z=0:Z=(N-J)/(N-M),_=$-($-G)*Z,T=rt-(rt-mt)*Z,R=at-(at-ut)*Z,B=lt-(lt-j)*Z}else{let Z;J>U?Z=1:M===U?Z=0:Z=(M-J)/(M-U),_=G-(G-q)*Z,T=mt-(mt-y)*Z,R=ut-(ut-f)*Z,B=j-(j-w)*Z}let nt;J<N?nt=0:J>U?nt=1:nt=(N-J)/(N-U),z=$-($-q)*nt,Y=rt-(rt-y)*nt,H=at-(at-f)*nt,et=lt-(lt-w)*nt;const ht=Math.round(Math.min(_,z)),_t=Math.round(Math.max(_,z));let vt=W*J+ht*4;for(let Z=ht;Z<=_t;Z++)nt=(_-Z)/(_-z),nt<0?nt=0:nt>1&&(nt=1),L[vt++]=T-(T-Y)*nt|0,L[vt++]=R-(R-H)*nt|0,L[vt++]=B-(B-et)*nt|0,L[vt++]=255}}function g(r,l,F){const P=l.coords,v=l.colors;let a,h;switch(l.type){case"lattice":const C=l.verticesPerRow,D=Math.floor(P.length/C)-1,I=C-1;for(a=0;a<D;a++){let L=a*C;for(let W=0;W<I;W++,L++)o(r,F,P[L],P[L+1],P[L+C],v[L],v[L+1],v[L+C]),o(r,F,P[L+C+1],P[L+1],P[L+C],v[L+C+1],v[L+1],v[L+C])}break;case"triangles":for(a=0,h=P.length;a<h;a+=3)o(r,F,P[a],P[a+1],P[a+2],v[a],v[a+1],v[a+2]);break;default:throw new Error("illegal figure")}}class E extends S{constructor(l){super(),this._coords=l[2],this._colors=l[3],this._figures=l[4],this._bounds=l[5],this._bbox=l[7],this._background=l[8],this.matrix=null}_createMeshCanvas(l,F,P){const C=Math.floor(this._bounds[0]),D=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-C,L=Math.ceil(this._bounds[3])-D,W=Math.min(Math.ceil(Math.abs(I*l[0]*1.1)),3e3),tt=Math.min(Math.ceil(Math.abs(L*l[1]*1.1)),3e3),$=I/W,N=L/tt,G={coords:this._coords,colors:this._colors,offsetX:-C,offsetY:-D,scaleX:1/$,scaleY:1/N},M=W+2*2,q=tt+2*2,U=P.getCanvas("mesh",M,q,!1),rt=U.context,at=rt.createImageData(W,tt);if(F){const mt=at.data;for(let ut=0,j=mt.length;ut<j;ut+=4)mt[ut]=F[0],mt[ut+1]=F[1],mt[ut+2]=F[2],mt[ut+3]=255}for(const mt of this._figures)g(at,mt,G);return rt.putImageData(at,2,2),{canvas:U.canvas,offsetX:C-2*$,offsetY:D-2*N,scaleX:$,scaleY:N}}getPattern(l,F,P,v){p(l,this._bbox);let a;if(v===x.SHADING)a=e.Util.singularValueDecompose2dScale(l.mozCurrentTransform);else if(a=e.Util.singularValueDecompose2dScale(F.baseTransform),this.matrix){const C=e.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*C[0],a[1]*C[1]]}const h=this._createMeshCanvas(a,v===x.SHADING?null:this._background,F.cachedCanvases);return v!==x.SHADING&&(l.setTransform.apply(l,F.baseTransform),this.matrix&&l.transform.apply(l,this.matrix)),l.translate(h.offsetX,h.offsetY),l.scale(h.scaleX,h.scaleY),l.createPattern(h.canvas,"no-repeat")}}class A extends S{getPattern(){return"hotpink"}}function k(r){switch(r[0]){case"RadialAxial":return new d(r);case"Mesh":return new E(r);case"Dummy":return new A}throw new Error(`Unknown IR type: ${r[0]}`)}const m={COLORED:1,UNCOLORED:2};class s{static get MAX_PATTERN_SIZE(){return(0,e.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(l,F,P,v,a){this.operatorList=l[2],this.matrix=l[3]||[1,0,0,1,0,0],this.bbox=l[4],this.xstep=l[5],this.ystep=l[6],this.paintType=l[7],this.tilingType=l[8],this.color=F,this.ctx=P,this.canvasGraphicsFactory=v,this.baseTransform=a}createPatternCanvas(l){const F=this.operatorList,P=this.bbox,v=this.xstep,a=this.ystep,h=this.paintType,C=this.tilingType,D=this.color,I=this.canvasGraphicsFactory;(0,e.info)("TilingType: "+C);const L=P[0],W=P[1],tt=P[2],$=P[3],N=e.Util.singularValueDecompose2dScale(this.matrix),G=e.Util.singularValueDecompose2dScale(this.baseTransform),M=[N[0]*G[0],N[1]*G[1]],q=this.getSizeAndScale(v,this.ctx.canvas.width,M[0]),U=this.getSizeAndScale(a,this.ctx.canvas.height,M[1]),rt=l.cachedCanvases.getCanvas("pattern",q.size,U.size,!0),at=rt.context,lt=I.createCanvasGraphics(at);lt.groupLevel=l.groupLevel,this.setFillAndStrokeStyleToContext(lt,h,D);let mt=L,ut=W,j=tt,y=$;return L<0&&(mt=0,j+=Math.abs(L)),W<0&&(ut=0,y+=Math.abs(W)),at.translate(-(q.scale*mt),-(U.scale*ut)),lt.transform(q.scale,0,0,U.scale,0,0),at.save(),this.clipBbox(lt,mt,ut,j,y),lt.baseTransform=lt.ctx.mozCurrentTransform.slice(),lt.executeOperatorList(F),lt.endDrawing(),{canvas:rt.canvas,scaleX:q.scale,scaleY:U.scale,offsetX:mt,offsetY:ut}}getSizeAndScale(l,F,P){l=Math.abs(l);const v=Math.max(s.MAX_PATTERN_SIZE,F);let a=Math.ceil(l*P);return a>=v?a=v:P=a/l,{scale:P,size:a}}clipBbox(l,F,P,v,a){const h=v-F,C=a-P;l.ctx.rect(F,P,h,C),l.current.updateRectMinMax(l.ctx.mozCurrentTransform,[F,P,v,a]),l.clip(),l.endPath()}setFillAndStrokeStyleToContext(l,F,P){const v=l.ctx,a=l.current;switch(F){case m.COLORED:const h=this.ctx;v.fillStyle=h.fillStyle,v.strokeStyle=h.strokeStyle,a.fillColor=h.fillStyle,a.strokeColor=h.strokeStyle;break;case m.UNCOLORED:const C=e.Util.makeHexColor(P[0],P[1],P[2]);v.fillStyle=C,v.strokeStyle=C,a.fillColor=C,a.strokeColor=C;break;default:throw new e.FormatError(`Unsupported paint type: ${F}`)}}getPattern(l,F,P,v){let a=P;v!==x.SHADING&&(a=e.Util.transform(a,F.baseTransform),this.matrix&&(a=e.Util.transform(a,this.matrix)));const h=this.createPatternCanvas(F);let C=new DOMMatrix(a);C=C.translate(h.offsetX,h.offsetY),C=C.scale(1/h.scaleX,1/h.scaleY);const D=l.createPattern(h.canvas,"repeat");try{D.setTransform(C)}catch(I){(0,e.warn)(`TilingPattern.getPattern: "${I==null?void 0:I.message}".`)}return D}}t.TilingPattern=s},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=u;var e=i(1);function u({src:x,srcPos:p=0,dest:S,destPos:d=0,width:o,height:g,inverseDecode:E=!1}){const A=e.FeatureTest.isLittleEndian?4278190080:255,[k,m]=E?[0,A]:[A,0],s=o>>3,r=o&7,l=x.length;S=new Uint32Array(S.buffer);for(let F=0;F<g;F++){for(const v=p+s;p<v;p++){const a=p<l?x[p]:255;S[d++]=a&128?m:k,S[d++]=a&64?m:k,S[d++]=a&32?m:k,S[d++]=a&16?m:k,S[d++]=a&8?m:k,S[d++]=a&4?m:k,S[d++]=a&2?m:k,S[d++]=a&1?m:k}if(r===0)continue;const P=p<l?x[p++]:255;for(let v=0;v<r;v++)S[d++]=P&1<<7-v?m:k}return{srcPos:p,destPos:d}}},(b,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i,i.workerPort=i.workerPort===void 0?null:i.workerPort,i.workerSrc=i.workerSrc===void 0?"":i.workerSrc},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var e=i(1);const u={UNKNOWN:0,DATA:1,ERROR:2},x={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function p(d){switch(d instanceof Error||typeof d=="object"&&d!==null||(0,e.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),d.name){case"AbortException":return new e.AbortException(d.message);case"MissingPDFException":return new e.MissingPDFException(d.message);case"PasswordException":return new e.PasswordException(d.message,d.code);case"UnexpectedResponseException":return new e.UnexpectedResponseException(d.message,d.status);case"UnknownErrorException":return new e.UnknownErrorException(d.message,d.details);default:return new e.UnknownErrorException(d.message,d.toString())}}class S{constructor(o,g,E){this.sourceName=o,this.targetName=g,this.comObj=E,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=A=>{const k=A.data;if(k.targetName!==this.sourceName)return;if(k.stream){this._processStreamMessage(k);return}if(k.callback){const s=k.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],k.callback===u.DATA)r.resolve(k.data);else if(k.callback===u.ERROR)r.reject(p(k.reason));else throw new Error("Unexpected callback case");return}const m=this.actionHandler[k.action];if(!m)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const s=this.sourceName,r=k.sourceName;new Promise(function(l){l(m(k.data))}).then(function(l){E.postMessage({sourceName:s,targetName:r,callback:u.DATA,callbackId:k.callbackId,data:l})},function(l){E.postMessage({sourceName:s,targetName:r,callback:u.ERROR,callbackId:k.callbackId,reason:p(l)})});return}if(k.streamId){this._createStreamSink(k);return}m(k.data)},E.addEventListener("message",this._onComObjOnMessage)}on(o,g){const E=this.actionHandler;if(E[o])throw new Error(`There is already an actionName called "${o}"`);E[o]=g}send(o,g,E){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,data:g},E)}sendWithPromise(o,g,E){const A=this.callbackId++,k=(0,e.createPromiseCapability)();this.callbackCapabilities[A]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:o,callbackId:A,data:g},E)}catch(m){k.reject(m)}return k.promise}sendWithStream(o,g,E,A){const k=this.streamId++,m=this.sourceName,s=this.targetName,r=this.comObj;return new ReadableStream({start:l=>{const F=(0,e.createPromiseCapability)();return this.streamControllers[k]={controller:l,startCall:F,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:m,targetName:s,action:o,streamId:k,data:g,desiredSize:l.desiredSize},A),F.promise},pull:l=>{const F=(0,e.createPromiseCapability)();return this.streamControllers[k].pullCall=F,r.postMessage({sourceName:m,targetName:s,stream:x.PULL,streamId:k,desiredSize:l.desiredSize}),F.promise},cancel:l=>{(0,e.assert)(l instanceof Error,"cancel must have a valid reason");const F=(0,e.createPromiseCapability)();return this.streamControllers[k].cancelCall=F,this.streamControllers[k].isClosed=!0,r.postMessage({sourceName:m,targetName:s,stream:x.CANCEL,streamId:k,reason:p(l)}),F.promise}},E)}_createStreamSink(o){const g=o.streamId,E=this.sourceName,A=o.sourceName,k=this.comObj,m=this,s=this.actionHandler[o.action],r={enqueue(l,F=1,P){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=F,v>0&&this.desiredSize<=0&&(this.sinkCapability=(0,e.createPromiseCapability)(),this.ready=this.sinkCapability.promise),k.postMessage({sourceName:E,targetName:A,stream:x.ENQUEUE,streamId:g,chunk:l},P)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:E,targetName:A,stream:x.CLOSE,streamId:g}),delete m.streamSinks[g])},error(l){(0,e.assert)(l instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:E,targetName:A,stream:x.ERROR,streamId:g,reason:p(l)}))},sinkCapability:(0,e.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:o.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[g]=r,new Promise(function(l){l(s(o.data,r))}).then(function(){k.postMessage({sourceName:E,targetName:A,stream:x.START_COMPLETE,streamId:g,success:!0})},function(l){k.postMessage({sourceName:E,targetName:A,stream:x.START_COMPLETE,streamId:g,reason:p(l)})})}_processStreamMessage(o){const g=o.streamId,E=this.sourceName,A=o.sourceName,k=this.comObj,m=this.streamControllers[g],s=this.streamSinks[g];switch(o.stream){case x.START_COMPLETE:o.success?m.startCall.resolve():m.startCall.reject(p(o.reason));break;case x.PULL_COMPLETE:o.success?m.pullCall.resolve():m.pullCall.reject(p(o.reason));break;case x.PULL:if(!s){k.postMessage({sourceName:E,targetName:A,stream:x.PULL_COMPLETE,streamId:g,success:!0});break}s.desiredSize<=0&&o.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=o.desiredSize,new Promise(function(r){r(s.onPull&&s.onPull())}).then(function(){k.postMessage({sourceName:E,targetName:A,stream:x.PULL_COMPLETE,streamId:g,success:!0})},function(r){k.postMessage({sourceName:E,targetName:A,stream:x.PULL_COMPLETE,streamId:g,reason:p(r)})});break;case x.ENQUEUE:if((0,e.assert)(m,"enqueue should have stream controller"),m.isClosed)break;m.controller.enqueue(o.chunk);break;case x.CLOSE:if((0,e.assert)(m,"close should have stream controller"),m.isClosed)break;m.isClosed=!0,m.controller.close(),this._deleteStreamController(m,g);break;case x.ERROR:(0,e.assert)(m,"error should have stream controller"),m.controller.error(p(o.reason)),this._deleteStreamController(m,g);break;case x.CANCEL_COMPLETE:o.success?m.cancelCall.resolve():m.cancelCall.reject(p(o.reason)),this._deleteStreamController(m,g);break;case x.CANCEL:if(!s)break;new Promise(function(r){r(s.onCancel&&s.onCancel(p(o.reason)))}).then(function(){k.postMessage({sourceName:E,targetName:A,stream:x.CANCEL_COMPLETE,streamId:g,success:!0})},function(r){k.postMessage({sourceName:E,targetName:A,stream:x.CANCEL_COMPLETE,streamId:g,reason:p(r)})}),s.sinkCapability.reject(p(o.reason)),s.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(o,g){await Promise.allSettled([o.startCall&&o.startCall.promise,o.pullCall&&o.pullCall.promise,o.cancelCall&&o.cancelCall.promise]),delete this.streamControllers[g]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=S},(b,t,i)=>{var x,p;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var e=i(1);class u{constructor({parsedData:d,rawData:o}){ot(this,x,void 0);ot(this,p,void 0);pt(this,x,d),pt(this,p,o)}getRaw(){return O(this,p)}get(d){var o;return(o=O(this,x).get(d))!=null?o:null}getAll(){return(0,e.objectFromMap)(O(this,x))}has(d){return O(this,x).has(d)}}x=new WeakMap,p=new WeakMap,t.Metadata=u},(b,t,i)=>{var S,d,o,g,E,A,ue;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var e=i(1);const u=Symbol("INTERNAL");class x{constructor(s,r){ot(this,S,!0);this.name=s,this.intent=r}get visible(){return O(this,S)}_setVisible(s,r){s!==u&&(0,e.unreachable)("Internal method `_setVisible` called."),pt(this,S,r)}}S=new WeakMap;class p{constructor(s){ot(this,A);ot(this,d,!0);ot(this,o,new Map);ot(this,g,null);ot(this,E,null);if(this.name=null,this.creator=null,s!==null){this.name=s.name,this.creator=s.creator,pt(this,E,s.order);for(const r of s.groups)O(this,o).set(r.id,new x(r.name,r.intent));if(s.baseState==="OFF")for(const r of O(this,o).values())r._setVisible(u,!1);for(const r of s.on)O(this,o).get(r)._setVisible(u,!0);for(const r of s.off)O(this,o).get(r)._setVisible(u,!1);pt(this,g,new Map);for(const[r,l]of O(this,o))O(this,g).set(r,l.visible)}}isVisible(s){if(O(this,o).size===0)return!0;if(!s)return(0,e.warn)("Optional content group not defined."),!0;if(s.type==="OCG")return O(this,o).has(s.id)?O(this,o).get(s.id).visible:((0,e.warn)(`Optional content group not found: ${s.id}`),!0);if(s.type==="OCMD"){if(s.expression)return ct(this,A,ue).call(this,s.expression);if(!s.policy||s.policy==="AnyOn"){for(const r of s.ids){if(!O(this,o).has(r))return(0,e.warn)(`Optional content group not found: ${r}`),!0;if(O(this,o).get(r).visible)return!0}return!1}else if(s.policy==="AllOn"){for(const r of s.ids){if(!O(this,o).has(r))return(0,e.warn)(`Optional content group not found: ${r}`),!0;if(!O(this,o).get(r).visible)return!1}return!0}else if(s.policy==="AnyOff"){for(const r of s.ids){if(!O(this,o).has(r))return(0,e.warn)(`Optional content group not found: ${r}`),!0;if(!O(this,o).get(r).visible)return!0}return!1}else if(s.policy==="AllOff"){for(const r of s.ids){if(!O(this,o).has(r))return(0,e.warn)(`Optional content group not found: ${r}`),!0;if(O(this,o).get(r).visible)return!1}return!0}return(0,e.warn)(`Unknown optional content policy ${s.policy}.`),!0}return(0,e.warn)(`Unknown group type ${s.type}.`),!0}setVisibility(s,r=!0){if(!O(this,o).has(s)){(0,e.warn)(`Optional content group not found: ${s}`);return}O(this,o).get(s)._setVisible(u,!!r),pt(this,d,null)}get hasInitialVisibility(){if(O(this,d)!==null)return O(this,d);for(const[s,r]of O(this,o)){const l=O(this,g).get(s);if(r.visible!==l)return pt(this,d,!1)}return pt(this,d,!0)}getOrder(){return O(this,o).size?O(this,E)?O(this,E).slice():[...O(this,o).keys()]:null}getGroups(){return O(this,o).size>0?(0,e.objectFromMap)(O(this,o)):null}getGroup(s){return O(this,o).get(s)||null}}d=new WeakMap,o=new WeakMap,g=new WeakMap,E=new WeakMap,A=new WeakSet,ue=function(s){const r=s.length;if(r<2)return!0;const l=s[0];for(let F=1;F<r;F++){const P=s[F];let v;if(Array.isArray(P))v=ct(this,A,ue).call(this,P);else if(O(this,o).has(P))v=O(this,o).get(P).visible;else return(0,e.warn)(`Optional content group not found: ${P}`),!0;switch(l){case"And":if(!v)return!1;break;case"Or":if(v)return!0;break;case"Not":return!v;default:return!0}}return l==="And"},t.OptionalContentConfig=p},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var e=i(1),u=i(4);class x{constructor(o,g){(0,e.assert)(g,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=o.progressiveDone||!1,this._contentDispositionFilename=o.contentDispositionFilename||null;const E=o.initialData;if((E==null?void 0:E.length)>0){const A=new Uint8Array(E).buffer;this._queuedChunks.push(A)}this._pdfDataRangeTransport=g,this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._contentLength=o.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((A,k)=>{this._onReceiveData({begin:A,chunk:k})}),this._pdfDataRangeTransport.addProgressListener((A,k)=>{this._onProgress({loaded:A,total:k})}),this._pdfDataRangeTransport.addProgressiveReadListener(A=>{this._onReceiveData({chunk:A})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(o){const g=new Uint8Array(o.chunk).buffer;if(o.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(g):this._queuedChunks.push(g);else{const E=this._rangeReaders.some(function(A){return A._begin!==o.begin?!1:(A._enqueue(g),!0)});(0,e.assert)(E,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var o,g;return(g=(o=this._fullRequestReader)==null?void 0:o._loaded)!=null?g:0}_onProgress(o){if(o.total===void 0){const g=this._rangeReaders[0];g!=null&&g.onProgress&&g.onProgress({loaded:o.loaded})}else{const g=this._fullRequestReader;g!=null&&g.onProgress&&g.onProgress({loaded:o.loaded,total:o.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(o){const g=this._rangeReaders.indexOf(o);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,e.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const o=this._queuedChunks;return this._queuedChunks=null,new p(this,o,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(o,g){if(g<=this._progressiveDataLength)return null;const E=new S(this,o,g);return this._pdfDataRangeTransport.requestDataRange(o,g),this._rangeReaders.push(E),E}cancelAllRequests(o){this._fullRequestReader&&this._fullRequestReader.cancel(o);for(const g of this._rangeReaders.slice(0))g.cancel(o);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=x;class p{constructor(o,g,E=!1,A=null){this._stream=o,this._done=E||!1,this._filename=(0,u.isPdfFile)(A)?A:null,this._queuedChunks=g||[],this._loaded=0;for(const k of this._queuedChunks)this._loaded+=k.byteLength;this._requests=[],this._headersReady=Promise.resolve(),o._fullRequestReader=this,this.onProgress=null}_enqueue(o){this._done||(this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunks.push(o),this._loaded+=o.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const o=(0,e.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class S{constructor(o,g,E){this._stream=o,this._begin=g,this._end=E,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(o){if(!this._done){if(this._requests.length===0)this._queuedChunk=o;else{this._requests.shift().resolve({value:o,done:!1});for(const E of this._requests)E.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const o=(0,e.createPromiseCapability)();return this._requests.push(o),o.promise}cancel(o){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(b,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class i{static textContent(u){const x=[],p={items:x,styles:Object.create(null)};function S(d){var E;if(!d)return;let o=null;const g=d.name;if(g==="#text")o=d.value;else if(i.shouldBuildText(g))(E=d==null?void 0:d.attributes)!=null&&E.textContent?o=d.attributes.textContent:d.value&&(o=d.value);else return;if(o!==null&&x.push({str:o}),!!d.children)for(const A of d.children)S(A)}return S(u),p}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}t.XfaText=i},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var e=i(5);const u=function(d){return new Promise((o,g)=>{require$$5.readFile(d,(A,k)=>{if(A||!k){g(new Error(A));return}o(new Uint8Array(k))})})};class x extends e.BaseCanvasFactory{_createCanvas(o,g){return require$$5.createCanvas(o,g)}}t.NodeCanvasFactory=x;class p extends e.BaseCMapReaderFactory{_fetchData(o,g){return u(o).then(E=>({cMapData:E,compressionType:g}))}}t.NodeCMapReaderFactory=p;class S extends e.BaseStandardFontDataFactory{_fetchData(o){return u(o)}}t.NodeStandardFontDataFactory=S},(b,t,i)=>{var o,g,E,A,k,m,s,r,l,F,fe,v,pe,h,ee,D,Re,L,me,tt,Fe;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var e=i(1),u=i(9),x=i(4),p=i(23),S=i(24);const N=class{constructor(M){ot(this,F);ot(this,v);ot(this,D);ot(this,L);ot(this,tt);ot(this,o,!1);ot(this,g,this.pointerup.bind(this));ot(this,E,this.pointerdown.bind(this));ot(this,A,new Map);ot(this,k,!1);ot(this,m,new WeakMap);ot(this,s,new Map);ot(this,r,void 0);ot(this,l,new Set);N._initialized||(N._initialized=!0,p.FreeTextEditor.initialize(M.l10n),S.InkEditor.initialize(M.l10n),M.uiManager.registerEditorTypes([p.FreeTextEditor,S.InkEditor])),pt(this,r,M.uiManager),this.annotationStorage=M.annotationStorage,this.pageIndex=M.pageIndex,this.div=M.div,O(this,r).addLayer(this)}get textLayerElements(){const M=this.div.parentNode.getElementsByClassName("textLayer").item(0);if(!M)return(0,e.shadow)(this,"textLayerElements",null);let q=O(this,m).get(M);return q||(q=M.querySelectorAll('span[role="presentation"]'),q.length===0?(0,e.shadow)(this,"textLayerElements",null):(q=Array.from(q),q.sort(ct(N,h,ee)),O(this,m).set(M,q),q))}updateToolbar(M){O(this,r).updateToolbar(M)}updateMode(M=O(this,r).getMode()){ct(this,tt,Fe).call(this),M===e.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),O(this,r).unselectAll()}addInkEditorIfNeeded(M){if(!M&&O(this,r).getMode()!==e.AnnotationEditorType.INK)return;if(!M){for(const U of O(this,A).values())if(U.isEmpty()){U.setInBackground();return}}ct(this,L,me).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(M){O(this,r).setEditingState(M)}addCommands(M){O(this,r).addCommands(M)}enable(){this.div.style.pointerEvents="auto";for(const M of O(this,A).values())M.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const M of O(this,A).values())M.disableEditing()}setActiveEditor(M){O(this,r).getActive()!==M&&O(this,r).setActiveEditor(M)}enableClick(){this.div.addEventListener("pointerdown",O(this,E)),this.div.addEventListener("pointerup",O(this,g))}disableClick(){this.div.removeEventListener("pointerdown",O(this,E)),this.div.removeEventListener("pointerup",O(this,g))}attach(M){O(this,A).set(M.id,M)}detach(M){O(this,A).delete(M.id),this.removePointerInTextLayer(M)}remove(M){O(this,r).removeEditor(M),this.detach(M),this.annotationStorage.removeKey(M.id),M.div.style.display="none",setTimeout(()=>{M.div.style.display="",M.div.remove(),M.isAttachedToDOM=!1,document.activeElement===document.body&&O(this,r).focusMainContainer()},0),O(this,k)||this.addInkEditorIfNeeded(!1)}onTextLayerRendered(){O(this,s).clear();for(const M of O(this,l))M.isAttachedToDOM&&this.addPointerInTextLayer(M);O(this,l).clear()}removePointerInTextLayer(M){if(!O(this,F,fe)){O(this,l).delete(M);return}const{id:q}=M,U=O(this,s).get(q);if(!U)return;O(this,s).delete(q);let rt=U.getAttribute("aria-owns");rt!=null&&rt.includes(q)&&(rt=rt.split(" ").filter(at=>at!==q).join(" "),rt?U.setAttribute("aria-owns",rt):(U.removeAttribute("aria-owns"),U.setAttribute("role","presentation")))}addPointerInTextLayer(M){if(!O(this,F,fe)){O(this,l).add(M);return}this.removePointerInTextLayer(M);const q=this.textLayerElements;if(!q)return;const{contentDiv:U}=M,rt=M.getIdForTextLayer(),at=(0,x.binarySearchFirstItem)(q,ut=>{var j;return ct(j=N,h,ee).call(j,U,ut)<0}),lt=q[Math.max(0,at-1)],mt=lt.getAttribute("aria-owns");mt!=null&&mt.includes(rt)||lt.setAttribute("aria-owns",mt?`${mt} ${rt}`:rt),lt.removeAttribute("role"),O(this,s).set(rt,lt)}moveDivInDOM(M){this.addPointerInTextLayer(M);const{div:q,contentDiv:U}=M;if(!this.div.hasChildNodes()){this.div.append(q);return}const rt=Array.from(this.div.childNodes).filter(lt=>lt!==q);if(rt.length===0)return;const at=(0,x.binarySearchFirstItem)(rt,lt=>{var mt;return ct(mt=N,h,ee).call(mt,U,lt)<0});at===0?rt[0].before(q):rt[at-1].after(q)}add(M){if(ct(this,v,pe).call(this,M),this.addToAnnotationStorage(M),O(this,r).addEditor(M),this.attach(M),!M.isAttachedToDOM){const q=M.render();this.div.append(q),M.isAttachedToDOM=!0}this.moveDivInDOM(M),M.onceAdded()}addToAnnotationStorage(M){!M.isEmpty()&&!this.annotationStorage.has(M.id)&&this.annotationStorage.setValue(M.id,M)}addOrRebuild(M){M.needsToBeRebuilt()?M.rebuild():this.add(M)}addANewEditor(M){const q=()=>{this.addOrRebuild(M)},U=()=>{M.remove()};this.addCommands({cmd:q,undo:U,mustExec:!0})}addUndoableEditor(M){const q=()=>{this.addOrRebuild(M)},U=()=>{M.remove()};this.addCommands({cmd:q,undo:U,mustExec:!1})}getNextId(){return O(this,r).getId()}deserialize(M){switch(M.annotationType){case e.AnnotationEditorType.FREETEXT:return p.FreeTextEditor.deserialize(M,this);case e.AnnotationEditorType.INK:return S.InkEditor.deserialize(M,this)}return null}setSelected(M){O(this,r).setSelected(M)}toggleSelected(M){O(this,r).toggleSelected(M)}isSelected(M){return O(this,r).isSelected(M)}unselect(M){O(this,r).unselect(M)}pointerup(M){const q=u.KeyboardManager.platform.isMac;if(!(M.button!==0||M.ctrlKey&&q)&&M.target===this.div){if(!O(this,o)){pt(this,o,!0);return}ct(this,L,me).call(this,M)}}pointerdown(M){const q=u.KeyboardManager.platform.isMac;if(M.button!==0||M.ctrlKey&&q||M.target!==this.div)return;const U=O(this,r).getActive();pt(this,o,!U||U.isEmpty())}drop(M){const q=M.dataTransfer.getData("text/plain"),U=O(this,r).getEditor(q);if(!U)return;M.preventDefault(),M.dataTransfer.dropEffect="move",ct(this,v,pe).call(this,U);const rt=this.div.getBoundingClientRect(),at=M.clientX-rt.x,lt=M.clientY-rt.y;U.translate(at-U.startX,lt-U.startY),this.moveDivInDOM(U),U.div.focus()}dragover(M){M.preventDefault()}destroy(){var M;((M=O(this,r).getActive())==null?void 0:M.parent)===this&&O(this,r).setActiveEditor(null);for(const q of O(this,A).values())this.removePointerInTextLayer(q),q.isAttachedToDOM=!1,q.div.remove(),q.parent=null;O(this,s).clear(),this.div=null,O(this,A).clear(),O(this,l).clear(),O(this,r).removeLayer(this)}render(M){this.viewport=M.viewport,(0,u.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const q of O(this,r).getEditors(this.pageIndex))this.add(q);this.updateMode()}update(M){this.viewport=M.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[M,q,U,rt]=this.viewport.viewBox,at=U-M,lt=rt-q;return[at,lt]}get viewportBaseDimensions(){const{width:M,height:q,rotation:U}=this.viewport;return U%180===0?[M,q]:[q,M]}setDimensions(){const{width:M,height:q,rotation:U}=this.viewport,rt=U%180!==0,at=Math.floor(M)+"px",lt=Math.floor(q)+"px";this.div.style.width=rt?lt:at,this.div.style.height=rt?at:lt,this.div.setAttribute("data-main-rotation",U)}};let d=N;o=new WeakMap,g=new WeakMap,E=new WeakMap,A=new WeakMap,k=new WeakMap,m=new WeakMap,s=new WeakMap,r=new WeakMap,l=new WeakMap,F=new WeakSet,fe=function(){return!!this.div.parentNode.querySelector(".textLayer .endOfContent")},v=new WeakSet,pe=function(M){var q;M.parent!==this&&(this.attach(M),M.pageIndex=this.pageIndex,(q=M.parent)==null||q.detach(M),M.parent=this,M.div&&M.isAttachedToDOM&&(M.div.remove(),this.div.append(M.div)))},h=new WeakSet,ee=function(M,q){const U=M.getBoundingClientRect(),rt=q.getBoundingClientRect();if(U.y+U.height<=rt.y)return-1;if(rt.y+rt.height<=U.y)return 1;const at=U.x+U.width/2,lt=rt.x+rt.width/2;return at-lt},D=new WeakSet,Re=function(M){switch(O(this,r).getMode()){case e.AnnotationEditorType.FREETEXT:return new p.FreeTextEditor(M);case e.AnnotationEditorType.INK:return new S.InkEditor(M)}return null},L=new WeakSet,me=function(M){const q=this.getNextId(),U=ct(this,D,Re).call(this,{parent:this,id:q,x:M.offsetX,y:M.offsetY});return U&&this.add(U),U},tt=new WeakSet,Fe=function(){pt(this,k,!0);for(const M of O(this,A).values())M.isEmpty()&&M.remove();pt(this,k,!1)},ot(d,h),Nt(d,"_initialized",!1),t.AnnotationEditorLayer=d},(b,t,i)=>{var S,d,o,g,E,A,k,m,s,Me,l,De,P,Ie,a,_e;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var e=i(1),u=i(9),x=i(8);const C=class extends x.AnnotationEditor{constructor(L){super({...L,name:"freeTextEditor"});ot(this,s);ot(this,l);ot(this,P);ot(this,a);ot(this,S,this.editorDivBlur.bind(this));ot(this,d,this.editorDivFocus.bind(this));ot(this,o,this.editorDivKeydown.bind(this));ot(this,g,void 0);ot(this,E,"");ot(this,A,"");ot(this,k,!1);ot(this,m,void 0);pt(this,g,L.color||C._defaultColor||x.AnnotationEditor._defaultLineColor),pt(this,m,L.fontSize||C._defaultFontSize)}static initialize(L){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(tt=>[tt,L.get(tt)]));const W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}static updateDefaultParams(L,W){switch(L){case e.AnnotationEditorParamsType.FREETEXT_SIZE:C._defaultFontSize=W;break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:C._defaultColor=W;break}}updateParams(L,W){switch(L){case e.AnnotationEditorParamsType.FREETEXT_SIZE:ct(this,s,Me).call(this,W);break;case e.AnnotationEditorParamsType.FREETEXT_COLOR:ct(this,l,De).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,C._defaultFontSize],[e.AnnotationEditorParamsType.FREETEXT_COLOR,C._defaultColor||x.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[e.AnnotationEditorParamsType.FREETEXT_SIZE,O(this,m)],[e.AnnotationEditorParamsType.FREETEXT_COLOR,O(this,g)]]}getInitialTranslation(){return[-C._internalPadding*this.parent.scaleFactor,-(C._internalPadding+O(this,m))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(e.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",O(this,o)),this.editorDiv.addEventListener("focus",O(this,d)),this.editorDiv.addEventListener("blur",O(this,S)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",O(this,o)),this.editorDiv.removeEventListener("focus",O(this,d)),this.editorDiv.removeEventListener("blur",O(this,S)),this.div.focus(),this.isEditing=!1)}focusin(L){super.focusin(L),L.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),O(this,k)||(pt(this,k,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pt(this,A,this.editorDiv.innerHTML),pt(this,E,ct(this,P,Ie).call(this).trimEnd()),ct(this,a,_e).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(L){this.enableEditMode(),this.editorDiv.focus()}keydown(L){L.target===this.div&&L.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(L){C._keyboardManager.exec(this,L)}editorDivFocus(L){this.isEditing=!0}editorDivBlur(L){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}getIdForTextLayer(){return this.editorDiv.id}render(){if(this.div)return this.div;let L,W;this.width&&(L=this.x,W=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),C._l10nPromise.get("editor_free_text_aria_label").then($=>{var N;return(N=this.editorDiv)==null?void 0:N.setAttribute("aria-label",$)}),C._l10nPromise.get("free_text_default_content").then($=>{var N;return(N=this.editorDiv)==null?void 0:N.setAttribute("default-content",$)}),this.editorDiv.contentEditable=!0;const{style:tt}=this.editorDiv;if(tt.fontSize=`calc(${O(this,m)}px * var(--scale-factor))`,tt.color=O(this,g),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[$,N]=this.parent.viewportBaseDimensions;this.setAt(L*$,W*N,this.width*$,this.height*N),this.editorDiv.innerHTML=O(this,A),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(L,W){const tt=super.deserialize(L,W);return pt(tt,m,L.fontSize),pt(tt,g,e.Util.makeHexColor(...L.color)),pt(tt,E,L.value),pt(tt,A,L.value.split(`
`).map($=>`<div>${$}</div>`).join("")),tt}serialize(){if(this.isEmpty())return null;const L=C._internalPadding*this.parent.scaleFactor,W=this.getRect(L,L),tt=x.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:e.AnnotationEditorType.FREETEXT,color:tt,fontSize:O(this,m),value:O(this,E),pageIndex:this.parent.pageIndex,rect:W,rotation:this.rotation}}};let p=C;S=new WeakMap,d=new WeakMap,o=new WeakMap,g=new WeakMap,E=new WeakMap,A=new WeakMap,k=new WeakMap,m=new WeakMap,s=new WeakSet,Me=function(L){const W=$=>{this.editorDiv.style.fontSize=`calc(${$}px * var(--scale-factor))`,this.translate(0,-($-O(this,m))*this.parent.scaleFactor),pt(this,m,$),ct(this,a,_e).call(this)},tt=O(this,m);this.parent.addCommands({cmd:()=>{W(L)},undo:()=>{W(tt)},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},l=new WeakSet,De=function(L){const W=O(this,g);this.parent.addCommands({cmd:()=>{pt(this,g,L),this.editorDiv.style.color=L},undo:()=>{pt(this,g,W),this.editorDiv.style.color=W},mustExec:!0,type:e.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P=new WeakSet,Ie=function(){const L=this.editorDiv.getElementsByTagName("div");if(L.length===0)return this.editorDiv.innerText;const W=[];for(let tt=0,$=L.length;tt<$;tt++){const G=L[tt].firstChild;(G==null?void 0:G.nodeName)==="#text"?W.push(G.data):W.push("")}return W.join(`
`)},a=new WeakSet,_e=function(){const[L,W]=this.parent.viewportBaseDimensions,tt=this.div.getBoundingClientRect();this.width=tt.width/L,this.height=tt.height/W},Nt(p,"_freeTextDefaultContent",""),Nt(p,"_l10nPromise"),Nt(p,"_internalPadding",0),Nt(p,"_defaultColor",null),Nt(p,"_defaultFontSize",10),Nt(p,"_keyboardManager",new u.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],C.prototype.commitOrRemove]])),t.FreeTextEditor=p},(b,t,i)=>{var o,g,E,A,k,m,s,r,l,F,P,v,a,h,C,Oe,I,Le,W,Ne,$,je,G,ge,q,Be,rt,Ue,lt,We,ut,Vt,y,be,w,ne,c,se,T,Kt,B,ve,Y,ie,et,ye,nt,qe,_t,ze,Z,He,K,Ae,St,re,At,Jt,Ft,Se;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return x.fitCurve}});var e=i(1),u=i(8),x=i(25),p=i(9);const S=16,xt=class extends u.AnnotationEditor{constructor(it){super({...it,name:"inkEditor"});ot(this,C);ot(this,I);ot(this,W);ot(this,$);ot(this,G);ot(this,q);ot(this,rt);ot(this,lt);ot(this,ut);ot(this,y);ot(this,w);ot(this,c);ot(this,T);ot(this,B);ot(this,Y);ot(this,nt);ot(this,_t);ot(this,Z);ot(this,K);ot(this,St);ot(this,At);ot(this,Ft);ot(this,o,0);ot(this,g,0);ot(this,E,0);ot(this,A,this.canvasPointermove.bind(this));ot(this,k,this.canvasPointerleave.bind(this));ot(this,m,this.canvasPointerup.bind(this));ot(this,s,this.canvasPointerdown.bind(this));ot(this,r,!1);ot(this,l,!1);ot(this,F,null);ot(this,P,null);ot(this,v,0);ot(this,a,0);ot(this,h,null);this.color=it.color||null,this.thickness=it.thickness||null,this.opacity=it.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(it){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(dt=>[dt,it.get(dt)]))}static updateDefaultParams(it,dt){switch(it){case e.AnnotationEditorParamsType.INK_THICKNESS:xt._defaultThickness=dt;break;case e.AnnotationEditorParamsType.INK_COLOR:xt._defaultColor=dt;break;case e.AnnotationEditorParamsType.INK_OPACITY:xt._defaultOpacity=dt/100;break}}updateParams(it,dt){switch(it){case e.AnnotationEditorParamsType.INK_THICKNESS:ct(this,C,Oe).call(this,dt);break;case e.AnnotationEditorParamsType.INK_COLOR:ct(this,I,Le).call(this,dt);break;case e.AnnotationEditorParamsType.INK_OPACITY:ct(this,W,Ne).call(this,dt);break}}static get defaultPropertiesToUpdate(){return[[e.AnnotationEditorParamsType.INK_THICKNESS,xt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,xt._defaultColor||u.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(xt._defaultOpacity*100)]]}get propertiesToUpdate(){var it;return[[e.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||xt._defaultThickness],[e.AnnotationEditorParamsType.INK_COLOR,this.color||xt._defaultColor||u.AnnotationEditor._defaultLineColor],[e.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((it=this.opacity)!=null?it:xt._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ct(this,w,ne).call(this),ct(this,c,se).call(this)),this.isAttachedToDOM||(this.parent.add(this),ct(this,T,Kt).call(this)),ct(this,At,Jt).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,O(this,P).disconnect(),pt(this,P,null),super.remove())}enableEditMode(){O(this,r)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",O(this,s)),this.canvas.addEventListener("pointerup",O(this,m)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",O(this,s)),this.canvas.removeEventListener("pointerup",O(this,m)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){O(this,r)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pt(this,r,!0),this.div.classList.add("disabled"),ct(this,At,Jt).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveDivInDOM(this),this.div.focus())}focusin(it){super.focusin(it),this.enableEditMode()}canvasPointerdown(it){it.button!==0||!this.isInEditMode()||O(this,r)||(this.setInForeground(),it.type!=="mouse"&&this.div.focus(),it.stopPropagation(),this.canvas.addEventListener("pointerleave",O(this,k)),this.canvas.addEventListener("pointermove",O(this,A)),ct(this,q,Be).call(this,it.offsetX,it.offsetY))}canvasPointermove(it){it.stopPropagation(),ct(this,rt,Ue).call(this,it.offsetX,it.offsetY)}canvasPointerup(it){it.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(it.stopPropagation(),ct(this,y,be).call(this,it),this.setInBackground())}canvasPointerleave(it){ct(this,y,be).call(this,it),this.setInBackground()}render(){if(this.div)return this.div;let it,dt;this.width&&(it=this.x,dt=this.y),super.render(),xt._l10nPromise.get("editor_ink_aria_label").then(gt=>{var yt;return(yt=this.div)==null?void 0:yt.setAttribute("aria-label",gt)});const[Q,V,X,ft]=ct(this,$,je).call(this);if(this.setAt(Q,V,0,0),this.setDims(X,ft),ct(this,w,ne).call(this),this.width){const[gt,yt]=this.parent.viewportBaseDimensions;this.setAt(it*gt,dt*yt,this.width*gt,this.height*yt),pt(this,l,!0),ct(this,T,Kt).call(this),this.setDims(this.width*gt,this.height*yt),ct(this,ut,Vt).call(this),ct(this,Ft,Se).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ct(this,c,se).call(this),this.div}setDimensions(it,dt){const Q=Math.round(it),V=Math.round(dt);if(O(this,v)===Q&&O(this,a)===V)return;pt(this,v,Q),pt(this,a,V),this.canvas.style.visibility="hidden",O(this,o)&&Math.abs(O(this,o)-it/dt)>.01&&(dt=Math.ceil(it/O(this,o)),this.setDims(it,dt));const[X,ft]=this.parent.viewportBaseDimensions;this.width=it/X,this.height=dt/ft,O(this,r)&&ct(this,B,ve).call(this,it,dt),ct(this,T,Kt).call(this),ct(this,ut,Vt).call(this),this.canvas.style.visibility="visible"}static deserialize(it,dt){var Mt,Rt;const Q=super.deserialize(it,dt);Q.thickness=it.thickness,Q.color=e.Util.makeHexColor(...it.color),Q.opacity=it.opacity;const[V,X]=dt.pageDimensions,ft=Q.width*V,gt=Q.height*X,yt=dt.scaleFactor,wt=it.thickness/2;pt(Q,o,ft/gt),pt(Q,r,!0),pt(Q,v,Math.round(ft)),pt(Q,a,Math.round(gt));for(const{bezier:Et}of it.paths){const Ot=[];Q.paths.push(Ot);let Dt=yt*(Et[0]-wt),Ut=yt*(gt-Et[1]-wt);for(let Lt=2,qt=Et.length;Lt<qt;Lt+=6){const Gt=yt*(Et[Lt]-wt),Xt=yt*(gt-Et[Lt+1]-wt),Ht=yt*(Et[Lt+2]-wt),Bt=yt*(gt-Et[Lt+3]-wt),zt=yt*(Et[Lt+4]-wt),Yt=yt*(gt-Et[Lt+5]-wt);Ot.push([[Dt,Ut],[Gt,Xt],[Ht,Bt],[zt,Yt]]),Dt=zt,Ut=Yt}const Pt=ct(this,et,ye).call(this,Ot);Q.bezierPath2D.push(Pt)}const Tt=ct(Mt=Q,K,Ae).call(Mt);return pt(Q,E,Tt[2]-Tt[0]),pt(Q,g,Tt[3]-Tt[1]),ct(Rt=Q,B,ve).call(Rt,ft,gt),Q}serialize(){if(this.isEmpty())return null;const it=this.getRect(0,0),dt=this.rotation%180===0?it[3]-it[1]:it[2]-it[0],Q=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:e.AnnotationEditorType.INK,color:Q,thickness:this.thickness,opacity:this.opacity,paths:ct(this,nt,qe).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,dt),pageIndex:this.parent.pageIndex,rect:it,rotation:this.rotation}}};let d=xt;o=new WeakMap,g=new WeakMap,E=new WeakMap,A=new WeakMap,k=new WeakMap,m=new WeakMap,s=new WeakMap,r=new WeakMap,l=new WeakMap,F=new WeakMap,P=new WeakMap,v=new WeakMap,a=new WeakMap,h=new WeakMap,C=new WeakSet,Oe=function(it){const dt=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=it,ct(this,At,Jt).call(this)},undo:()=>{this.thickness=dt,ct(this,At,Jt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},I=new WeakSet,Le=function(it){const dt=this.color;this.parent.addCommands({cmd:()=>{this.color=it,ct(this,ut,Vt).call(this)},undo:()=>{this.color=dt,ct(this,ut,Vt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},W=new WeakSet,Ne=function(it){it/=100;const dt=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=it,ct(this,ut,Vt).call(this)},undo:()=>{this.opacity=dt,ct(this,ut,Vt).call(this)},mustExec:!0,type:e.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},$=new WeakSet,je=function(){const{width:it,height:dt,rotation:Q}=this.parent.viewport;switch(Q){case 90:return[0,it,it,dt];case 180:return[it,dt,it,dt];case 270:return[dt,0,it,dt];default:return[0,0,it,dt]}},G=new WeakSet,ge=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,p.opacityToHex)(this.opacity)}`},q=new WeakSet,Be=function(it,dt){var Q;this.isEditing=!0,O(this,l)||(pt(this,l,!0),ct(this,T,Kt).call(this),this.thickness||(this.thickness=xt._defaultThickness),this.color||(this.color=xt._defaultColor||u.AnnotationEditor._defaultLineColor),(Q=this.opacity)!=null||(this.opacity=xt._defaultOpacity)),this.currentPath.push([it,dt]),pt(this,F,null),ct(this,G,ge).call(this),this.ctx.beginPath(),this.ctx.moveTo(it,dt),pt(this,h,()=>{!O(this,h)||(O(this,F)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ct(this,ut,Vt).call(this),this.ctx.lineTo(...O(this,F)),pt(this,F,null),this.ctx.stroke()),window.requestAnimationFrame(O(this,h)))}),window.requestAnimationFrame(O(this,h))},rt=new WeakSet,Ue=function(it,dt){const[Q,V]=this.currentPath.at(-1);it===Q&&dt===V||(this.currentPath.push([it,dt]),pt(this,F,[it,dt]))},lt=new WeakSet,We=function(it,dt){var wt;this.ctx.closePath(),pt(this,h,null),it=Math.min(Math.max(it,0),this.canvas.width),dt=Math.min(Math.max(dt,0),this.canvas.height);const[Q,V]=this.currentPath.at(-1);(it!==Q||dt!==V)&&this.currentPath.push([it,dt]);let X;if(this.currentPath.length!==1)X=(0,x.fitCurve)(this.currentPath,30,null);else{const Tt=[it,dt];X=[[Tt,Tt.slice(),Tt.slice(),Tt]]}const ft=ct(wt=xt,et,ye).call(wt,X);this.currentPath.length=0;const gt=()=>{this.paths.push(X),this.bezierPath2D.push(ft),this.rebuild()},yt=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ct(this,w,ne).call(this),ct(this,c,se).call(this)),ct(this,At,Jt).call(this))};this.parent.addCommands({cmd:gt,undo:yt,mustExec:!0})},ut=new WeakSet,Vt=function(){if(this.isEmpty()){ct(this,Y,ie).call(this);return}ct(this,G,ge).call(this);const{canvas:it,ctx:dt}=this;dt.setTransform(1,0,0,1,0,0),dt.clearRect(0,0,it.width,it.height),ct(this,Y,ie).call(this);for(const Q of this.bezierPath2D)dt.stroke(Q)},y=new WeakSet,be=function(it){ct(this,lt,We).call(this,it.offsetX,it.offsetY),this.canvas.removeEventListener("pointerleave",O(this,k)),this.canvas.removeEventListener("pointermove",O(this,A)),this.parent.addToAnnotationStorage(this)},w=new WeakSet,ne=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",xt._l10nPromise.get("editor_ink_canvas_aria_label").then(it=>{var dt;return(dt=this.canvas)==null?void 0:dt.setAttribute("aria-label",it)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},c=new WeakSet,se=function(){pt(this,P,new ResizeObserver(it=>{const dt=it[0].contentRect;dt.width&&dt.height&&this.setDimensions(dt.width,dt.height)})),O(this,P).observe(this.div)},T=new WeakSet,Kt=function(){if(!O(this,l))return;const[it,dt]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*it),this.canvas.height=Math.ceil(this.height*dt),ct(this,Y,ie).call(this)},B=new WeakSet,ve=function(it,dt){const Q=ct(this,St,re).call(this),V=(it-Q)/O(this,E),X=(dt-Q)/O(this,g);this.scaleFactor=Math.min(V,X)},Y=new WeakSet,ie=function(){const it=ct(this,St,re).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+it,this.translationY*this.scaleFactor+it)},et=new WeakSet,ye=function(it){const dt=new Path2D;for(let Q=0,V=it.length;Q<V;Q++){const[X,ft,gt,yt]=it[Q];Q===0&&dt.moveTo(...X),dt.bezierCurveTo(ft[0],ft[1],gt[0],gt[1],yt[0],yt[1])}return dt},nt=new WeakSet,qe=function(it,dt,Q,V){const ft=[],gt=this.thickness/2;let yt,wt;for(const Tt of this.paths){yt=[],wt=[];for(let Mt=0,Rt=Tt.length;Mt<Rt;Mt++){const[Et,Ot,Dt,Ut]=Tt[Mt],Pt=it*(Et[0]+dt)+gt,Lt=V-it*(Et[1]+Q)-gt,qt=it*(Ot[0]+dt)+gt,Gt=V-it*(Ot[1]+Q)-gt,Xt=it*(Dt[0]+dt)+gt,Ht=V-it*(Dt[1]+Q)-gt,Bt=it*(Ut[0]+dt)+gt,zt=V-it*(Ut[1]+Q)-gt;Mt===0&&(yt.push(Pt,Lt),wt.push(Pt,Lt)),yt.push(qt,Gt,Xt,Ht,Bt,zt),ct(this,_t,ze).call(this,Pt,Lt,qt,Gt,Xt,Ht,Bt,zt,4,wt)}ft.push({bezier:yt,points:wt})}return ft},_t=new WeakSet,ze=function(it,dt,Q,V,X,ft,gt,yt,wt,Tt){if(ct(this,Z,He).call(this,it,dt,Q,V,X,ft,gt,yt)){Tt.push(gt,yt);return}for(let Mt=1;Mt<wt-1;Mt++){const Rt=Mt/wt,Et=1-Rt;let Ot=Rt*it+Et*Q,Dt=Rt*dt+Et*V,Ut=Rt*Q+Et*X,Pt=Rt*V+Et*ft;const Lt=Rt*X+Et*gt,qt=Rt*ft+Et*yt;Ot=Rt*Ot+Et*Ut,Dt=Rt*Dt+Et*Pt,Ut=Rt*Ut+Et*Lt,Pt=Rt*Pt+Et*qt,Ot=Rt*Ot+Et*Ut,Dt=Rt*Dt+Et*Pt,Tt.push(Ot,Dt)}Tt.push(gt,yt)},Z=new WeakSet,He=function(it,dt,Q,V,X,ft,gt,yt){const Tt=(3*Q-2*it-gt)**2,Mt=(3*V-2*dt-yt)**2,Rt=(3*X-it-2*gt)**2,Et=(3*ft-dt-2*yt)**2;return Math.max(Tt,Rt)+Math.max(Mt,Et)<=10},K=new WeakSet,Ae=function(){let it=1/0,dt=-1/0,Q=1/0,V=-1/0;for(const X of this.paths)for(const[ft,gt,yt,wt]of X){const Tt=e.Util.bezierBoundingBox(...ft,...gt,...yt,...wt);it=Math.min(it,Tt[0]),Q=Math.min(Q,Tt[1]),dt=Math.max(dt,Tt[2]),V=Math.max(V,Tt[3])}return[it,Q,dt,V]},St=new WeakSet,re=function(){return O(this,r)?Math.ceil(this.thickness*this.parent.scaleFactor):0},At=new WeakSet,Jt=function(it=!1){if(this.isEmpty())return;if(!O(this,r)){ct(this,ut,Vt).call(this);return}const dt=ct(this,K,Ae).call(this),Q=ct(this,St,re).call(this);pt(this,E,Math.max(S,dt[2]-dt[0])),pt(this,g,Math.max(S,dt[3]-dt[1]));const V=Math.ceil(Q+O(this,E)*this.scaleFactor),X=Math.ceil(Q+O(this,g)*this.scaleFactor),[ft,gt]=this.parent.viewportBaseDimensions;this.width=V/ft,this.height=X/gt,pt(this,o,V/X),ct(this,Ft,Se).call(this);const yt=this.translationX,wt=this.translationY;this.translationX=-dt[0],this.translationY=-dt[1],ct(this,T,Kt).call(this),ct(this,ut,Vt).call(this),pt(this,v,V),pt(this,a,X),this.setDims(V,X);const Tt=it?Q/this.scaleFactor/2:0;this.translate(yt-this.translationX-Tt,wt-this.translationY-Tt)},Ft=new WeakSet,Se=function(){const{style:it}=this.div;O(this,o)>=1?(it.minHeight=`${S}px`,it.minWidth=`${Math.round(O(this,o)*S)}px`):(it.minWidth=`${S}px`,it.minHeight=`${Math.round(S/O(this,o))}px`)},ot(d,et),Nt(d,"_defaultColor",null),Nt(d,"_defaultOpacity",1),Nt(d,"_defaultThickness",1),Nt(d,"_l10nPromise"),t.InkEditor=d},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const e=i(26);t.fitCurve=e},b=>{function t(m,s,r){if(!Array.isArray(m))throw new TypeError("First argument should be an array");if(m.forEach(v=>{if(!Array.isArray(v)||v.some(a=>typeof a!="number")||v.length!==m[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),m=m.filter((v,a)=>a===0||!v.every((h,C)=>h===m[a-1][C])),m.length<2)return[];const l=m.length,F=E(m[1],m[0]),P=E(m[l-2],m[l-1]);return i(m,F,P,s,r)}function i(m,s,r,l,F){var v,a,h,C,D,I,L,W,tt,$,N,G,M;if(m.length===2)return G=A.vectorLen(A.subtract(m[0],m[1]))/3,v=[m[0],A.addArrays(m[0],A.mulItems(s,G)),A.addArrays(m[1],A.mulItems(r,G)),m[1]],[v];if(a=S(m),[v,C,I]=e(m,a,a,s,r,F),C===0||C<l)return[v];if(C<l*l)for(h=a,D=C,L=I,M=0;M<20;M++){if(h=x(v,m,h),[v,C,I]=e(m,a,h,s,r,F),C<l)return[v];if(I===L){let q=C/D;if(q>.9999&&q<1.0001)break}D=C,L=I}return N=[],W=A.subtract(m[I-1],m[I+1]),W.every(q=>q===0)&&(W=A.subtract(m[I-1],m[I]),[W[0],W[1]]=[-W[1],W[0]]),tt=A.normalize(W),$=A.mulItems(tt,-1),N=N.concat(i(m.slice(0,I+1),s,tt,l,F)),N=N.concat(i(m.slice(I),$,r,l,F)),N}function e(m,s,r,l,F,P){var v,a,h;return v=u(m,r,l,F),[a,h]=d(m,v,s),P&&P({bez:v,points:m,params:s,maxErr:a,maxPoint:h}),[v,a,h]}function u(m,s,r,l){var F,P,v,a,h,C,D,I,L,W,tt,$,N,G,M,q,U,rt=m[0],at=m[m.length-1];for(F=[rt,null,null,at],P=A.zeros_Xx2x2(s.length),N=0,G=s.length;N<G;N++)q=s[N],U=1-q,v=P[N],v[0]=A.mulItems(r,3*q*(U*U)),v[1]=A.mulItems(l,3*U*(q*q));for(a=[[0,0],[0,0]],h=[0,0],N=0,G=m.length;N<G;N++)q=s[N],v=P[N],a[0][0]+=A.dot(v[0],v[0]),a[0][1]+=A.dot(v[0],v[1]),a[1][0]+=A.dot(v[0],v[1]),a[1][1]+=A.dot(v[1],v[1]),M=A.subtract(m[N],k.q([rt,rt,at,at],q)),h[0]+=A.dot(v[0],M),h[1]+=A.dot(v[1],M);return C=a[0][0]*a[1][1]-a[1][0]*a[0][1],D=a[0][0]*h[1]-a[1][0]*h[0],I=h[0]*a[1][1]-h[1]*a[0][1],L=C===0?0:I/C,W=C===0?0:D/C,$=A.vectorLen(A.subtract(rt,at)),tt=1e-6*$,L<tt||W<tt?(F[1]=A.addArrays(rt,A.mulItems(r,$/3)),F[2]=A.addArrays(at,A.mulItems(l,$/3))):(F[1]=A.addArrays(rt,A.mulItems(r,L)),F[2]=A.addArrays(at,A.mulItems(l,W))),F}function x(m,s,r){return r.map((l,F)=>p(m,s[F],l))}function p(m,s,r){var l=A.subtract(k.q(m,r),s),F=k.qprime(m,r),P=A.mulMatrix(l,F),v=A.sum(A.squareItems(F))+2*A.mulMatrix(l,k.qprimeprime(m,r));return v===0?r:r-P/v}function S(m){var s=[],r,l,F;return m.forEach((P,v)=>{r=v?l+A.vectorLen(A.subtract(P,F)):0,s.push(r),l=r,F=P}),s=s.map(P=>P/l),s}function d(m,s,r){var l,F,P,v,a,h,C,D;F=0,P=Math.floor(m.length/2);const I=o(s,10);for(a=0,h=m.length;a<h;a++)C=m[a],D=g(s,r[a],I,10),v=A.subtract(k.q(s,D),C),l=v[0]*v[0]+v[1]*v[1],l>F&&(F=l,P=a);return[F,P]}var o=function(m,s){for(var r,l=[0],F=m[0],P=0,v=1;v<=s;v++)r=k.q(m,v/s),P+=A.vectorLen(A.subtract(r,F)),l.push(P),F=r;return l=l.map(a=>a/P),l};function g(m,s,r,l){if(s<0)return 0;if(s>1)return 1;for(var F,P,v,a,h,C=1;C<=l;C++)if(s<=r[C]){a=(C-1)/l,v=C/l,P=r[C-1],F=r[C],h=(s-P)/(F-P)*(v-a)+a;break}return h}function E(m,s){return A.normalize(A.subtract(m,s))}class A{static zeros_Xx2x2(s){for(var r=[];s--;)r.push([0,0]);return r}static mulItems(s,r){return s.map(l=>l*r)}static mulMatrix(s,r){return s.reduce((l,F,P)=>l+F*r[P],0)}static subtract(s,r){return s.map((l,F)=>l-r[F])}static addArrays(s,r){return s.map((l,F)=>l+r[F])}static addItems(s,r){return s.map(l=>l+r)}static sum(s){return s.reduce((r,l)=>r+l)}static dot(s,r){return A.mulMatrix(s,r)}static vectorLen(s){return Math.hypot(...s)}static divItems(s,r){return s.map(l=>l/r)}static squareItems(s){return s.map(r=>r*r)}static normalize(s){return this.divItems(s,this.vectorLen(s))}}class k{static q(s,r){var l=1-r,F=A.mulItems(s[0],l*l*l),P=A.mulItems(s[1],3*l*l*r),v=A.mulItems(s[2],3*l*r*r),a=A.mulItems(s[3],r*r*r);return A.addArrays(A.addArrays(F,P),A.addArrays(v,a))}static qprime(s,r){var l=1-r,F=A.mulItems(A.subtract(s[1],s[0]),3*l*l),P=A.mulItems(A.subtract(s[2],s[1]),6*l*r),v=A.mulItems(A.subtract(s[3],s[2]),3*r*r);return A.addArrays(A.addArrays(F,P),v)}static qprimeprime(s,r){return A.addArrays(A.mulItems(A.addArrays(A.subtract(s[2],A.mulItems(s[1],2)),s[0]),6*(1-r)),A.mulItems(A.addArrays(A.subtract(s[3],A.mulItems(s[2],2)),s[1]),6*r))}}b.exports=t,b.exports.fitCubic=i,b.exports.createTangent=E},(b,t,i)=>{var ut,we,y,Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var e=i(1),u=i(4),x=i(7),p=i(28),S=i(29);const d=1e3,o=9,g=new WeakSet;function E(w){return{width:w[2]-w[0],height:w[3]-w[1]}}class A{static create(n){switch(n.data.annotationType){case e.AnnotationType.LINK:return new m(n);case e.AnnotationType.TEXT:return new s(n);case e.AnnotationType.WIDGET:switch(n.data.fieldType){case"Tx":return new l(n);case"Btn":return n.data.radioButton?new P(n):n.data.checkBox?new F(n):new v(n);case"Ch":return new a(n)}return new r(n);case e.AnnotationType.POPUP:return new h(n);case e.AnnotationType.FREETEXT:return new D(n);case e.AnnotationType.LINE:return new I(n);case e.AnnotationType.SQUARE:return new L(n);case e.AnnotationType.CIRCLE:return new W(n);case e.AnnotationType.POLYLINE:return new tt(n);case e.AnnotationType.CARET:return new N(n);case e.AnnotationType.INK:return new G(n);case e.AnnotationType.POLYGON:return new $(n);case e.AnnotationType.HIGHLIGHT:return new M(n);case e.AnnotationType.UNDERLINE:return new q(n);case e.AnnotationType.SQUIGGLY:return new U(n);case e.AnnotationType.STRIKEOUT:return new rt(n);case e.AnnotationType.STAMP:return new at(n);case e.AnnotationType.FILEATTACHMENT:return new lt(n);default:return new k(n)}}}class k{constructor(n,{isRenderable:c=!1,ignoreBorder:_=!1,createQuadrilaterals:T=!1}={}){this.isRenderable=c,this.data=n.data,this.layer=n.layer,this.page=n.page,this.viewport=n.viewport,this.linkService=n.linkService,this.downloadManager=n.downloadManager,this.imageResourcesPath=n.imageResourcesPath,this.renderForms=n.renderForms,this.svgFactory=n.svgFactory,this.annotationStorage=n.annotationStorage,this.enableScripting=n.enableScripting,this.hasJSActions=n.hasJSActions,this._fieldObjects=n.fieldObjects,this._mouseState=n.mouseState,c&&(this.container=this._createContainer(_)),T&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(n=!1){const c=this.data,_=this.page,T=this.viewport,R=document.createElement("section"),{width:B,height:z}=E(c.rect),[Y,H,et,J]=T.viewBox,nt=et-Y,ht=J-H;R.setAttribute("data-annotation-id",c.id);const _t=e.Util.normalizeRect([c.rect[0],_.view[3]-c.rect[1]+_.view[1],c.rect[2],_.view[3]-c.rect[3]+_.view[1]]);if(!n&&c.borderStyle.width>0){R.style.borderWidth=`${c.borderStyle.width}px`;const Z=c.borderStyle.horizontalCornerRadius,bt=c.borderStyle.verticalCornerRadius;if(Z>0||bt>0){const st=`calc(${Z}px * var(--scale-factor)) / calc(${bt}px * var(--scale-factor))`;R.style.borderRadius=st}switch(c.borderStyle.style){case e.AnnotationBorderStyleType.SOLID:R.style.borderStyle="solid";break;case e.AnnotationBorderStyleType.DASHED:R.style.borderStyle="dashed";break;case e.AnnotationBorderStyleType.BEVELED:(0,e.warn)("Unimplemented border style: beveled");break;case e.AnnotationBorderStyleType.INSET:(0,e.warn)("Unimplemented border style: inset");break;case e.AnnotationBorderStyleType.UNDERLINE:R.style.borderBottomStyle="solid";break}const K=c.borderColor||null;K?R.style.borderColor=e.Util.makeHexColor(K[0]|0,K[1]|0,K[2]|0):R.style.borderWidth=0}R.style.left=`${100*(_t[0]-Y)/nt}%`,R.style.top=`${100*(_t[1]-H)/ht}%`;const{rotation:vt}=c;return c.hasOwnCanvas||vt===0?(R.style.width=`${100*B/nt}%`,R.style.height=`${100*z/ht}%`):this.setRotation(vt,R),R}setRotation(n,c=this.container){const[_,T,R,B]=this.viewport.viewBox,z=R-_,Y=B-T,{width:H,height:et}=E(this.data.rect);let J,nt;n%180===0?(J=100*H/z,nt=100*et/Y):(J=100*et/z,nt=100*H/Y),c.style.width=`${J}%`,c.style.height=`${nt}%`,c.setAttribute("data-main-rotation",(360-n)%360)}get _commonActions(){const n=(c,_,T)=>{const R=T.detail[c];T.target.style[_]=p.ColorConverters[`${R[0]}_HTML`](R.slice(1))};return(0,e.shadow)(this,"_commonActions",{display:c=>{const _=c.detail.display%2===1;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_,print:c.detail.display===0||c.detail.display===3})},print:c=>{this.annotationStorage.setValue(this.data.id,{print:c.detail.print})},hidden:c=>{this.container.style.visibility=c.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:c.detail.hidden})},focus:c=>{setTimeout(()=>c.target.focus({preventScroll:!1}),0)},userName:c=>{c.target.title=c.detail.userName},readonly:c=>{c.detail.readonly?c.target.setAttribute("readonly",""):c.target.removeAttribute("readonly")},required:c=>{this._setRequired(c.target,c.detail.required)},bgColor:c=>{n("bgColor","backgroundColor",c)},fillColor:c=>{n("fillColor","backgroundColor",c)},fgColor:c=>{n("fgColor","color",c)},textColor:c=>{n("textColor","color",c)},borderColor:c=>{n("borderColor","borderColor",c)},strokeColor:c=>{n("strokeColor","borderColor",c)},rotation:c=>{const _=c.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(n,c){const _=this._commonActions;for(const T of Object.keys(c.detail)){const R=n[T]||_[T];R&&R(c)}}_setDefaultPropertiesFromJS(n){if(!this.enableScripting)return;const c=this.annotationStorage.getRawValue(this.data.id);if(!c)return;const _=this._commonActions;for(const[T,R]of Object.entries(c)){const B=_[T];B&&(B({detail:R,target:n}),delete c[T])}}_createQuadrilaterals(n=!1){if(!this.data.quadPoints)return null;const c=[],_=this.data.rect;for(const T of this.data.quadPoints)this.data.rect=[T[2].x,T[2].y,T[1].x,T[1].y],c.push(this._createContainer(n));return this.data.rect=_,c}_createPopup(n,c){let _=this.container;this.quadrilaterals&&(n=n||this.quadrilaterals,_=this.quadrilaterals[0]),n||(n=document.createElement("div"),n.className="popupTriggerArea",_.append(n));const R=new C({container:_,trigger:n,color:c.color,titleObj:c.titleObj,modificationDate:c.modificationDate,contentsObj:c.contentsObj,richText:c.richText,hideWrapper:!0}).render();R.style.left="100%",_.append(R)}_renderQuadrilaterals(n){for(const c of this.quadrilaterals)c.className=n;return this.quadrilaterals}render(){(0,e.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(n,c=null){const _=[];if(this._fieldObjects){const T=this._fieldObjects[n];if(T)for(const{page:R,id:B,exportValues:z}of T){if(R===-1||B===c)continue;const Y=typeof z=="string"?z:null,H=document.querySelector(`[data-element-id="${B}"]`);if(H&&!g.has(H)){(0,e.warn)(`_getElementsByName - element not allowed: ${B}`);continue}_.push({id:B,exportValue:Y,domElement:H})}return _}for(const T of document.getElementsByName(n)){const{id:R,exportValue:B}=T;R!==c&&(!g.has(T)||_.push({id:R,exportValue:B,domElement:T}))}return _}static get platform(){const n=typeof navigator<"u"?navigator.platform:"";return(0,e.shadow)(this,"platform",{isWin:n.includes("Win"),isMac:n.includes("Mac")})}}class m extends k{constructor(n,c=null){super(n,{isRenderable:!0,ignoreBorder:!!(c!=null&&c.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=n.data.isTooltipOnly}render(){const{data:n,linkService:c}=this,_=document.createElement("a");_.setAttribute("data-element-id",n.id);let T=!1;return n.url?(c.addLinkAttributes(_,n.url,n.newWindow),T=!0):n.action?(this._bindNamedAction(_,n.action),T=!0):n.dest?(this._bindLink(_,n.dest),T=!0):(n.actions&&(n.actions.Action||n.actions["Mouse Up"]||n.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_,n),T=!0),n.resetForm?(this._bindResetFormAction(_,n.resetForm),T=!0):this.isTooltipOnly&&!T&&(this._bindLink(_,""),T=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((R,B)=>{const z=B===0?_:_.cloneNode();return R.append(z),R}):(this.container.className="linkAnnotation",T&&this.container.append(_),this.container)}_bindLink(n,c){n.href=this.linkService.getDestinationHash(c),n.onclick=()=>(c&&this.linkService.goToDestination(c),!1),(c||c==="")&&(n.className="internalLink")}_bindNamedAction(n,c){n.href=this.linkService.getAnchorUrl(""),n.onclick=()=>(this.linkService.executeNamedAction(c),!1),n.className="internalLink"}_bindJSAction(n,c){n.href=this.linkService.getAnchorUrl("");const _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const T of Object.keys(c.actions)){const R=_.get(T);!R||(n[R]=()=>{var B;return(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c.id,name:T}}),!1})}n.onclick||(n.onclick=()=>!1),n.className="internalLink"}_bindResetFormAction(n,c){const _=n.onclick;if(_||(n.href=this.linkService.getAnchorUrl("")),n.className="internalLink",!this._fieldObjects){(0,e.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(n.onclick=()=>!1);return}n.onclick=()=>{var et;_&&_();const{fields:T,refs:R,include:B}=c,z=[];if(T.length!==0||R.length!==0){const J=new Set(R);for(const nt of T){const ht=this._fieldObjects[nt]||[];for(const{id:_t}of ht)J.add(_t)}for(const nt of Object.values(this._fieldObjects))for(const ht of nt)J.has(ht.id)===B&&z.push(ht)}else for(const J of Object.values(this._fieldObjects))z.push(...J);const Y=this.annotationStorage,H=[];for(const J of z){const{id:nt}=J;switch(H.push(nt),J.type){case"text":{const _t=J.defaultValue||"";Y.setValue(nt,{value:_t});break}case"checkbox":case"radiobutton":{const _t=J.defaultValue===J.exportValues;Y.setValue(nt,{value:_t});break}case"combobox":case"listbox":{const _t=J.defaultValue||"";Y.setValue(nt,{value:_t});break}default:continue}const ht=document.querySelector(`[data-element-id="${nt}"]`);if(ht){if(!g.has(ht)){(0,e.warn)(`_bindResetFormAction - element not allowed: ${nt}`);continue}}else continue;ht.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((et=this.linkService.eventBus)==null||et.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:H,name:"ResetForm"}})),!1}}}class s extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c})}render(){this.container.className="textAnnotation";const n=document.createElement("img");return n.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",n.alt="[{{type}} Annotation]",n.dataset.l10nId="text_annotation_type",n.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(n,this.data),this.container.append(n),this.container}}class r extends k{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(n){const{isWin:c,isMac:_}=k.platform;return c&&n.ctrlKey||_&&n.metaKey}_setEventListener(n,c,_,T){c.includes("mouse")?n.addEventListener(c,R=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:T(R),shift:R.shiftKey,modifier:this._getKeyModifier(R)}})}):n.addEventListener(c,R=>{var B;(B=this.linkService.eventBus)==null||B.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:T(R)}})})}_setEventListeners(n,c,_){var T;for(const[R,B]of c)(B==="Action"||((T=this.data.actions)==null?void 0:T[B]))&&this._setEventListener(n,R,B,_)}_setBackgroundColor(n){const c=this.data.backgroundColor||null;n.style.backgroundColor=c===null?"transparent":e.Util.makeHexColor(c[0],c[1],c[2])}_setTextStyle(n){const c=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,T=this.data.defaultAppearanceData.fontSize||o,R=n.style;let B;if(this.data.multiLine){const z=Math.abs(this.data.rect[3]-this.data.rect[1]),Y=Math.round(z/(e.LINE_FACTOR*T))||1,H=z/Y;B=Math.min(T,Math.round(H/e.LINE_FACTOR))}else{const z=Math.abs(this.data.rect[3]-this.data.rect[1]);B=Math.min(T,Math.round(z/e.LINE_FACTOR))}R.fontSize=`calc(${B}px * var(--scale-factor))`,R.color=e.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(R.textAlign=c[this.data.textAlignment])}_setRequired(n,c){c?n.setAttribute("required",!0):n.removeAttribute("required"),n.setAttribute("aria-required",c)}}class l extends r{constructor(n){const c=n.renderForms||!n.data.hasAppearance&&!!n.data.fieldValue;super(n,{isRenderable:c})}setPropertyOnSiblings(n,c,_,T){const R=this.annotationStorage;for(const B of this._getElementsByName(n.name,n.id))B.domElement&&(B.domElement[c]=_),R.setValue(B.id,{[T]:_})}render(){var T;const n=this.annotationStorage,c=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){const R=n.getValue(c,{value:this.data.fieldValue}),B=R.formattedValue||R.value||"",z={userValue:B,formattedValue:null,valueOnFocus:""};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=B,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",B),this.data.doNotScroll&&(_.style.overflowX="hidden")),g.add(_),_.setAttribute("data-element-id",c),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=d,this._setRequired(_,this.data.required),_.addEventListener("input",H=>{n.setValue(c,{value:H.target.value}),this.setPropertyOnSiblings(_,"value",H.target.value,"value")}),_.addEventListener("resetform",H=>{var J;const et=(J=this.data.defaultFieldValue)!=null?J:"";_.value=z.userValue=et,z.formattedValue=null});let Y=H=>{const{formattedValue:et}=z;et!=null&&(H.target.value=et),H.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",et=>{z.userValue&&(et.target.value=z.userValue),z.valueOnFocus=et.target.value}),_.addEventListener("updatefromsandbox",et=>{const J={value(nt){var ht;z.userValue=(ht=nt.detail.value)!=null?ht:"",n.setValue(c,{value:z.userValue.toString()}),nt.target.value=z.userValue},formattedValue(nt){const{formattedValue:ht}=nt.detail;z.formattedValue=ht,ht!=null&&nt.target!==document.activeElement&&(nt.target.value=ht),n.setValue(c,{formattedValue:ht})},selRange(nt){nt.target.setSelectionRange(...nt.detail.selRange)}};this._dispatchEventFromSandbox(J,et)}),_.addEventListener("keydown",et=>{var ht;let J=-1;if(et.key==="Escape"?J=0:et.key==="Enter"?J=2:et.key==="Tab"&&(J=3),J===-1)return;const{value:nt}=et.target;z.valueOnFocus!==nt&&(z.userValue=nt,(ht=this.linkService.eventBus)==null||ht.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:nt,willCommit:!0,commitKey:J,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}}))});const H=Y;Y=null,_.addEventListener("blur",et=>{var nt;const{value:J}=et.target;z.userValue=J,this._mouseState.isDown&&z.valueOnFocus!==J&&((nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:J,willCommit:!0,commitKey:1,selStart:et.target.selectionStart,selEnd:et.target.selectionEnd}})),H(et)}),(T=this.data.actions)!=null&&T.Keystroke&&_.addEventListener("beforeinput",et=>{var K;const{data:J,target:nt}=et,{value:ht,selectionStart:_t,selectionEnd:vt}=nt;let Z=_t,bt=vt;switch(et.inputType){case"deleteWordBackward":{const st=ht.substring(0,_t).match(/\w*[^\w]*$/);st&&(Z-=st[0].length);break}case"deleteWordForward":{const st=ht.substring(_t).match(/^[^\w]*\w*/);st&&(bt+=st[0].length);break}case"deleteContentBackward":_t===vt&&(Z-=1);break;case"deleteContentForward":_t===vt&&(bt+=1);break}et.preventDefault(),(K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:ht,change:J||"",willCommit:!1,selStart:Z,selEnd:bt}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],et=>et.target.value)}if(Y&&_.addEventListener("blur",Y),this.data.maxLen!==null&&(_.maxLength=this.data.maxLen),this.data.comb){const et=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;_.classList.add("comb"),_.style.letterSpacing=`calc(${et}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class F extends r{constructor(n){super(n,{isRenderable:n.renderForms})}render(){const n=this.annotationStorage,c=this.data,_=c.id;let T=n.getValue(_,{value:c.exportValue===c.fieldValue}).value;typeof T=="string"&&(T=T!=="Off",n.setValue(_,{value:T})),this.container.className="buttonWidgetAnnotation checkBox";const R=document.createElement("input");return g.add(R),R.setAttribute("data-element-id",_),R.disabled=c.readOnly,this._setRequired(R,this.data.required),R.type="checkbox",R.name=c.fieldName,T&&R.setAttribute("checked",!0),R.setAttribute("exportValue",c.exportValue),R.tabIndex=d,R.addEventListener("change",B=>{const{name:z,checked:Y}=B.target;for(const H of this._getElementsByName(z,_)){const et=Y&&H.exportValue===c.exportValue;H.domElement&&(H.domElement.checked=et),n.setValue(H.id,{value:et})}n.setValue(_,{value:Y})}),R.addEventListener("resetform",B=>{const z=c.defaultFieldValue||"Off";B.target.checked=z===c.exportValue}),this.enableScripting&&this.hasJSActions&&(R.addEventListener("updatefromsandbox",B=>{const z={value(Y){Y.target.checked=Y.detail.value!=="Off",n.setValue(_,{value:Y.target.checked})}};this._dispatchEventFromSandbox(z,B)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)),this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class P extends r{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const n=this.annotationStorage,c=this.data,_=c.id;let T=n.getValue(_,{value:c.fieldValue===c.buttonValue}).value;typeof T=="string"&&(T=T!==c.buttonValue,n.setValue(_,{value:T}));const R=document.createElement("input");if(g.add(R),R.setAttribute("data-element-id",_),R.disabled=c.readOnly,this._setRequired(R,this.data.required),R.type="radio",R.name=c.fieldName,T&&R.setAttribute("checked",!0),R.tabIndex=d,R.addEventListener("change",B=>{const{name:z,checked:Y}=B.target;for(const H of this._getElementsByName(z,_))n.setValue(H.id,{value:!1});n.setValue(_,{value:Y})}),R.addEventListener("resetform",B=>{const z=c.defaultFieldValue;B.target.checked=z!=null&&z===c.buttonValue}),this.enableScripting&&this.hasJSActions){const B=c.buttonValue;R.addEventListener("updatefromsandbox",z=>{const Y={value:H=>{const et=B===H.detail.value;for(const J of this._getElementsByName(H.target.name)){const nt=et&&J.id===_;J.domElement&&(J.domElement.checked=nt),n.setValue(J.id,{value:nt})}}};this._dispatchEventFromSandbox(Y,z)}),this._setEventListeners(R,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)}return this._setBackgroundColor(R),this._setDefaultPropertiesFromJS(R),this.container.append(R),this.container}}class v extends m{constructor(n){super(n,{ignoreBorder:n.data.hasAppearance})}render(){const n=super.render();n.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(n.title=this.data.alternativeText);const c=n.lastChild;return this.enableScripting&&this.hasJSActions&&c&&(this._setDefaultPropertiesFromJS(c),c.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),n}}class a extends r{constructor(n){super(n,{isRenderable:n.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const n=this.annotationStorage,c=this.data.id,_=n.getValue(c,{value:this.data.fieldValue}),T=document.createElement("select");g.add(T),T.setAttribute("data-element-id",c),T.disabled=this.data.readOnly,this._setRequired(T,this.data.required),T.name=this.data.fieldName,T.tabIndex=d;let R=this.data.combo&&this.data.options.length>0;this.data.combo||(T.size=this.data.options.length,this.data.multiSelect&&(T.multiple=!0)),T.addEventListener("resetform",H=>{const et=this.data.defaultFieldValue;for(const J of T.options)J.selected=J.value===et});for(const H of this.data.options){const et=document.createElement("option");et.textContent=H.displayValue,et.value=H.exportValue,_.value.includes(H.exportValue)&&(et.setAttribute("selected",!0),R=!1),T.append(et)}let B=null;if(R){const H=document.createElement("option");H.value=" ",H.setAttribute("hidden",!0),H.setAttribute("selected",!0),T.prepend(H),B=()=>{H.remove(),T.removeEventListener("input",B),B=null},T.addEventListener("input",B)}const z=(H,et)=>{const J=et?"value":"textContent",nt=H.target.options;return H.target.multiple?Array.prototype.filter.call(nt,ht=>ht.selected).map(ht=>ht[J]):nt.selectedIndex===-1?null:nt[nt.selectedIndex][J]},Y=H=>{const et=H.target.options;return Array.prototype.map.call(et,J=>({displayValue:J.textContent,exportValue:J.value}))};return this.enableScripting&&this.hasJSActions?(T.addEventListener("updatefromsandbox",H=>{const et={value(J){B==null||B();const nt=J.detail.value,ht=new Set(Array.isArray(nt)?nt:[nt]);for(const _t of T.options)_t.selected=ht.has(_t.value);n.setValue(c,{value:z(J,!0)})},multipleSelection(J){T.multiple=!0},remove(J){const nt=T.options,ht=J.detail.remove;nt[ht].selected=!1,T.remove(ht),nt.length>0&&Array.prototype.findIndex.call(nt,vt=>vt.selected)===-1&&(nt[0].selected=!0),n.setValue(c,{value:z(J,!0),items:Y(J)})},clear(J){for(;T.length!==0;)T.remove(0);n.setValue(c,{value:null,items:[]})},insert(J){const{index:nt,displayValue:ht,exportValue:_t}=J.detail.insert,vt=T.children[nt],Z=document.createElement("option");Z.textContent=ht,Z.value=_t,vt?vt.before(Z):T.append(Z),n.setValue(c,{value:z(J,!0),items:Y(J)})},items(J){const{items:nt}=J.detail;for(;T.length!==0;)T.remove(0);for(const ht of nt){const{displayValue:_t,exportValue:vt}=ht,Z=document.createElement("option");Z.textContent=_t,Z.value=vt,T.append(Z)}T.options.length>0&&(T.options[0].selected=!0),n.setValue(c,{value:z(J,!0),items:Y(J)})},indices(J){const nt=new Set(J.detail.indices);for(const ht of J.target.options)ht.selected=nt.has(ht.index);n.setValue(c,{value:z(J,!0)})},editable(J){J.target.disabled=!J.detail.editable}};this._dispatchEventFromSandbox(et,H)}),T.addEventListener("input",H=>{var nt;const et=z(H,!0),J=z(H,!1);n.setValue(c,{value:et}),(nt=this.linkService.eventBus)==null||nt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:c,name:"Keystroke",value:J,changeEx:et,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(T,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],H=>H.target.checked)):T.addEventListener("input",function(H){n.setValue(c,{value:z(H,!0)})}),this.data.combo&&this._setTextStyle(T),this._setBackgroundColor(T),this._setDefaultPropertiesFromJS(T),this.container.append(T),this.container}}class h extends k{constructor(n){var _,T,R;const c=!!(((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c})}render(){const n=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",n.includes(this.data.parentType))return this.container;const c=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(c);if(_.length===0)return this.container;const T=new C({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),R=this.page,B=e.Util.normalizeRect([this.data.parentRect[0],R.view[3]-this.data.parentRect[1]+R.view[1],this.data.parentRect[2],R.view[3]-this.data.parentRect[3]+R.view[1]]),z=B[0]+this.data.parentRect[2]-this.data.parentRect[0],Y=B[1],[H,et,J,nt]=this.viewport.viewBox,ht=J-H,_t=nt-et;return this.container.style.left=`${100*(z-H)/ht}%`,this.container.style.top=`${100*(Y-et)/_t}%`,this.container.append(T.render()),this.container}}class C{constructor(n){this.container=n.container,this.trigger=n.trigger,this.color=n.color,this.titleObj=n.titleObj,this.modificationDate=n.modificationDate,this.contentsObj=n.contentsObj,this.richText=n.richText,this.hideWrapper=n.hideWrapper||!1,this.pinned=!1}render(){var z,Y;const c=document.createElement("div");c.className="popupWrapper",this.hideElement=this.hideWrapper?c:this.container,this.hideElement.hidden=!0;const _=document.createElement("div");_.className="popup";const T=this.color;if(T){const H=.7*(255-T[0])+T[0],et=.7*(255-T[1])+T[1],J=.7*(255-T[2])+T[2];_.style.backgroundColor=e.Util.makeHexColor(H|0,et|0,J|0)}const R=document.createElement("h1");R.dir=this.titleObj.dir,R.textContent=this.titleObj.str,_.append(R);const B=u.PDFDateString.toDateObject(this.modificationDate);if(B){const H=document.createElement("span");H.className="popupDate",H.textContent="{{date}}, {{time}}",H.dataset.l10nId="annotation_date_string",H.dataset.l10nArgs=JSON.stringify({date:B.toLocaleDateString(),time:B.toLocaleTimeString()}),_.append(H)}if(((z=this.richText)==null?void 0:z.str)&&(!((Y=this.contentsObj)!=null&&Y.str)||this.contentsObj.str===this.richText.str))S.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{const H=this._formatContents(this.contentsObj);_.append(H)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const H of this.trigger)H.addEventListener("click",this._toggle.bind(this)),H.addEventListener("mouseover",this._show.bind(this,!1)),H.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),c.append(_),c}_formatContents({str:n,dir:c}){const _=document.createElement("p");_.className="popupContent",_.dir=c;const T=n.split(/(?:\r\n?|\n)/);for(let R=0,B=T.length;R<B;++R){const z=T[R];_.append(document.createTextNode(z)),R<B-1&&_.append(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(n=!1){n&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(n=!0){n&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class D extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const n=this.data,{width:c,height:_}=E(n.rect),T=this.svgFactory.create(c,_,!0),R=this.svgFactory.createElement("svg:line");return R.setAttribute("x1",n.rect[2]-n.lineCoordinates[0]),R.setAttribute("y1",n.rect[3]-n.lineCoordinates[1]),R.setAttribute("x2",n.rect[2]-n.lineCoordinates[2]),R.setAttribute("y2",n.rect[3]-n.lineCoordinates[3]),R.setAttribute("stroke-width",n.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),T.append(R),this.container.append(T),this._createPopup(R,n),this.container}}class L extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const n=this.data,{width:c,height:_}=E(n.rect),T=this.svgFactory.create(c,_,!0),R=n.borderStyle.width,B=this.svgFactory.createElement("svg:rect");return B.setAttribute("x",R/2),B.setAttribute("y",R/2),B.setAttribute("width",c-R),B.setAttribute("height",_-R),B.setAttribute("stroke-width",R||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),T.append(B),this.container.append(T),this._createPopup(B,n),this.container}}class W extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const n=this.data,{width:c,height:_}=E(n.rect),T=this.svgFactory.create(c,_,!0),R=n.borderStyle.width,B=this.svgFactory.createElement("svg:ellipse");return B.setAttribute("cx",c/2),B.setAttribute("cy",_/2),B.setAttribute("rx",c/2-R/2),B.setAttribute("ry",_/2-R/2),B.setAttribute("stroke-width",R||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),T.append(B),this.container.append(T),this._createPopup(B,n),this.container}}class tt extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:c,height:_}=E(n.rect),T=this.svgFactory.create(c,_,!0);let R=[];for(const z of n.vertices){const Y=z.x-n.rect[0],H=n.rect[3]-z.y;R.push(Y+","+H)}R=R.join(" ");const B=this.svgFactory.createElement(this.svgElementName);return B.setAttribute("points",R),B.setAttribute("stroke-width",n.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),T.append(B),this.container.append(T),this._createPopup(B,n),this.container}}class $ extends tt{constructor(n){super(n),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class N extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class G extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const n=this.data,{width:c,height:_}=E(n.rect),T=this.svgFactory.create(c,_,!0);for(const R of n.inkLists){let B=[];for(const Y of R){const H=Y.x-n.rect[0],et=n.rect[3]-Y.y;B.push(`${H},${et}`)}B=B.join(" ");const z=this.svgFactory.createElement(this.svgElementName);z.setAttribute("points",B),z.setAttribute("stroke-width",n.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),this._createPopup(z,n),T.append(z)}return this.container.append(T),this.container}}class M extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class q extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class U extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class rt extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class at extends k{constructor(n){var _,T,R;const c=!!(n.data.hasPopup||((_=n.data.titleObj)==null?void 0:_.str)||((T=n.data.contentsObj)==null?void 0:T.str)||((R=n.data.richText)==null?void 0:R.str));super(n,{isRenderable:c,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class lt extends k{constructor(n){var T;super(n,{isRenderable:!0});const{filename:c,content:_}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(c),this.content=_,(T=this.linkService.eventBus)==null||T.dispatch("fileattachmentannotation",{source:this,filename:c,content:_})}render(){var c,_;this.container.className="fileAttachmentAnnotation";const n=document.createElement("div");return n.className="popupTriggerArea",n.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(((c=this.data.titleObj)==null?void 0:c.str)||((_=this.data.contentsObj)==null?void 0:_.str)||this.data.richText)&&this._createPopup(n,this.data),this.container.append(n),this.container}_download(){var n;(n=this.downloadManager)==null||n.openOrDownloadData(this.container,this.content,this.filename)}}class mt{static render(n){const{annotations:c,div:_,viewport:T}=n;ct(this,ut,we).call(this,_,T);const R=[],B=[];for(const z of c){if(!z)continue;if(z.annotationType===e.AnnotationType.POPUP){B.push(z);continue}const{width:Y,height:H}=E(z.rect);Y<=0||H<=0||R.push(z)}B.length&&R.push(...B);for(const z of R){const Y=A.create({data:z,layer:_,page:n.page,viewport:T,linkService:n.linkService,downloadManager:n.downloadManager,imageResourcesPath:n.imageResourcesPath||"",renderForms:n.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:n.annotationStorage||new x.AnnotationStorage,enableScripting:n.enableScripting,hasJSActions:n.hasJSActions,fieldObjects:n.fieldObjects,mouseState:n.mouseState||{isDown:!1}});if(Y.isRenderable){const H=Y.render();if(z.hidden&&(H.style.visibility="hidden"),Array.isArray(H))for(const et of H)_.append(et);else Y instanceof h?_.prepend(H):_.append(H)}}ct(this,y,Ee).call(this,_,n.annotationCanvasMap)}static update(n){const{annotationCanvasMap:c,div:_,viewport:T}=n;ct(this,ut,we).call(this,_,T),ct(this,y,Ee).call(this,_,c),_.hidden=!1}}ut=new WeakSet,we=function(n,{width:c,height:_,rotation:T}){const{style:R}=n,B=T%180!==0,z=Math.floor(c)+"px",Y=Math.floor(_)+"px";R.width=B?Y:z,R.height=B?z:Y,n.setAttribute("data-main-rotation",T)},y=new WeakSet,Ee=function(n,c){if(!!c){for(const[_,T]of c){const R=n.querySelector(`[data-annotation-id="${_}"]`);if(!R)continue;const{firstChild:B}=R;B?B.nodeName==="CANVAS"?B.replaceWith(T):B.before(T):R.append(T)}c.clear()}},ot(mt,ut),ot(mt,y),t.AnnotationLayer=mt},(b,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function i(u){return Math.floor(Math.max(0,Math.min(1,u))*255).toString(16).padStart(2,"0")}class e{static CMYK_G([x,p,S,d]){return["G",1-Math.min(1,.3*x+.59*S+.11*p+d)]}static G_CMYK([x]){return["CMYK",0,0,0,1-x]}static G_RGB([x]){return["RGB",x,x,x]}static G_HTML([x]){const p=i(x);return`#${p}${p}${p}`}static RGB_G([x,p,S]){return["G",.3*x+.59*p+.11*S]}static RGB_HTML([x,p,S]){const d=i(x),o=i(p),g=i(S);return`#${d}${o}${g}`}static T_HTML(){return"#00000000"}static CMYK_RGB([x,p,S,d]){return["RGB",1-Math.min(1,x+d),1-Math.min(1,S+d),1-Math.min(1,p+d)]}static CMYK_HTML(x){const p=this.CMYK_RGB(x).slice(1);return this.RGB_HTML(p)}static RGB_CMYK([x,p,S]){const d=1-x,o=1-p,g=1-S,E=Math.min(d,o,g);return["CMYK",d,o,g,E]}}t.ColorConverters=e},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var e=i(20);class u{static setupStorage(p,S,d,o,g){const E=o.getValue(S,{value:null});switch(d.name){case"textarea":if(E.value!==null&&(p.textContent=E.value),g==="print")break;p.addEventListener("input",A=>{o.setValue(S,{value:A.target.value})});break;case"input":if(d.attributes.type==="radio"||d.attributes.type==="checkbox"){if(E.value===d.attributes.xfaOn?p.setAttribute("checked",!0):E.value===d.attributes.xfaOff&&p.removeAttribute("checked"),g==="print")break;p.addEventListener("change",A=>{o.setValue(S,{value:A.target.checked?A.target.getAttribute("xfaOn"):A.target.getAttribute("xfaOff")})})}else{if(E.value!==null&&p.setAttribute("value",E.value),g==="print")break;p.addEventListener("input",A=>{o.setValue(S,{value:A.target.value})})}break;case"select":if(E.value!==null)for(const A of d.children)A.attributes.value===E.value&&(A.attributes.selected=!0);p.addEventListener("input",A=>{const k=A.target.options,m=k.selectedIndex===-1?"":k[k.selectedIndex].value;o.setValue(S,{value:m})});break}}static setAttributes({html:p,element:S,storage:d=null,intent:o,linkService:g}){const{attributes:E}=S,A=p instanceof HTMLAnchorElement;E.type==="radio"&&(E.name=`${E.name}-${o}`);for(const[k,m]of Object.entries(E))if(m!=null)switch(k){case"class":m.length&&p.setAttribute(k,m.join(" "));break;case"dataId":break;case"id":p.setAttribute("data-element-id",m);break;case"style":Object.assign(p.style,m);break;case"textContent":p.textContent=m;break;default:(!A||k!=="href"&&k!=="newWindow")&&p.setAttribute(k,m)}A&&g.addLinkAttributes(p,E.href,E.newWindow),d&&E.dataId&&this.setupStorage(p,E.dataId,S,d)}static render(p){var s;const S=p.annotationStorage,d=p.linkService,o=p.xfaHtml,g=p.intent||"display",E=document.createElement(o.name);o.attributes&&this.setAttributes({html:E,element:o,intent:g,linkService:d});const A=[[o,-1,E]],k=p.div;if(k.append(E),p.viewport){const r=`matrix(${p.viewport.transform.join(",")})`;k.style.transform=r}g!=="richText"&&k.setAttribute("class","xfaLayer xfaFont");const m=[];for(;A.length>0;){const[r,l,F]=A.at(-1);if(l+1===r.children.length){A.pop();continue}const P=r.children[++A.at(-1)[1]];if(P===null)continue;const{name:v}=P;if(v==="#text"){const h=document.createTextNode(P.value);m.push(h),F.append(h);continue}let a;if((s=P==null?void 0:P.attributes)!=null&&s.xmlns?a=document.createElementNS(P.attributes.xmlns,v):a=document.createElement(v),F.append(a),P.attributes&&this.setAttributes({html:a,element:P,storage:S,intent:g,linkService:d}),P.children&&P.children.length>0)A.push([P,-1,a]);else if(P.value){const h=document.createTextNode(P.value);e.XfaText.shouldBuildText(v)&&m.push(h),a.append(h)}}for(const r of k.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:m}}static update(p){const S=`matrix(${p.viewport.transform.join(",")})`;p.div.style.transform=S,p.div.hidden=!1}}t.XfaLayer=u},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=F;var e=i(1),u=i(4);const x=1e5,p=30,S=.8,d=new Map,o=/^\s+$/g;function g(P,v){const a=d.get(P);if(a)return a;v.save(),v.font=`${p}px ${P}`;const h=v.measureText("");let C=h.fontBoundingBoxAscent,D=Math.abs(h.fontBoundingBoxDescent);if(C){v.restore();const L=C/(C+D);return d.set(P,L),L}v.strokeStyle="red",v.clearRect(0,0,p,p),v.strokeText("g",0,0);let I=v.getImageData(0,0,p,p).data;D=0;for(let L=I.length-1-3;L>=0;L-=4)if(I[L]>0){D=Math.ceil(L/4/p);break}v.clearRect(0,0,p,p),v.strokeText("A",0,p),I=v.getImageData(0,0,p,p).data,C=0;for(let L=0,W=I.length;L<W;L+=4)if(I[L]>0){C=p-Math.floor(L/4/p);break}if(v.restore(),C){const L=C/(C+D);return d.set(P,L),L}return d.set(P,S),S}function E(P,v,a,h){const C=document.createElement("span"),D=P._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:v.str!=="",hasEOL:v.hasEOL,fontSize:0};P._textDivs.push(C);const I=e.Util.transform(P._viewport.transform,v.transform);let L=Math.atan2(I[1],I[0]);const W=a[v.fontName];W.vertical&&(L+=Math.PI/2);const tt=Math.hypot(I[2],I[3]),$=tt*g(W.fontFamily,h);let N,G;L===0?(N=I[4],G=I[5]-$):(N=I[4]+$*Math.sin(L),G=I[5]-$*Math.cos(L)),C.style.left=`${N}px`,C.style.top=`${G}px`,C.style.fontSize=`${tt}px`,C.style.fontFamily=W.fontFamily,D.fontSize=tt,C.setAttribute("role","presentation"),C.textContent=v.str,C.dir=v.dir,P._fontInspectorEnabled&&(C.dataset.fontName=v.fontName),L!==0&&(D.angle=L*(180/Math.PI));let M=!1;if(v.str.length>1||P._enhanceTextSelection&&o.test(v.str))M=!0;else if(v.str!==" "&&v.transform[0]!==v.transform[3]){const q=Math.abs(v.transform[0]),U=Math.abs(v.transform[3]);q!==U&&Math.max(q,U)/Math.min(q,U)>1.5&&(M=!0)}if(M&&(W.vertical?D.canvasWidth=v.height*P._viewport.scale:D.canvasWidth=v.width*P._viewport.scale),P._textDivProperties.set(C,D),P._textContentStream&&P._layoutText(C),P._enhanceTextSelection&&D.hasText){let q=1,U=0;L!==0&&(q=Math.cos(L),U=Math.sin(L));const rt=(W.vertical?v.height:v.width)*P._viewport.scale,at=tt;let lt,mt;L!==0?(lt=[q,U,-U,q,N,G],mt=e.Util.getAxialAlignedBoundingBox([0,0,rt,at],lt)):mt=[N,G,N+rt,G+at],P._bounds.push({left:mt[0],top:mt[1],right:mt[2],bottom:mt[3],div:C,size:[rt,at],m:lt})}}function A(P){if(P._canceled)return;const v=P._textDivs,a=P._capability,h=v.length;if(h>x){P._renderingDone=!0,a.resolve();return}if(!P._textContentStream)for(let C=0;C<h;C++)P._layoutText(v[C]);P._renderingDone=!0,a.resolve()}function k(P,v,a){let h=0;for(let C=0;C<a;C++){const D=P[v++];D>0&&(h=h?Math.min(D,h):D)}return h}function m(P){const v=P._bounds,a=P._viewport,h=s(a.width,a.height,v);for(let C=0;C<h.length;C++){const D=v[C].div,I=P._textDivProperties.get(D);if(I.angle===0){I.paddingLeft=v[C].left-h[C].left,I.paddingTop=v[C].top-h[C].top,I.paddingRight=h[C].right-v[C].right,I.paddingBottom=h[C].bottom-v[C].bottom,P._textDivProperties.set(D,I);continue}const L=h[C],W=v[C],tt=W.m,$=tt[0],N=tt[1],G=[[0,0],[0,W.size[1]],[W.size[0],0],W.size],M=new Float64Array(64);for(let U=0,rt=G.length;U<rt;U++){const at=e.Util.applyTransform(G[U],tt);M[U+0]=$&&(L.left-at[0])/$,M[U+4]=N&&(L.top-at[1])/N,M[U+8]=$&&(L.right-at[0])/$,M[U+12]=N&&(L.bottom-at[1])/N,M[U+16]=N&&(L.left-at[0])/-N,M[U+20]=$&&(L.top-at[1])/$,M[U+24]=N&&(L.right-at[0])/-N,M[U+28]=$&&(L.bottom-at[1])/$,M[U+32]=$&&(L.left-at[0])/-$,M[U+36]=N&&(L.top-at[1])/-N,M[U+40]=$&&(L.right-at[0])/-$,M[U+44]=N&&(L.bottom-at[1])/-N,M[U+48]=N&&(L.left-at[0])/N,M[U+52]=$&&(L.top-at[1])/-$,M[U+56]=N&&(L.right-at[0])/N,M[U+60]=$&&(L.bottom-at[1])/-$}const q=1+Math.min(Math.abs($),Math.abs(N));I.paddingLeft=k(M,32,16)/q,I.paddingTop=k(M,48,16)/q,I.paddingRight=k(M,0,16)/q,I.paddingBottom=k(M,16,16)/q,P._textDivProperties.set(D,I)}}function s(P,v,a){const h=a.map(function(D,I){return{x1:D.left,y1:D.top,x2:D.right,y2:D.bottom,index:I,x1New:void 0,x2New:void 0}});r(P,h);const C=new Array(a.length);for(const D of h){const I=D.index;C[I]={left:D.x1New,top:0,right:D.x2New,bottom:0}}a.map(function(D,I){const L=C[I],W=h[I];W.x1=D.top,W.y1=P-L.right,W.x2=D.bottom,W.y2=P-L.left,W.index=I,W.x1New=void 0,W.x2New=void 0}),r(v,h);for(const D of h){const I=D.index;C[I].top=D.x1New,C[I].bottom=D.x2New}return C}function r(P,v){v.sort(function(C,D){return C.x1-D.x1||C.index-D.index});const h=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const C of v){let D=0;for(;D<h.length&&h[D].end<=C.y1;)D++;let I=h.length-1;for(;I>=0&&h[I].start>=C.y2;)I--;let L,W,tt,$,N=-1/0;for(tt=D;tt<=I;tt++){L=h[tt],W=L.boundary;let q;W.x2>C.x1?q=W.index>C.index?W.x1New:C.x1:W.x2New===void 0?q=(W.x2+C.x1)/2:q=W.x2New,q>N&&(N=q)}for(C.x1New=N,tt=D;tt<=I;tt++)L=h[tt],W=L.boundary,W.x2New===void 0?W.x2>C.x1?W.index>C.index&&(W.x2New=W.x2):W.x2New=N:W.x2New>N&&(W.x2New=Math.max(N,W.x2));const G=[];let M=null;for(tt=D;tt<=I;tt++){L=h[tt],W=L.boundary;const q=W.x2>C.x2?W:C;M===q?G.at(-1).end=L.end:(G.push({start:L.start,end:L.end,boundary:q}),M=q)}for(h[D].start<C.y1&&(G[0].start=C.y1,G.unshift({start:h[D].start,end:C.y1,boundary:h[D].boundary})),C.y2<h[I].end&&(G.at(-1).end=C.y2,G.push({start:C.y2,end:h[I].end,boundary:h[I].boundary})),tt=D;tt<=I;tt++){if(L=h[tt],W=L.boundary,W.x2New!==void 0)continue;let q=!1;for($=D-1;!q&&$>=0&&h[$].start>=W.y1;$--)q=h[$].boundary===W;for($=I+1;!q&&$<h.length&&h[$].end<=W.y2;$++)q=h[$].boundary===W;for($=0;!q&&$<G.length;$++)q=G[$].boundary===W;q||(W.x2New=N)}Array.prototype.splice.apply(h,[D,I-D+1,...G])}for(const C of h){const D=C.boundary;D.x2New===void 0&&(D.x2New=Math.max(P,D.x2))}}class l{constructor({textContent:v,textContentStream:a,container:h,viewport:C,textDivs:D,textContentItemsStr:I,enhanceTextSelection:L}){var W;L&&(0,u.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=v,this._textContentStream=a,this._container=h,this._document=h.ownerDocument,this._viewport=C,this._textDivs=D||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!L,this._fontInspectorEnabled=!!((W=globalThis.FontInspector)!=null&&W.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,e.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new e.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(v,a){for(let h=0,C=v.length;h<C;h++){if(v[h].str===void 0){if(v[h].type==="beginMarkedContentProps"||v[h].type==="beginMarkedContent"){const D=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),v[h].id!==null&&this._container.setAttribute("id",`${v[h].id}`),D.append(this._container)}else v[h].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(v[h].str),E(this,v[h],a,this._layoutTextCtx)}}_layoutText(v){const a=this._textDivProperties.get(v);let h="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:C}=v.style,{fontSize:D}=a;(D!==this._layoutTextLastFontSize||C!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${D*this._devicePixelRatio}px ${C}`,this._layoutTextLastFontSize=D,this._layoutTextLastFontFamily=C);const{width:I}=this._layoutTextCtx.measureText(v.textContent);if(I>0){const L=this._devicePixelRatio*a.canvasWidth/I;this._enhanceTextSelection&&(a.scale=L),h=`scaleX(${L})`}}if(a.angle!==0&&(h=`rotate(${a.angle}deg) ${h}`),h.length>0&&(this._enhanceTextSelection&&(a.originalTransform=h),v.style.transform=h),a.hasText&&this._container.append(v),a.hasEOL){const C=document.createElement("br");C.setAttribute("role","presentation"),this._container.append(C)}}_render(v=0){const a=(0,e.createPromiseCapability)();let h=Object.create(null);const C=this._document.createElement("canvas");if(C.height=C.width=p,this._layoutTextCtx=C.getContext("2d",{alpha:!1}),this._textContent){const D=this._textContent.items,I=this._textContent.styles;this._processItems(D,I),a.resolve()}else if(this._textContentStream){const D=()=>{this._reader.read().then(({value:I,done:L})=>{if(L){a.resolve();return}Object.assign(h,I.styles),this._processItems(I.items,h),D()},a.reject)};this._reader=this._textContentStream.getReader(),D()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');a.promise.then(()=>{h=null,v?this._renderTimer=setTimeout(()=>{A(this),this._renderTimer=null},v):A(this)},this._capability.reject)}expandTextDivs(v=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(m(this),this._bounds=null);const a=[],h=[];for(let C=0,D=this._textDivs.length;C<D;C++){const I=this._textDivs[C],L=this._textDivProperties.get(I);!L.hasText||(v?(a.length=0,h.length=0,L.originalTransform&&a.push(L.originalTransform),L.paddingTop>0?(h.push(`${L.paddingTop}px`),a.push(`translateY(${-L.paddingTop}px)`)):h.push(0),L.paddingRight>0?h.push(`${L.paddingRight/L.scale}px`):h.push(0),L.paddingBottom>0?h.push(`${L.paddingBottom}px`):h.push(0),L.paddingLeft>0?(h.push(`${L.paddingLeft/L.scale}px`),a.push(`translateX(${-L.paddingLeft/L.scale}px)`)):h.push(0),I.style.padding=h.join(" "),a.length&&(I.style.transform=a.join(" "))):(I.style.padding=null,I.style.transform=L.originalTransform))}}}t.TextLayerRenderTask=l;function F(P){const v=new l({textContent:P.textContent,textContentStream:P.textContentStream,container:P.container,viewport:P.viewport,textDivs:P.textDivs,textContentItemsStr:P.textContentItemsStr,enhanceTextSelection:P.enhanceTextSelection});return v._render(P.timeout),v}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var e=i(4),u=i(1),x=i(3);let p=class{constructor(){(0,u.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=p;{let s=function(a){let h=[];const C=[];for(const D of a){if(D.fn==="save"){h.push({fnId:92,fn:"group",items:[]}),C.push(h),h=h.at(-1).items;continue}D.fn==="restore"?h=C.pop():h.push(D)}return h},r=function(a){if(Number.isInteger(a))return a.toString();const h=a.toFixed(10);let C=h.length-1;if(h[C]!=="0")return h;do C--;while(h[C]==="0");return h.substring(0,h[C]==="."?C:C+1)},l=function(a){if(a[4]===0&&a[5]===0){if(a[1]===0&&a[2]===0)return a[0]===1&&a[3]===1?"":`scale(${r(a[0])} ${r(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){const h=Math.acos(a[0])*180/Math.PI;return`rotate(${r(h)})`}}else if(a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1)return`translate(${r(a[4])} ${r(a[5])})`;return`matrix(${r(a[0])} ${r(a[1])} ${r(a[2])} ${r(a[3])} ${r(a[4])} ${r(a[5])})`};const S={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",o="http://www.w3.org/1999/xlink",g=["butt","round","square"],E=["miter","round","bevel"],A=function(a,h="",C=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!C)return URL.createObjectURL(new Blob([a],{type:h}));const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I=`data:${h};base64,`;for(let L=0,W=a.length;L<W;L+=3){const tt=a[L]&255,$=a[L+1]&255,N=a[L+2]&255,G=tt>>2,M=(tt&3)<<4|$>>4,q=L+1<W?($&15)<<2|N>>6:64,U=L+2<W?N&63:64;I+=D[G]+D[M]+D[q]+D[U]}return I},k=function(){const a=new Uint8Array([137,80,78,71,13,10,26,10]),h=12,C=new Int32Array(256);for(let N=0;N<256;N++){let G=N;for(let M=0;M<8;M++)G&1?G=3988292384^G>>1&2147483647:G=G>>1&2147483647;C[N]=G}function D(N,G,M){let q=-1;for(let U=G;U<M;U++){const rt=(q^N[U])&255,at=C[rt];q=q>>>8^at}return q^-1}function I(N,G,M,q){let U=q;const rt=G.length;M[U]=rt>>24&255,M[U+1]=rt>>16&255,M[U+2]=rt>>8&255,M[U+3]=rt&255,U+=4,M[U]=N.charCodeAt(0)&255,M[U+1]=N.charCodeAt(1)&255,M[U+2]=N.charCodeAt(2)&255,M[U+3]=N.charCodeAt(3)&255,U+=4,M.set(G,U),U+=G.length;const at=D(M,q+4,U);M[U]=at>>24&255,M[U+1]=at>>16&255,M[U+2]=at>>8&255,M[U+3]=at&255}function L(N,G,M){let q=1,U=0;for(let rt=G;rt<M;++rt)q=(q+(N[rt]&255))%65521,U=(U+q)%65521;return U<<16|q}function W(N){if(!x.isNodeJS)return tt(N);try{let G;parseInt(process.versions.node)>=8?G=N:G=Buffer.from(N);const M=require$$5.deflateSync(G,{level:9});return M instanceof Uint8Array?M:new Uint8Array(M)}catch(G){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+G)}return tt(N)}function tt(N){let G=N.length;const M=65535,q=Math.ceil(G/M),U=new Uint8Array(2+G+q*5+4);let rt=0;U[rt++]=120,U[rt++]=156;let at=0;for(;G>M;)U[rt++]=0,U[rt++]=255,U[rt++]=255,U[rt++]=0,U[rt++]=0,U.set(N.subarray(at,at+M),rt),rt+=M,at+=M,G-=M;U[rt++]=1,U[rt++]=G&255,U[rt++]=G>>8&255,U[rt++]=~G&65535&255,U[rt++]=(~G&65535)>>8&255,U.set(N.subarray(at),rt),rt+=N.length-at;const lt=L(N,0,N.length);return U[rt++]=lt>>24&255,U[rt++]=lt>>16&255,U[rt++]=lt>>8&255,U[rt++]=lt&255,U}function $(N,G,M,q){const U=N.width,rt=N.height;let at,lt,mt;const ut=N.data;switch(G){case u.ImageKind.GRAYSCALE_1BPP:lt=0,at=1,mt=U+7>>3;break;case u.ImageKind.RGB_24BPP:lt=2,at=8,mt=U*3;break;case u.ImageKind.RGBA_32BPP:lt=6,at=8,mt=U*4;break;default:throw new Error("invalid format")}const j=new Uint8Array((1+mt)*rt);let y=0,f=0;for(let R=0;R<rt;++R)j[y++]=0,j.set(ut.subarray(f,f+mt),y),f+=mt,y+=mt;if(G===u.ImageKind.GRAYSCALE_1BPP&&q){y=0;for(let R=0;R<rt;R++){y++;for(let B=0;B<mt;B++)j[y++]^=255}}const w=new Uint8Array([U>>24&255,U>>16&255,U>>8&255,U&255,rt>>24&255,rt>>16&255,rt>>8&255,rt&255,at,lt,0,0,0]),n=W(j),c=a.length+h*3+w.length+n.length,_=new Uint8Array(c);let T=0;return _.set(a,T),T+=a.length,I("IHDR",w,_,T),T+=h+w.length,I("IDATA",n,_,T),T+=h+n.length,I("IEND",new Uint8Array(0),_,T),A(_,"image/png",M)}return function(G,M,q){const U=G.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:G.kind;return $(G,U,M,q)}}();class m{constructor(){this.fontSizeScale=1,this.fontWeight=S.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=S.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(h,C){this.x=h,this.y=C}}let F=0,P=0,v=0;t.SVGGraphics=p=class{constructor(a,h,C=!1){(0,e.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new e.DOMSVGFactory,this.current=new m,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=h,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!C,this._operatorIdMapping=[];for(const D in u.OPS)this._operatorIdMapping[u.OPS[D]]=D}save(){this.transformStack.push(this.transformMatrix);const a=this.current;this.extraStack.push(a),this.current=a.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(a){this.save(),this.executeOpTree(a),this.restore()}loadDependencies(a){const h=a.fnArray,C=a.argsArray;for(let D=0,I=h.length;D<I;D++)if(h[D]===u.OPS.dependency)for(const L of C[D]){const W=L.startsWith("g_")?this.commonObjs:this.objs,tt=new Promise($=>{W.get(L,$)});this.current.dependencies.push(tt)}return Promise.all(this.current.dependencies)}transform(a,h,C,D,I,L){const W=[a,h,C,D,I,L];this.transformMatrix=u.Util.transform(this.transformMatrix,W),this.tgrp=null}getSVG(a,h){this.viewport=h;const C=this._initialize(h);return this.loadDependencies(a).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(a)),C))}convertOpList(a){const h=this._operatorIdMapping,C=a.argsArray,D=a.fnArray,I=[];for(let L=0,W=D.length;L<W;L++){const tt=D[L];I.push({fnId:tt,fn:h[tt],args:C[L]})}return s(I)}executeOpTree(a){for(const h of a){const C=h.fn,D=h.fnId,I=h.args;switch(D|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(I);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(I[0],I[1]);break;case u.OPS.setFont:this.setFont(I);break;case u.OPS.showText:this.showText(I[0]);break;case u.OPS.showSpacedText:this.showText(I[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(I[0],I[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(I[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(I[0]);break;case u.OPS.setHScale:this.setHScale(I[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(I[0],I[1],I[2],I[3],I[4],I[5]);break;case u.OPS.setTextRise:this.setTextRise(I[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(I[0]);break;case u.OPS.setLineWidth:this.setLineWidth(I[0]);break;case u.OPS.setLineJoin:this.setLineJoin(I[0]);break;case u.OPS.setLineCap:this.setLineCap(I[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(I[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(I[0],I[1],I[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(I[0],I[1],I[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(I);break;case u.OPS.setFillColorN:this.setFillColorN(I);break;case u.OPS.shadingFill:this.shadingFill(I[0]);break;case u.OPS.setDash:this.setDash(I[0],I[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(I[0]);break;case u.OPS.setFlatness:this.setFlatness(I[0]);break;case u.OPS.setGState:this.setGState(I[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(I[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(I[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(I[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(I[0],I[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(I[0],I[1],I[2],I[3],I[4],I[5]);break;case u.OPS.constructPath:this.constructPath(I[0],I[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(h.items);break;default:(0,u.warn)(`Unimplemented operator ${C}`);break}}}setWordSpacing(a){this.current.wordSpacing=a}setCharSpacing(a){this.current.charSpacing=a}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,h,C,D,I,L){const W=this.current;W.textMatrix=W.lineMatrix=[a,h,C,D,I,L],W.textMatrixScale=Math.hypot(a,h),W.x=W.lineX=0,W.y=W.lineY=0,W.xcoords=[],W.ycoords=[],W.tspan=this.svgFactory.createElement("svg:tspan"),W.tspan.setAttributeNS(null,"font-family",W.fontFamily),W.tspan.setAttributeNS(null,"font-size",`${r(W.fontSize)}px`),W.tspan.setAttributeNS(null,"y",r(-W.y)),W.txtElement=this.svgFactory.createElement("svg:text"),W.txtElement.append(W.tspan)}beginText(){const a=this.current;a.x=a.lineX=0,a.y=a.lineY=0,a.textMatrix=u.IDENTITY_MATRIX,a.lineMatrix=u.IDENTITY_MATRIX,a.textMatrixScale=1,a.tspan=this.svgFactory.createElement("svg:tspan"),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtgrp=this.svgFactory.createElement("svg:g"),a.xcoords=[],a.ycoords=[]}moveText(a,h){const C=this.current;C.x=C.lineX+=a,C.y=C.lineY+=h,C.xcoords=[],C.ycoords=[],C.tspan=this.svgFactory.createElement("svg:tspan"),C.tspan.setAttributeNS(null,"font-family",C.fontFamily),C.tspan.setAttributeNS(null,"font-size",`${r(C.fontSize)}px`),C.tspan.setAttributeNS(null,"y",r(-C.y))}showText(a){const h=this.current,C=h.font,D=h.fontSize;if(D===0)return;const I=h.fontSizeScale,L=h.charSpacing,W=h.wordSpacing,tt=h.fontDirection,$=h.textHScale*tt,N=C.vertical,G=N?1:-1,M=C.defaultVMetrics,q=D*h.fontMatrix[0];let U=0;for(const lt of a){if(lt===null){U+=tt*W;continue}else if(typeof lt=="number"){U+=G*lt*D/1e3;continue}const mt=(lt.isSpace?W:0)+L,ut=lt.fontChar;let j,y,f=lt.width;if(N){let n;const c=lt.vmetric||M;n=lt.vmetric?c[1]:f*.5,n=-n*q;const _=c[2]*q;f=c?-c[0]:f,j=n/I,y=(U+_)/I}else j=U/I,y=0;(lt.isInFont||C.missingFile)&&(h.xcoords.push(h.x+j),N&&h.ycoords.push(-h.y+y),h.tspan.textContent+=ut);let w;N?w=f*q-mt*tt:w=f*q+mt*tt,U+=w}h.tspan.setAttributeNS(null,"x",h.xcoords.map(r).join(" ")),N?h.tspan.setAttributeNS(null,"y",h.ycoords.map(r).join(" ")):h.tspan.setAttributeNS(null,"y",r(-h.y)),N?h.y-=U:h.x+=U*$,h.tspan.setAttributeNS(null,"font-family",h.fontFamily),h.tspan.setAttributeNS(null,"font-size",`${r(h.fontSize)}px`),h.fontStyle!==S.fontStyle&&h.tspan.setAttributeNS(null,"font-style",h.fontStyle),h.fontWeight!==S.fontWeight&&h.tspan.setAttributeNS(null,"font-weight",h.fontWeight);const rt=h.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(rt===u.TextRenderingMode.FILL||rt===u.TextRenderingMode.FILL_STROKE?(h.fillColor!==S.fillColor&&h.tspan.setAttributeNS(null,"fill",h.fillColor),h.fillAlpha<1&&h.tspan.setAttributeNS(null,"fill-opacity",h.fillAlpha)):h.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?h.tspan.setAttributeNS(null,"fill","transparent"):h.tspan.setAttributeNS(null,"fill","none"),rt===u.TextRenderingMode.STROKE||rt===u.TextRenderingMode.FILL_STROKE){const lt=1/(h.textMatrixScale||1);this._setStrokeAttributes(h.tspan,lt)}let at=h.textMatrix;h.textRise!==0&&(at=at.slice(),at[5]+=h.textRise),h.txtElement.setAttributeNS(null,"transform",`${l(at)} scale(${r($)}, -1)`),h.txtElement.setAttributeNS(d,"xml:space","preserve"),h.txtElement.append(h.tspan),h.txtgrp.append(h.txtElement),this._ensureTransformGroup().append(h.txtElement)}setLeadingMoveText(a,h){this.setLeading(-h),this.moveText(a,h)}addFontStyle(a){if(!a.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const h=A(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${a.loadedName}"; src: url(${h}); }
`}setFont(a){const h=this.current,C=this.commonObjs.get(a[0]);let D=a[1];h.font=C,this.embedFonts&&!C.missingFile&&!this.embeddedFonts[C.loadedName]&&(this.addFontStyle(C),this.embeddedFonts[C.loadedName]=C),h.fontMatrix=C.fontMatrix||u.FONT_IDENTITY_MATRIX;let I="normal";C.black?I="900":C.bold&&(I="bold");const L=C.italic?"italic":"normal";D<0?(D=-D,h.fontDirection=-1):h.fontDirection=1,h.fontSize=D,h.fontFamily=C.loadedName,h.fontWeight=I,h.fontStyle=L,h.tspan=this.svgFactory.createElement("svg:tspan"),h.tspan.setAttributeNS(null,"y",r(-h.y)),h.xcoords=[],h.ycoords=[]}endText(){var h;const a=this.current;a.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&((h=a.txtElement)==null?void 0:h.hasChildNodes())&&(a.element=a.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(a){a>0&&(this.current.lineWidth=a)}setLineCap(a){this.current.lineCap=g[a]}setLineJoin(a){this.current.lineJoin=E[a]}setMiterLimit(a){this.current.miterLimit=a}setStrokeAlpha(a){this.current.strokeAlpha=a}setStrokeRGBColor(a,h,C){this.current.strokeColor=u.Util.makeHexColor(a,h,C)}setFillAlpha(a){this.current.fillAlpha=a}setFillRGBColor(a,h,C){this.current.fillColor=u.Util.makeHexColor(a,h,C),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(a){this.current.strokeColor=this._makeColorN_Pattern(a)}setFillColorN(a){this.current.fillColor=this._makeColorN_Pattern(a)}shadingFill(a){const h=this.viewport.width,C=this.viewport.height,D=u.Util.inverseTransform(this.transformMatrix),I=u.Util.applyTransform([0,0],D),L=u.Util.applyTransform([0,C],D),W=u.Util.applyTransform([h,0],D),tt=u.Util.applyTransform([h,C],D),$=Math.min(I[0],L[0],W[0],tt[0]),N=Math.min(I[1],L[1],W[1],tt[1]),G=Math.max(I[0],L[0],W[0],tt[0]),M=Math.max(I[1],L[1],W[1],tt[1]),q=this.svgFactory.createElement("svg:rect");q.setAttributeNS(null,"x",$),q.setAttributeNS(null,"y",N),q.setAttributeNS(null,"width",G-$),q.setAttributeNS(null,"height",M-N),q.setAttributeNS(null,"fill",this._makeShadingPattern(a)),this.current.fillAlpha<1&&q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(q)}_makeColorN_Pattern(a){return a[0]==="TilingPattern"?this._makeTilingPattern(a):this._makeShadingPattern(a)}_makeTilingPattern(a){const h=a[1],C=a[2],D=a[3]||u.IDENTITY_MATRIX,[I,L,W,tt]=a[4],$=a[5],N=a[6],G=a[7],M=`shading${v++}`,[q,U,rt,at]=u.Util.normalizeRect([...u.Util.applyTransform([I,L],D),...u.Util.applyTransform([W,tt],D)]),[lt,mt]=u.Util.singularValueDecompose2dScale(D),ut=$*lt,j=N*mt,y=this.svgFactory.createElement("svg:pattern");y.setAttributeNS(null,"id",M),y.setAttributeNS(null,"patternUnits","userSpaceOnUse"),y.setAttributeNS(null,"width",ut),y.setAttributeNS(null,"height",j),y.setAttributeNS(null,"x",`${q}`),y.setAttributeNS(null,"y",`${U}`);const f=this.svg,w=this.transformMatrix,n=this.current.fillColor,c=this.current.strokeColor,_=this.svgFactory.create(rt-q,at-U);if(this.svg=_,this.transformMatrix=D,G===2){const T=u.Util.makeHexColor(...h);this.current.fillColor=T,this.current.strokeColor=T}return this.executeOpTree(this.convertOpList(C)),this.svg=f,this.transformMatrix=w,this.current.fillColor=n,this.current.strokeColor=c,y.append(_.childNodes[0]),this.defs.append(y),`url(#${M})`}_makeShadingPattern(a){switch(typeof a=="string"&&(a=this.objs.get(a)),a[0]){case"RadialAxial":const h=`shading${v++}`,C=a[3];let D;switch(a[1]){case"axial":const I=a[4],L=a[5];D=this.svgFactory.createElement("svg:linearGradient"),D.setAttributeNS(null,"id",h),D.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),D.setAttributeNS(null,"x1",I[0]),D.setAttributeNS(null,"y1",I[1]),D.setAttributeNS(null,"x2",L[0]),D.setAttributeNS(null,"y2",L[1]);break;case"radial":const W=a[4],tt=a[5],$=a[6],N=a[7];D=this.svgFactory.createElement("svg:radialGradient"),D.setAttributeNS(null,"id",h),D.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),D.setAttributeNS(null,"cx",tt[0]),D.setAttributeNS(null,"cy",tt[1]),D.setAttributeNS(null,"r",N),D.setAttributeNS(null,"fx",W[0]),D.setAttributeNS(null,"fy",W[1]),D.setAttributeNS(null,"fr",$);break;default:throw new Error(`Unknown RadialAxial type: ${a[1]}`)}for(const I of C){const L=this.svgFactory.createElement("svg:stop");L.setAttributeNS(null,"offset",I[0]),L.setAttributeNS(null,"stop-color",I[1]),D.append(L)}return this.defs.append(D),`url(#${h})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${a[0]}`)}}setDash(a,h){this.current.dashArray=a,this.current.dashPhase=h}constructPath(a,h){const C=this.current;let D=C.x,I=C.y,L=[],W=0;for(const tt of a)switch(tt|0){case u.OPS.rectangle:D=h[W++],I=h[W++];const $=h[W++],N=h[W++],G=D+$,M=I+N;L.push("M",r(D),r(I),"L",r(G),r(I),"L",r(G),r(M),"L",r(D),r(M),"Z");break;case u.OPS.moveTo:D=h[W++],I=h[W++],L.push("M",r(D),r(I));break;case u.OPS.lineTo:D=h[W++],I=h[W++],L.push("L",r(D),r(I));break;case u.OPS.curveTo:D=h[W+4],I=h[W+5],L.push("C",r(h[W]),r(h[W+1]),r(h[W+2]),r(h[W+3]),r(D),r(I)),W+=6;break;case u.OPS.curveTo2:L.push("C",r(D),r(I),r(h[W]),r(h[W+1]),r(h[W+2]),r(h[W+3])),D=h[W+2],I=h[W+3],W+=4;break;case u.OPS.curveTo3:D=h[W+2],I=h[W+3],L.push("C",r(h[W]),r(h[W+1]),r(D),r(I),r(D),r(I)),W+=4;break;case u.OPS.closePath:L.push("Z");break}L=L.join(" "),C.path&&a.length>0&&a[0]!==u.OPS.rectangle&&a[0]!==u.OPS.moveTo?L=C.path.getAttributeNS(null,"d")+L:(C.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(C.path)),C.path.setAttributeNS(null,"d",L),C.path.setAttributeNS(null,"fill","none"),C.element=C.path,C.setCurrentPoint(D,I)}endPath(){const a=this.current;if(a.path=null,!this.pendingClip)return;if(!a.element){this.pendingClip=null;return}const h=`clippath${F++}`,C=this.svgFactory.createElement("svg:clipPath");C.setAttributeNS(null,"id",h),C.setAttributeNS(null,"transform",l(this.transformMatrix));const D=a.element.cloneNode(!0);if(this.pendingClip==="evenodd"?D.setAttributeNS(null,"clip-rule","evenodd"):D.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,C.append(D),this.defs.append(C),a.activeClipUrl){a.clipGroup=null;for(const I of this.extraStack)I.clipGroup=null;C.setAttributeNS(null,"clip-path",a.activeClipUrl)}a.activeClipUrl=`url(#${h})`,this.tgrp=null}clip(a){this.pendingClip=a}closePath(){const a=this.current;if(a.path){const h=`${a.path.getAttributeNS(null,"d")}Z`;a.path.setAttributeNS(null,"d",h)}}setLeading(a){this.current.leading=-a}setTextRise(a){this.current.textRise=a}setTextRenderingMode(a){this.current.textRenderingMode=a}setHScale(a){this.current.textHScale=a/100}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[h,C]of a)switch(h){case"LW":this.setLineWidth(C);break;case"LC":this.setLineCap(C);break;case"LJ":this.setLineJoin(C);break;case"ML":this.setMiterLimit(C);break;case"D":this.setDash(C[0],C[1]);break;case"RI":this.setRenderingIntent(C);break;case"FL":this.setFlatness(C);break;case"Font":this.setFont(C);break;case"CA":this.setStrokeAlpha(C);break;case"ca":this.setFillAlpha(C);break;default:(0,u.warn)(`Unimplemented graphic state operator ${h}`);break}}fill(){const a=this.current;a.element&&(a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-opacity",a.fillAlpha),this.endPath())}stroke(){const a=this.current;a.element&&(this._setStrokeAttributes(a.element),a.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(a,h=1){const C=this.current;let D=C.dashArray;h!==1&&D.length>0&&(D=D.map(function(I){return h*I})),a.setAttributeNS(null,"stroke",C.strokeColor),a.setAttributeNS(null,"stroke-opacity",C.strokeAlpha),a.setAttributeNS(null,"stroke-miterlimit",r(C.miterLimit)),a.setAttributeNS(null,"stroke-linecap",C.lineCap),a.setAttributeNS(null,"stroke-linejoin",C.lineJoin),a.setAttributeNS(null,"stroke-width",r(h*C.lineWidth)+"px"),a.setAttributeNS(null,"stroke-dasharray",D.map(r).join(" ")),a.setAttributeNS(null,"stroke-dashoffset",r(h*C.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width","1px"),a.setAttributeNS(null,"height","1px"),a.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(a)}paintImageXObject(a){const h=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!h){(0,u.warn)(`Dependent image with object ID ${a} is not ready yet`);return}this.paintInlineImageXObject(h)}paintInlineImageXObject(a,h){const C=a.width,D=a.height,I=k(a,this.forceDataSchema,!!h),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",r(C)),L.setAttributeNS(null,"height",r(D)),this.current.element=L,this.clip("nonzero");const W=this.svgFactory.createElement("svg:image");W.setAttributeNS(o,"xlink:href",I),W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y",r(-D)),W.setAttributeNS(null,"width",r(C)+"px"),W.setAttributeNS(null,"height",r(D)+"px"),W.setAttributeNS(null,"transform",`scale(${r(1/C)} ${r(-1/D)})`),h?h.append(W):this._ensureTransformGroup().append(W)}paintImageMaskXObject(a){const h=this.current,C=a.width,D=a.height,I=h.fillColor;h.maskId=`mask${P++}`;const L=this.svgFactory.createElement("svg:mask");L.setAttributeNS(null,"id",h.maskId);const W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",r(C)),W.setAttributeNS(null,"height",r(D)),W.setAttributeNS(null,"fill",I),W.setAttributeNS(null,"mask",`url(#${h.maskId})`),this.defs.append(L),this._ensureTransformGroup().append(W),this.paintInlineImageXObject(a,L)}paintFormXObjectBegin(a,h){if(Array.isArray(a)&&a.length===6&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),h){const C=h[2]-h[0],D=h[3]-h[1],I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x",h[0]),I.setAttributeNS(null,"y",h[1]),I.setAttributeNS(null,"width",r(C)),I.setAttributeNS(null,"height",r(D)),this.current.element=I,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(a){const h=this.svgFactory.create(a.width,a.height),C=this.svgFactory.createElement("svg:defs");h.append(C),this.defs=C;const D=this.svgFactory.createElement("svg:g");return D.setAttributeNS(null,"transform",l(a.transform)),h.append(D),this.svg=D,h}_ensureClipGroup(){if(!this.current.clipGroup){const a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(a),this.current.clipGroup=a}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var e=i(1),u=i(33);const x=require$$5,p=require$$5,S=require$$5,d=require$$5,o=/^file:\/\/\/[a-zA-Z]:\//;function g(P){const v=d.parse(P);return v.protocol==="file:"||v.host?v:/^[a-z]:[/\\]/i.test(P)?d.parse(`file:///${P}`):(v.host||(v.protocol="file:"),v)}class E{constructor(v){this.source=v,this.url=g(v.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&v.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var v,a;return(a=(v=this._fullRequestReader)==null?void 0:v._loaded)!=null?a:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new l(this):new s(this),this._fullRequestReader}getRangeReader(v,a){if(a<=this._progressiveDataLength)return null;const h=this.isFsUrl?new F(this,v,a):new r(this,v,a);return this._rangeRequestReaders.push(h),h}cancelAllRequests(v){this._fullRequestReader&&this._fullRequestReader.cancel(v);for(const a of this._rangeRequestReaders.slice(0))a.cancel(v)}}t.PDFNodeStream=E;class A{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null;const a=v.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)(),this._headersCapability=(0,e.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=v.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new e.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class k{constructor(v){this._url=v.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,e.createPromiseCapability)();const a=v.source;this._isStreamingSupported=!a.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const v=this._readableStream.read();return v===null?(this._readCapability=(0,e.createPromiseCapability)(),this.read()):(this._loaded+=v.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(v).buffer,done:!1})}cancel(v){if(!this._readableStream){this._error(v);return}this._readableStream.destroy(v)}_error(v){this._storedError=v,this._readCapability.resolve()}_setReadableStream(v){this._readableStream=v,v.on("readable",()=>{this._readCapability.resolve()}),v.on("end",()=>{v.destroy(),this._done=!0,this._readCapability.resolve()}),v.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function m(P,v){return{protocol:P.protocol,auth:P.auth,host:P.hostname,port:P.port,path:P.path,method:"GET",headers:v}}class s extends A{constructor(v){super(v);const a=h=>{if(h.statusCode===404){const L=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=L,this._headersCapability.reject(L);return}this._headersCapability.resolve(),this._setReadableStream(h);const C=L=>this._readableStream.headers[L.toLowerCase()],{allowRangeRequests:D,suggestedLength:I}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:C,isHttp:v.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=D,this._contentLength=I||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(C)};this._request=null,this._url.protocol==="http:"?this._request=p.request(m(this._url,v.httpHeaders),a):this._request=S.request(m(this._url,v.httpHeaders),a),this._request.on("error",h=>{this._storedError=h,this._headersCapability.reject(h)}),this._request.end()}}class r extends k{constructor(v,a,h){super(v),this._httpHeaders={};for(const D in v.httpHeaders){const I=v.httpHeaders[D];typeof I>"u"||(this._httpHeaders[D]=I)}this._httpHeaders.Range=`bytes=${a}-${h-1}`;const C=D=>{if(D.statusCode===404){const I=new e.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=I;return}this._setReadableStream(D)};this._request=null,this._url.protocol==="http:"?this._request=p.request(m(this._url,this._httpHeaders),C):this._request=S.request(m(this._url,this._httpHeaders),C),this._request.on("error",D=>{this._storedError=D}),this._request.end()}}class l extends A{constructor(v){super(v);let a=decodeURIComponent(this._url.path);o.test(this._url.href)&&(a=a.replace(/^\//,"")),x.lstat(a,(h,C)=>{if(h){h.code==="ENOENT"&&(h=new e.MissingPDFException(`Missing PDF "${a}".`)),this._storedError=h,this._headersCapability.reject(h);return}this._contentLength=C.size,this._setReadableStream(x.createReadStream(a)),this._headersCapability.resolve()})}}class F extends k{constructor(v,a,h){super(v);let C=decodeURIComponent(this._url.path);o.test(this._url.href)&&(C=C.replace(/^\//,"")),this._setReadableStream(x.createReadStream(C,{start:a,end:h-1}))}}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=d,t.extractFilenameFromHeader=S,t.validateRangeRequestCapabilities=p,t.validateResponseStatus=o;var e=i(1),u=i(34),x=i(4);function p({getResponseHeader:g,isHttp:E,rangeChunkSize:A,disableRange:k}){const m={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(g("Content-Length"),10);return!Number.isInteger(s)||(m.suggestedLength=s,s<=2*A)||k||!E||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(m.allowRangeRequests=!0),m}function S(g){const E=g("Content-Disposition");if(E){let A=(0,u.getFilenameFromContentDispositionHeader)(E);if(A.includes("%"))try{A=decodeURIComponent(A)}catch{}if((0,x.isPdfFile)(A))return A}return null}function d(g,E){return g===404||g===0&&E.startsWith("file:")?new e.MissingPDFException('Missing PDF "'+E+'".'):new e.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${E}".`,g)}function o(g){return g===200||g===206}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=u;var e=i(1);function u(x){let p=!0,S=d("filename\\*","i").exec(x);if(S){S=S[1];let s=A(S);return s=unescape(s),s=k(s),s=m(s),g(s)}if(S=E(x),S){const s=m(S);return g(s)}if(S=d("filename","i").exec(x),S){S=S[1];let s=A(S);return s=m(s),g(s)}function d(s,r){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function o(s,r){if(s){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const l=new TextDecoder(s,{fatal:!0}),F=(0,e.stringToBytes)(r);r=l.decode(F),p=!1}catch{}}return r}function g(s){return p&&/[\x80-\xff]/.test(s)&&(s=o("utf-8",s),p&&(s=o("iso-8859-1",s))),s}function E(s){const r=[];let l;const F=d("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(l=F.exec(s))!==null;){let[,v,a,h]=l;if(v=parseInt(v,10),v in r){if(v===0)break;continue}r[v]=[a,h]}const P=[];for(let v=0;v<r.length&&v in r;++v){let[a,h]=r[v];h=A(h),a&&(h=unescape(h),v===0&&(h=k(h))),P.push(h)}return P.join("")}function A(s){if(s.startsWith('"')){const r=s.slice(1).split('\\"');for(let l=0;l<r.length;++l){const F=r[l].indexOf('"');F!==-1&&(r[l]=r[l].slice(0,F),r.length=l+1),r[l]=r[l].replace(/\\(.)/g,"$1")}s=r.join('"')}return s}function k(s){const r=s.indexOf("'");if(r===-1)return s;const l=s.slice(0,r),P=s.slice(r+1).replace(/^[^']*'/,"");return o(l,P)}function m(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,l,F,P){if(F==="q"||F==="Q")return P=P.replace(/_/g," "),P=P.replace(/=([0-9a-fA-F]{2})/g,function(v,a){return String.fromCharCode(parseInt(a,16))}),o(l,P);try{P=atob(P)}catch{}return o(l,P)})}return""}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var e=i(1),u=i(33);const x=200,p=206;function S(A){const k=A.response;return typeof k!="string"?k:(0,e.stringToBytes)(k).buffer}class d{constructor(k,m={}){this.url=k,this.isHttp=/^https?:/i.test(k),this.httpHeaders=this.isHttp&&m.httpHeaders||Object.create(null),this.withCredentials=m.withCredentials||!1,this.getXhr=m.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(k,m,s){const r={begin:k,end:m};for(const l in s)r[l]=s[l];return this.request(r)}requestFull(k){return this.request(k)}request(k){const m=this.getXhr(),s=this.currXhrId++,r=this.pendingRequests[s]={xhr:m};m.open("GET",this.url),m.withCredentials=this.withCredentials;for(const l in this.httpHeaders){const F=this.httpHeaders[l];typeof F>"u"||m.setRequestHeader(l,F)}return this.isHttp&&"begin"in k&&"end"in k?(m.setRequestHeader("Range",`bytes=${k.begin}-${k.end-1}`),r.expectedStatus=p):r.expectedStatus=x,m.responseType="arraybuffer",k.onError&&(m.onerror=function(l){k.onError(m.status)}),m.onreadystatechange=this.onStateChange.bind(this,s),m.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=k.onHeadersReceived,r.onDone=k.onDone,r.onError=k.onError,r.onProgress=k.onProgress,m.send(null),s}onProgress(k,m){var r;const s=this.pendingRequests[k];!s||(r=s.onProgress)==null||r.call(s,m)}onStateChange(k,m){var v,a,h;const s=this.pendingRequests[k];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(k in this.pendingRequests))return;if(delete this.pendingRequests[k],r.status===0&&this.isHttp){(v=s.onError)==null||v.call(s,r.status);return}const l=r.status||x;if(!(l===x&&s.expectedStatus===p)&&l!==s.expectedStatus){(a=s.onError)==null||a.call(s,r.status);return}const P=S(r);if(l===p){const C=r.getResponseHeader("Content-Range"),D=/bytes (\d+)-(\d+)\/(\d+)/.exec(C);s.onDone({begin:parseInt(D[1],10),chunk:P})}else P?s.onDone({begin:0,chunk:P}):(h=s.onError)==null||h.call(s,r.status)}getRequestXhr(k){return this.pendingRequests[k].xhr}isPendingRequest(k){return k in this.pendingRequests}abortRequest(k){const m=this.pendingRequests[k].xhr;delete this.pendingRequests[k],m.abort()}}class o{constructor(k){this._source=k,this._manager=new d(k.url,{httpHeaders:k.httpHeaders,withCredentials:k.withCredentials}),this._rangeChunkSize=k.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(k){const m=this._rangeRequestReaders.indexOf(k);m>=0&&this._rangeRequestReaders.splice(m,1)}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(k,m){const s=new E(this._manager,k,m);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(k){var m;(m=this._fullRequestReader)==null||m.cancel(k);for(const s of this._rangeRequestReaders.slice(0))s.cancel(k)}}t.PDFNetworkStream=o;class g{constructor(k,m){this._manager=k;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=m.url,this._fullRequestId=k.requestFull(s),this._headersReceivedCapability=(0,e.createPromiseCapability)(),this._disableRange=m.disableRange||!1,this._contentLength=m.length,this._rangeChunkSize=m.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const k=this._fullRequestId,m=this._manager.getRequestXhr(k),s=F=>m.getResponseHeader(F),{allowRangeRequests:r,suggestedLength:l}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(k),this._headersReceivedCapability.resolve()}_onDone(k){if(k&&(this._requests.length>0?this._requests.shift().resolve({value:k.chunk,done:!1}):this._cachedChunks.push(k.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(k){this._storedError=(0,u.createResponseStatusError)(k,this._url),this._headersReceivedCapability.reject(this._storedError);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(k){var m;(m=this.onProgress)==null||m.call(this,{loaded:k.loaded,total:k.lengthComputable?k.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const k=(0,e.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0,this._headersReceivedCapability.reject(k);for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class E{constructor(k,m,s){this._manager=k;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=k.url,this._requestId=k.requestRange(m,s,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var k;(k=this.onClosed)==null||k.call(this,this)}_onDone(k){const m=k.chunk;this._requests.length>0?this._requests.shift().resolve({value:m,done:!1}):this._queuedChunk=m,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(k){this._storedError=(0,u.createResponseStatusError)(k,this._url);for(const m of this._requests)m.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(k){var m;this.isStreamingSupported||(m=this.onProgress)==null||m.call(this,{loaded:k.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const m=this._queuedChunk;return this._queuedChunk=null,{value:m,done:!1}}if(this._done)return{value:void 0,done:!0};const k=(0,e.createPromiseCapability)();return this._requests.push(k),k.promise}cancel(k){this._done=!0;for(const m of this._requests)m.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(b,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var e=i(1),u=i(33);function x(g,E,A){return{method:"GET",headers:g,signal:A==null?void 0:A.signal,mode:"cors",credentials:E?"include":"same-origin",redirect:"follow"}}function p(g){const E=new Headers;for(const A in g){const k=g[A];typeof k>"u"||E.append(A,k)}return E}class S{constructor(E){this.source=E,this.isHttp=/^https?:/i.test(E.url),this.httpHeaders=this.isHttp&&E.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var E,A;return(A=(E=this._fullRequestReader)==null?void 0:E._loaded)!=null?A:0}getFullReader(){return(0,e.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new d(this),this._fullRequestReader}getRangeReader(E,A){if(A<=this._progressiveDataLength)return null;const k=new o(this,E,A);return this._rangeRequestReaders.push(k),k}cancelAllRequests(E){this._fullRequestReader&&this._fullRequestReader.cancel(E);for(const A of this._rangeRequestReaders.slice(0))A.cancel(E)}}t.PDFFetchStream=S;class d{constructor(E){this._stream=E,this._reader=null,this._loaded=0,this._filename=null;const A=E.source;this._withCredentials=A.withCredentials||!1,this._contentLength=A.length,this._headersCapability=(0,e.createPromiseCapability)(),this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._headers=p(this._stream.httpHeaders);const k=A.url;fetch(k,x(this._headers,this._withCredentials,this._abortController)).then(m=>{if(!(0,u.validateResponseStatus)(m.status))throw(0,u.createResponseStatusError)(m.status,k);this._reader=m.body.getReader(),this._headersCapability.resolve();const s=F=>m.headers.get(F),{allowRangeRequests:r,suggestedLength:l}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=l||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new e.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}class o{constructor(E,A,k){this._stream=E,this._reader=null,this._loaded=0;const m=E.source;this._withCredentials=m.withCredentials||!1,this._readCapability=(0,e.createPromiseCapability)(),this._isStreamingSupported=!m.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=p(this._stream.httpHeaders),this._headers.append("Range",`bytes=${A}-${k-1}`);const s=m.url;fetch(s,x(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,u.validateResponseStatus)(r.status))throw(0,u.createResponseStatusError)(r.status,s);this._readCapability.resolve(),this._reader=r.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:E,done:A}=await this._reader.read();return A?{value:E,done:A}:(this._loaded+=E.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(E).buffer,done:!1})}cancel(E){this._reader&&this._reader.cancel(E),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(b){var t=__webpack_module_cache__[b];if(t!==void 0)return t.exports;var i=__webpack_module_cache__[b]={exports:{}};return __webpack_modules__[b](i,i.exports,__w_pdfjs_require__),i.exports}var __webpack_exports__={};return(()=>{var b=__webpack_exports__;Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"AnnotationEditorLayer",{enumerable:!0,get:function(){return u.AnnotationEditorLayer}}),Object.defineProperty(b,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(b,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(b,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return x.AnnotationEditorUIManager}}),Object.defineProperty(b,"AnnotationLayer",{enumerable:!0,get:function(){return p.AnnotationLayer}}),Object.defineProperty(b,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(b,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(b,"GlobalWorkerOptions",{enumerable:!0,get:function(){return S.GlobalWorkerOptions}}),Object.defineProperty(b,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(b,"LoopbackPort",{enumerable:!0,get:function(){return e.LoopbackPort}}),Object.defineProperty(b,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(b,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(b,"PDFDataRangeTransport",{enumerable:!0,get:function(){return e.PDFDataRangeTransport}}),Object.defineProperty(b,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(b,"PDFWorker",{enumerable:!0,get:function(){return e.PDFWorker}}),Object.defineProperty(b,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(b,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(b,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(b,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(b,"SVGGraphics",{enumerable:!0,get:function(){return g.SVGGraphics}}),Object.defineProperty(b,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(b,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(b,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(b,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(b,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(b,"binarySearchFirstItem",{enumerable:!0,get:function(){return i.binarySearchFirstItem}}),Object.defineProperty(b,"build",{enumerable:!0,get:function(){return e.build}}),Object.defineProperty(b,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(b,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(b,"getDocument",{enumerable:!0,get:function(){return e.getDocument}}),Object.defineProperty(b,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(b,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(b,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(b,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(b,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(b,"renderTextLayer",{enumerable:!0,get:function(){return o.renderTextLayer}}),Object.defineProperty(b,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(b,"version",{enumerable:!0,get:function(){return e.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(4),e=__w_pdfjs_require__(6),u=__w_pdfjs_require__(22),x=__w_pdfjs_require__(9),p=__w_pdfjs_require__(27),S=__w_pdfjs_require__(15),d=__w_pdfjs_require__(3),o=__w_pdfjs_require__(30),g=__w_pdfjs_require__(31),E=__w_pdfjs_require__(29);if(d.isNodeJS){const{PDFNodeStream:A}=__w_pdfjs_require__(32);(0,e.setPDFNetworkStreamFactory)(k=>new A(k))}else{const{PDFNetworkStream:A}=__w_pdfjs_require__(35),{PDFFetchStream:k}=__w_pdfjs_require__(36);(0,e.setPDFNetworkStreamFactory)(m=>(0,i.isValidFetchUrl)(m.url)?new k(m):new A(m))}})(),__webpack_exports__})())})(pdf);const pdfjsWorker="/_app/immutable/assets/pdf.worker.min-0f67e971.js";var FileSaver_min={exports:{}};(function(b,t){(function(i,e){e()})(commonjsGlobal,function(){function i(o,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function e(o,g,E){var A=new XMLHttpRequest;A.open("GET",o),A.responseType="blob",A.onload=function(){d(A.response,g,E)},A.onerror=function(){console.error("could not download file")},A.send()}function u(o){var g=new XMLHttpRequest;g.open("HEAD",o,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function x(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(g)}}var p=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,S=p.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=p.saveAs||(typeof window!="object"||window!==p?function(){}:"download"in HTMLAnchorElement.prototype&&!S?function(o,g,E){var A=p.URL||p.webkitURL,k=document.createElement("a");g=g||o.name||"download",k.download=g,k.rel="noopener",typeof o=="string"?(k.href=o,k.origin===location.origin?x(k):u(k.href)?e(o,g,E):x(k,k.target="_blank")):(k.href=A.createObjectURL(o),setTimeout(function(){A.revokeObjectURL(k.href)},4e4),setTimeout(function(){x(k)},0))}:"msSaveOrOpenBlob"in navigator?function(o,g,E){if(g=g||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(i(o,E),g);else if(u(o))e(o,g,E);else{var A=document.createElement("a");A.href=o,A.target="_blank",setTimeout(function(){x(A)})}}:function(o,g,E,A){if(A=A||open("","_blank"),A&&(A.document.title=A.document.body.innerText="downloading..."),typeof o=="string")return e(o,g,E);var k=o.type==="application/octet-stream",m=/constructor/i.test(p.HTMLElement)||p.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||k&&m||S)&&typeof FileReader<"u"){var r=new FileReader;r.onloadend=function(){var P=r.result;P=s?P:P.replace(/^data:[^;]*;/,"data:attachment/file;"),A?A.location.href=P:location=P,A=null},r.readAsDataURL(o)}else{var l=p.URL||p.webkitURL,F=l.createObjectURL(o);A?A.location=F:location.href=F,A=null,setTimeout(function(){l.revokeObjectURL(F)},4e4)}});p.saveAs=d.saveAs=d,b.exports=d})})(FileSaver_min);const FileSaver=FileSaver_min.exports,onPrint=b=>{let t;t||(t=document.createElement("iframe"),document.body.appendChild(t),t.style.display="none",t.onload=function(){setTimeout(function(){t.focus(),t.contentWindow.print()},1)}),t.src=b},calcRT=b=>{let i=b.split(" ").length;if(i>0)return Math.ceil(i/200)},getPageText=(b,t)=>new Promise(function(i,e){t.getPage(b).then(function(u){u.getTextContent().then(function(x){for(var p=x.items,S="",d=0;d<p.length;d++){var o=p[d];S+=o.str+" "}i(S)})})});function cubicOut(b){const t=b-1;return t*t*t+1}function scale(b,{delay:t=0,duration:i=400,easing:e=cubicOut,start:u=0,opacity:x=0}={}){const p=getComputedStyle(b),S=+p.opacity,d=p.transform==="none"?"":p.transform,o=1-u,g=S*(1-x);return{delay:t,duration:i,easing:e,css:(E,A)=>`
			transform: ${d} scale(${1-o*A});
			opacity: ${S-g*A}
		`}}class ClassBuilder{constructor(t,i){this.defaults=typeof t=="function"?t(i):t,this.classes=this.defaults}flush(){return this.classes=this.defaults,this}extend(...t){return this}get(){return this.classes}replace(t,i=!0){return i&&t&&(this.classes=Object.keys(t).reduce((e,u)=>e.replace(new RegExp(u,"g"),t[u]),this.classes)),this}remove(t,i=!0){return i&&t&&(this.classes=t.split(" ").reduce((e,u)=>e.replace(new RegExp(u,"g"),""),this.classes)),this}add(t,i=!0,e){if(!i||!t)return this;switch(typeof t){case"string":default:return this.classes+=` ${t} `,this;case"function":return this.classes+=` ${t(e||this.classes)} `,this}}}const Tooltip_svelte_svelte_type_style_lang="",get_activator_slot_changes=b=>({}),get_activator_slot_context=b=>({});function create_if_block$3(b){let t,i,e,u,x;const p=b[8].default,S=create_slot(p,b,b[7],null);return{c(){t=element("div"),S&&S.c(),this.h()},l(d){t=claim_element(d,"DIV",{class:!0});var o=children(t);S&&S.l(o),o.forEach(detach),this.h()},h(){attr(t,"class",i=null_to_empty(b[1])+" svelte-1sbj3n6")},m(d,o){insert_hydration(d,t,o),S&&S.m(t,null),x=!0},p(d,o){S&&S.p&&(!x||o&128)&&update_slot_base(S,p,d,d[7],x?get_slot_changes(p,d[7],o,null):get_all_dirty_from_scope(d[7]),null),(!x||o&2&&i!==(i=null_to_empty(d[1])+" svelte-1sbj3n6"))&&attr(t,"class",i)},i(d){x||(transition_in(S,d),add_render_callback(()=>{u&&u.end(1),e=create_in_transition(t,scale,{duration:150}),e.start()}),x=!0)},o(d){transition_out(S,d),e&&e.invalidate(),u=create_out_transition(t,scale,{duration:150,delay:100}),x=!1},d(d){d&&detach(t),S&&S.d(d),d&&u&&u.end()}}}function create_fragment$a(b){let t,i,e,u,x,p;const S=b[8].activator,d=create_slot(S,b,b[7],get_activator_slot_context);let o=b[0]&&create_if_block$3(b);return{c(){t=element("div"),i=element("div"),d&&d.c(),e=space(),o&&o.c(),this.h()},l(g){t=claim_element(g,"DIV",{class:!0});var E=children(t);i=claim_element(E,"DIV",{});var A=children(i);d&&d.l(A),A.forEach(detach),e=claim_space(E),o&&o.l(E),E.forEach(detach),this.h()},h(){attr(t,"class","activator svelte-1sbj3n6")},m(g,E){insert_hydration(g,t,E),append_hydration(t,i),d&&d.m(i,null),append_hydration(t,e),o&&o.m(t,null),u=!0,x||(p=[listen(i,"mouseenter",debounce(b[2],100)),listen(i,"mouseleave",debounce(b[3],500)),listen(i,"mouseenter",b[9]),listen(i,"mouseleave",b[10]),listen(i,"focus",b[11]),listen(i,"blur",b[12])],x=!0)},p(g,[E]){d&&d.p&&(!u||E&128)&&update_slot_base(d,S,g,g[7],u?get_slot_changes(S,g[7],E,get_activator_slot_changes):get_all_dirty_from_scope(g[7]),get_activator_slot_context),g[0]?o?(o.p(g,E),E&1&&transition_in(o,1)):(o=create_if_block$3(g),o.c(),transition_in(o,1),o.m(t,null)):o&&(group_outros(),transition_out(o,1,1,()=>{o=null}),check_outros())},i(g){u||(transition_in(d,g),transition_in(o),u=!0)},o(g){transition_out(d,g),transition_out(o),u=!1},d(g){g&&detach(t),d&&d.d(g),o&&o.d(),x=!1,run_all(p)}}}const classesDefault="tooltip";function debounce(b,t,i){let e;return function(){let u=this,x=arguments,p=function(){e=null,i||b.apply(u,x)},S=i&&!e;clearTimeout(e),e=setTimeout(p,t),S&&b.apply(u,x)}}function instance$9(b,t,i){let e,{$$slots:u={},$$scope:x}=t,{class:p=""}=t,{classes:S=classesDefault}=t,{show:d=!1}=t,{timeout:o=null}=t;const g=new ClassBuilder(S,classesDefault);function E(){d||(i(0,d=!0),o&&i(4,o=setTimeout(()=>{i(0,d=!1)},o)))}function A(){!d||(i(0,d=!1),clearTimeout(o))}function k(l){bubble.call(this,b,l)}function m(l){bubble.call(this,b,l)}function s(l){bubble.call(this,b,l)}function r(l){bubble.call(this,b,l)}return b.$$set=l=>{"class"in l&&i(5,p=l.class),"classes"in l&&i(6,S=l.classes),"show"in l&&i(0,d=l.show),"timeout"in l&&i(4,o=l.timeout),"$$scope"in l&&i(7,x=l.$$scope)},b.$$.update=()=>{b.$$.dirty&96&&i(1,e=g.flush().add(S,!0,classesDefault).add(p).get())},[d,e,E,A,o,p,S,x,u,k,m,s,r]}class Tooltip extends SvelteComponent{constructor(t){super(),init(this,t,instance$9,create_fragment$a,safe_not_equal,{class:5,classes:6,show:0,timeout:4})}}const PdfViewer_svelte_svelte_type_style_lang="",{window:window_1}=globals;function create_else_block_1(b){let t,i,e;return{c(){t=element("div"),i=element("canvas"),this.h()},l(u){t=claim_element(u,"DIV",{class:!0});var x=children(t);i=claim_element(x,"CANVAS",{class:!0}),children(i).forEach(detach),x.forEach(detach),this.h()},h(){attr(i,"class","svelte-m8wnul"),attr(t,"class",e=null_to_empty(b[5]===!0?"viewer":"null")+" svelte-m8wnul")},m(u,x){insert_hydration(u,t,x),append_hydration(t,i),b[43](i)},p(u,x){x[0]&32&&e!==(e=null_to_empty(u[5]===!0?"viewer":"null")+" svelte-m8wnul")&&attr(t,"class",e)},i:noop,o:noop,d(u){u&&detach(t),b[43](null)}}}function create_if_block_1(b){let t,i,e,u,x,p,S,d,o,g,E,A,k,m,s,r,l,F,P,v,a,h,C,D,I,L,W,tt,$,N,G,M,q,U,rt,at,lt,mt,ut,j,y,f;return e=new Tooltip({props:{$$slots:{activator:[create_activator_slot_8],default:[create_default_slot_8]},$$scope:{ctx:b}}}),x=new Tooltip({props:{$$slots:{activator:[create_activator_slot_7],default:[create_default_slot_7]},$$scope:{ctx:b}}}),S=new Tooltip({props:{$$slots:{activator:[create_activator_slot_6],default:[create_default_slot_6]},$$scope:{ctx:b}}}),o=new Tooltip({props:{$$slots:{activator:[create_activator_slot_5],default:[create_default_slot_5]},$$scope:{ctx:b}}}),E=new Tooltip({props:{$$slots:{activator:[create_activator_slot_4],default:[create_default_slot_4]},$$scope:{ctx:b}}}),k=new Tooltip({props:{$$slots:{activator:[create_activator_slot_3],default:[create_default_slot_3]},$$scope:{ctx:b}}}),s=new Tooltip({props:{$$slots:{activator:[create_activator_slot_2],default:[create_default_slot_2]},$$scope:{ctx:b}}}),l=new Tooltip({props:{$$slots:{activator:[create_activator_slot_1],default:[create_default_slot_1$1]},$$scope:{ctx:b}}}),P=new Tooltip({props:{$$slots:{activator:[create_activator_slot],default:[create_default_slot$1]},$$scope:{ctx:b}}}),{c(){t=element("div"),i=element("div"),create_component(e.$$.fragment),u=space(),create_component(x.$$.fragment),p=space(),create_component(S.$$.fragment),d=space(),create_component(o.$$.fragment),g=space(),create_component(E.$$.fragment),A=space(),create_component(k.$$.fragment),m=space(),create_component(s.$$.fragment),r=space(),create_component(l.$$.fragment),F=space(),create_component(P.$$.fragment),v=space(),a=element("span"),h=svg_element("svg"),C=svg_element("path"),D=space(),I=element("span"),L=text(b[9]),W=text(" min read"),tt=space(),$=element("span"),N=svg_element("svg"),G=svg_element("path"),M=space(),q=element("div"),U=text(`Page :
              `),rt=element("span"),at=text(`
              /
              `),lt=element("span"),mt=space(),ut=element("div"),j=element("canvas"),this.h()},l(w){t=claim_element(w,"DIV",{class:!0});var n=children(t);i=claim_element(n,"DIV",{class:!0});var c=children(i);claim_component(e.$$.fragment,c),u=claim_space(c),claim_component(x.$$.fragment,c),p=claim_space(c),claim_component(S.$$.fragment,c),d=claim_space(c),claim_component(o.$$.fragment,c),g=claim_space(c),claim_component(E.$$.fragment,c),A=claim_space(c),claim_component(k.$$.fragment,c),m=claim_space(c),claim_component(s.$$.fragment,c),r=claim_space(c),claim_component(l.$$.fragment,c),F=claim_space(c),claim_component(P.$$.fragment,c),v=claim_space(c),a=claim_element(c,"SPAN",{class:!0});var _=children(a);h=claim_svg_element(_,"svg",{class:!0,xmlns:!0,viewBox:!0});var T=children(h);C=claim_svg_element(T,"path",{d:!0}),children(C).forEach(detach),T.forEach(detach),D=claim_space(_),I=claim_element(_,"SPAN",{class:!0});var R=children(I);L=claim_text(R,b[9]),W=claim_text(R," min read"),R.forEach(detach),_.forEach(detach),tt=claim_space(c),$=claim_element(c,"SPAN",{class:!0});var B=children($);N=claim_svg_element(B,"svg",{class:!0,xmlns:!0,viewBox:!0});var z=children(N);G=claim_svg_element(z,"path",{d:!0}),children(G).forEach(detach),z.forEach(detach),M=claim_space(B),q=claim_element(B,"DIV",{class:!0});var Y=children(q);U=claim_text(Y,`Page :
              `),rt=claim_element(Y,"SPAN",{}),children(rt).forEach(detach),at=claim_text(Y,`
              /
              `),lt=claim_element(Y,"SPAN",{}),children(lt).forEach(detach),Y.forEach(detach),B.forEach(detach),c.forEach(detach),mt=claim_space(n),ut=claim_element(n,"DIV",{class:!0});var H=children(ut);j=claim_element(H,"CANVAS",{width:!0,height:!0,class:!0}),children(j).forEach(detach),H.forEach(detach),n.forEach(detach),this.h()},h(){attr(C,"d",`M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9
                1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0
                0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59
                12l3.53-3.54z`),attr(h,"class","icon svelte-m8wnul"),attr(h,"xmlns","http://www.w3.org/2000/svg"),attr(h,"viewBox","0 0 20 20"),attr(I,"class","text svelte-m8wnul"),attr(a,"class","page-info svelte-m8wnul"),attr(G,"d",`M16 2h4v15a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V0h16v2zm0 2v13a1 1 0
                0 0 1 1 1 1 0 0 0 1-1V4h-2zM2 2v15a1 1 0 0 0 1 1h11.17a2.98 2.98
                0 0 1-.17-1V2H2zm2 8h8v2H4v-2zm0 4h8v2H4v-2zM4 4h8v4H4V4z`),attr(N,"class","icon svelte-m8wnul"),attr(N,"xmlns","http://www.w3.org/2000/svg"),attr(N,"viewBox","0 0 20 20"),attr(q,"class","text svelte-m8wnul"),attr($,"class","page-info svelte-m8wnul"),attr(i,"class","line svelte-m8wnul"),attr(j,"width",b[15]),attr(j,"height",b[16]),attr(j,"class","svelte-m8wnul"),attr(ut,"class",y=null_to_empty(b[5]===!0?"viewer":"null")+" svelte-m8wnul"),attr(t,"class","control-start svelte-m8wnul")},m(w,n){insert_hydration(w,t,n),append_hydration(t,i),mount_component(e,i,null),append_hydration(i,u),mount_component(x,i,null),append_hydration(i,p),mount_component(S,i,null),append_hydration(i,d),mount_component(o,i,null),append_hydration(i,g),mount_component(E,i,null),append_hydration(i,A),mount_component(k,i,null),append_hydration(i,m),mount_component(s,i,null),append_hydration(i,r),mount_component(l,i,null),append_hydration(i,F),mount_component(P,i,null),append_hydration(i,v),append_hydration(i,a),append_hydration(a,h),append_hydration(h,C),append_hydration(a,D),append_hydration(a,I),append_hydration(I,L),append_hydration(I,W),append_hydration(i,tt),append_hydration(i,$),append_hydration($,N),append_hydration(N,G),append_hydration($,M),append_hydration($,q),append_hydration(q,U),append_hydration(q,rt),b[40](rt),append_hydration(q,at),append_hydration(q,lt),b[41](lt),append_hydration(t,mt),append_hydration(t,ut),append_hydration(ut,j),b[42](j),f=!0},p(w,n){const c={};n[0]&1|n[1]&67108864&&(c.$$scope={dirty:n,ctx:w}),e.$set(c);const _={};n[0]&9|n[1]&67108864&&(_.$$scope={dirty:n,ctx:w}),x.$set(_);const T={};n[0]&4|n[1]&67108864&&(T.$$scope={dirty:n,ctx:w}),S.$set(T);const R={};n[0]&4|n[1]&67108864&&(R.$$scope={dirty:n,ctx:w}),o.$set(R);const B={};n[0]&2|n[1]&67108864&&(B.$$scope={dirty:n,ctx:w}),E.$set(B);const z={};n[1]&67108864&&(z.$$scope={dirty:n,ctx:w}),k.$set(z);const Y={};n[1]&67108864&&(Y.$$scope={dirty:n,ctx:w}),s.$set(Y);const H={};n[0]&2|n[1]&67108864&&(H.$$scope={dirty:n,ctx:w}),l.$set(H);const et={};n[0]&3072|n[1]&67108864&&(et.$$scope={dirty:n,ctx:w}),P.$set(et),(!f||n[0]&512)&&set_data(L,w[9]),(!f||n[0]&32768)&&attr(j,"width",w[15]),(!f||n[0]&65536)&&attr(j,"height",w[16]),(!f||n[0]&32&&y!==(y=null_to_empty(w[5]===!0?"viewer":"null")+" svelte-m8wnul"))&&attr(ut,"class",y)},i(w){f||(transition_in(e.$$.fragment,w),transition_in(x.$$.fragment,w),transition_in(S.$$.fragment,w),transition_in(o.$$.fragment,w),transition_in(E.$$.fragment,w),transition_in(k.$$.fragment,w),transition_in(s.$$.fragment,w),transition_in(l.$$.fragment,w),transition_in(P.$$.fragment,w),f=!0)},o(w){transition_out(e.$$.fragment,w),transition_out(x.$$.fragment,w),transition_out(S.$$.fragment,w),transition_out(o.$$.fragment,w),transition_out(E.$$.fragment,w),transition_out(k.$$.fragment,w),transition_out(s.$$.fragment,w),transition_out(l.$$.fragment,w),transition_out(P.$$.fragment,w),f=!1},d(w){w&&detach(t),destroy_component(e),destroy_component(x),destroy_component(S),destroy_component(o),destroy_component(E),destroy_component(k),destroy_component(s),destroy_component(l),destroy_component(P),b[40](null),b[41](null),b[42](null)}}}function create_if_block$2(b){let t,i,e,u,x,p,S,d,o,g,E,A,k,m;return{c(){t=element("div"),i=element("p"),e=text("This document requires a password to open:"),u=space(),x=element("p"),p=text(b[14]),S=space(),d=element("div"),o=element("input"),g=space(),E=element("button"),A=text("Submit"),this.h()},l(s){t=claim_element(s,"DIV",{class:!0});var r=children(t);i=claim_element(r,"P",{});var l=children(i);e=claim_text(l,"This document requires a password to open:"),l.forEach(detach),u=claim_space(r),x=claim_element(r,"P",{class:!0});var F=children(x);p=claim_text(F,b[14]),F.forEach(detach),S=claim_space(r),d=claim_element(r,"DIV",{class:!0});var P=children(d);o=claim_element(P,"INPUT",{type:!0,class:!0}),g=claim_space(P),E=claim_element(P,"BUTTON",{class:!0});var v=children(E);A=claim_text(v,"Submit"),v.forEach(detach),P.forEach(detach),r.forEach(detach),this.h()},h(){attr(x,"class","password-message svelte-m8wnul"),attr(o,"type","password"),attr(o,"class","password-input svelte-m8wnul"),attr(E,"class","password-button svelte-m8wnul"),attr(d,"class","password-container svelte-m8wnul"),attr(t,"class","password-viewer svelte-m8wnul")},m(s,r){insert_hydration(s,t,r),append_hydration(t,i),append_hydration(i,e),append_hydration(t,u),append_hydration(t,x),append_hydration(x,p),append_hydration(t,S),append_hydration(t,d),append_hydration(d,o),set_input_value(o,b[12]),append_hydration(d,g),append_hydration(d,E),append_hydration(E,A),k||(m=[listen(o,"input",b[30]),listen(E,"click",b[24])],k=!0)},p(s,r){r[0]&16384&&set_data(p,s[14]),r[0]&4096&&o.value!==s[12]&&set_input_value(o,s[12])},i:noop,o:noop,d(s){s&&detach(t),k=!1,run_all(m)}}}function create_default_slot_8(b){let t;return{c(){t=text("Prevoius")},l(i){t=claim_text(i,"Prevoius")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_8(b){let t,i,e,u,x,p;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("polygon"),this.h()},l(S){t=claim_element(S,"SPAN",{slot:!0,class:!0});var d=children(t);i=claim_svg_element(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=children(i);e=claim_svg_element(o,"polygon",{points:!0}),children(e).forEach(detach),o.forEach(detach),d.forEach(detach),this.h()},h(){attr(e,"points",`3.828 9 9.899 2.929 8.485 1.515 0 10 .707 10.707 8.485
                  18.485 9.899 17.071 3.828 11 20 11 20 9 3.828 9`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(b[0]<=1?"disabled":null)+" svelte-m8wnul")},m(S,d){insert_hydration(S,t,d),append_hydration(t,i),append_hydration(i,e),x||(p=listen(t,"click",b[31]),x=!0)},p(S,d){d[0]&1&&u!==(u="button-control "+(S[0]<=1?"disabled":null)+" svelte-m8wnul")&&attr(t,"class",u)},d(S){S&&detach(t),x=!1,p()}}}function create_default_slot_7(b){let t;return{c(){t=text("Next")},l(i){t=claim_text(i,"Next")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_7(b){let t,i,e,u,x,p;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("polygon"),this.h()},l(S){t=claim_element(S,"SPAN",{slot:!0,class:!0});var d=children(t);i=claim_svg_element(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=children(i);e=claim_svg_element(o,"polygon",{points:!0}),children(e).forEach(detach),o.forEach(detach),d.forEach(detach),this.h()},h(){attr(e,"points",`16.172 9 10.101 2.929 11.515 1.515 20 10 19.293 10.707
                  11.515 18.485 10.101 17.071 16.172 11 0 11 0 9`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(b[0]>=b[3]?"disabled":null)+" svelte-m8wnul")},m(S,d){insert_hydration(S,t,d),append_hydration(t,i),append_hydration(i,e),x||(p=listen(t,"click",b[32]),x=!0)},p(S,d){d[0]&9&&u!==(u="button-control "+(S[0]>=S[3]?"disabled":null)+" svelte-m8wnul")&&attr(t,"class",u)},d(S){S&&detach(t),x=!1,p()}}}function create_default_slot_6(b){let t;return{c(){t=text("Zoom In")},l(i){t=claim_text(i,"Zoom In")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_6(b){let t,i,e,u,x,p;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(S){t=claim_element(S,"SPAN",{slot:!0,class:!0});var d=children(t);i=claim_svg_element(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=children(i);e=claim_svg_element(o,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),o.forEach(detach),d.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM7
                  7V5h2v2h2v2H9v2H7V9H5V7h2z`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(b[2]>=maxScale?"disabled":null)+" svelte-m8wnul")},m(S,d){insert_hydration(S,t,d),append_hydration(t,i),append_hydration(i,e),x||(p=listen(t,"click",b[33]),x=!0)},p(S,d){d[0]&4&&u!==(u="button-control "+(S[2]>=maxScale?"disabled":null)+" svelte-m8wnul")&&attr(t,"class",u)},d(S){S&&detach(t),x=!1,p()}}}function create_default_slot_5(b){let t;return{c(){t=text("Zoom Out")},l(i){t=claim_text(i,"Zoom Out")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_5(b){let t,i,e,u,x,p;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(S){t=claim_element(S,"SPAN",{slot:!0,class:!0});var d=children(t);i=claim_svg_element(d,"svg",{class:!0,xmlns:!0,viewBox:!0});var o=children(i);e=claim_svg_element(o,"path",{"fill-rule":!0,d:!0}),children(e).forEach(detach),o.forEach(detach),d.forEach(detach),this.h()},h(){attr(e,"fill-rule","evenodd"),attr(e,"d",`M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42
                  1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12zM5
                  7h6v2H5V7z`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class",u="button-control "+(b[2]<=minScale?"disabled":null)+" svelte-m8wnul")},m(S,d){insert_hydration(S,t,d),append_hydration(t,i),append_hydration(i,e),x||(p=listen(t,"click",b[34]),x=!0)},p(S,d){d[0]&4&&u!==(u="button-control "+(S[2]<=minScale?"disabled":null)+" svelte-m8wnul")&&attr(t,"class",u)},d(S){S&&detach(t),x=!1,p()}}}function create_default_slot_4(b){let t;return{c(){t=text("Print")},l(i){t=claim_text(i,"Print")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_4(b){let t,i,e,u,x;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(p){t=claim_element(p,"SPAN",{slot:!0,class:!0});var S=children(t);i=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(i);e=claim_svg_element(d,"path",{d:!0}),children(e).forEach(detach),d.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"d",`M4 16H0V6h20v10h-4v4H4v-4zm2-4v6h8v-6H6zM4 0h12v5H4V0zM2
                  8v2h2V8H2zm4 0v2h2V8H6z`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-m8wnul")},m(p,S){insert_hydration(p,t,S),append_hydration(t,i),append_hydration(i,e),u||(x=listen(t,"click",b[35]),u=!0)},p:noop,d(p){p&&detach(t),u=!1,x()}}}function create_default_slot_3(b){let t;return{c(){t=text("Anti-Clockwise")},l(i){t=claim_text(i,"Anti-Clockwise")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_3(b){let t,i,e,u,x;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(p){t=claim_element(p,"SPAN",{slot:!0,class:!0});var S=children(t);i=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(i);e=claim_svg_element(d,"path",{d:!0}),children(e).forEach(detach),d.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(i,"class","icon rot-icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-m8wnul")},m(p,S){insert_hydration(p,t,S),append_hydration(t,i),append_hydration(i,e),u||(x=listen(t,"click",b[36]),u=!0)},p:noop,d(p){p&&detach(t),u=!1,x()}}}function create_default_slot_2(b){let t;return{c(){t=text("Clockwise")},l(i){t=claim_text(i,"Clockwise")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_2(b){let t,i,e,u,x;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(p){t=claim_element(p,"SPAN",{slot:!0,class:!0});var S=children(t);i=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(i);e=claim_svg_element(d,"path",{d:!0}),children(e).forEach(detach),d.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"d",`M14.66 15.66A8 8 0 1 1 17 10h-2a6 6 0 1 0-1.76 4.24l1.42
                  1.42zM12 10h8l-4 4-4-4z`),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-m8wnul")},m(p,S){insert_hydration(p,t,S),append_hydration(t,i),append_hydration(i,e),u||(x=listen(t,"click",b[37]),u=!0)},p:noop,d(p){p&&detach(t),u=!1,x()}}}function create_default_slot_1$1(b){let t;return{c(){t=text("Download")},l(i){t=claim_text(i,"Download")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot_1(b){let t,i,e,u,x;return{c(){t=element("span"),i=svg_element("svg"),e=svg_element("path"),this.h()},l(p){t=claim_element(p,"SPAN",{slot:!0,class:!0});var S=children(t);i=claim_svg_element(S,"svg",{class:!0,xmlns:!0,viewBox:!0});var d=children(i);e=claim_svg_element(d,"path",{d:!0}),children(e).forEach(detach),d.forEach(detach),S.forEach(detach),this.h()},h(){attr(e,"d","M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"),attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","button-control svelte-m8wnul")},m(p,S){insert_hydration(p,t,S),append_hydration(t,i),append_hydration(i,e),u||(x=listen(t,"click",b[38]),u=!0)},p:noop,d(p){p&&detach(t),u=!1,x()}}}function create_default_slot$1(b){let t=(b[10]===!0?b[11]:"Auto Turn Page")+"",i;return{c(){i=text(t)},l(e){i=claim_text(e,t)},m(e,u){insert_hydration(e,i,u)},p(e,u){u[0]&3072&&t!==(t=(e[10]===!0?e[11]:"Auto Turn Page")+"")&&set_data(i,t)},d(e){e&&detach(i)}}}function create_else_block(b){let t;return{c(){t=svg_element("path"),this.h()},l(i){t=claim_svg_element(i,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d",`M9.896,3.838L0.792,1.562v14.794l9.104,2.276L19,16.356V1.562L9.896,3.838z
                    M9.327,17.332L1.93,15.219V3.27 l7.397,1.585V17.332z
                    M17.862,15.219l-7.397,2.113V4.855l7.397-1.585V15.219z`)},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_if_block_2(b){let t;return{c(){t=svg_element("path"),this.h()},l(i){t=claim_svg_element(i,"path",{d:!0}),children(t).forEach(detach),this.h()},h(){attr(t,"d","M4 18h12V6h-4V2H4v16zm-2 1V0h12l4 4v16H2v-1z")},m(i,e){insert_hydration(i,t,e)},d(i){i&&detach(t)}}}function create_activator_slot(b){let t,i,e,u;function x(d,o){return d[10]===!0?create_if_block_2:create_else_block}let p=x(b),S=p(b);return{c(){t=element("span"),i=svg_element("svg"),S.c(),this.h()},l(d){t=claim_element(d,"SPAN",{slot:!0,class:!0});var o=children(t);i=claim_svg_element(o,"svg",{class:!0,xmlns:!0,viewBox:!0});var g=children(i);S.l(g),g.forEach(detach),o.forEach(detach),this.h()},h(){attr(i,"class","icon svelte-m8wnul"),attr(i,"xmlns","http://www.w3.org/2000/svg"),attr(i,"viewBox","0 0 20 20"),attr(t,"slot","activator"),attr(t,"class","page-info button-control svelte-m8wnul")},m(d,o){insert_hydration(d,t,o),append_hydration(t,i),S.m(i,null),e||(u=listen(t,"click",b[39]),e=!0)},p(d,o){p!==(p=x(d))&&(S.d(1),S=p(d),S&&(S.c(),S.m(i,null)))},d(d){d&&detach(t),S.d(),e=!1,u()}}}function create_fragment$9(b){let t,i,e,u,x,p,S,d,o,g,E,A;add_render_callback(b[29]);const k=[create_if_block$2,create_if_block_1,create_else_block_1],m=[];function s(r,l){return r[13]===!0?0:r[4]===!0?1:2}return e=s(b),u=m[e]=k[e](b),{c(){t=element("div"),i=element("div"),u.c(),p=space(),S=element("button"),d=svg_element("svg"),o=svg_element("path"),this.h()},l(r){t=claim_element(r,"DIV",{class:!0});var l=children(t);i=claim_element(l,"DIV",{class:!0});var F=children(i);u.l(F),F.forEach(detach),p=claim_space(l),S=claim_element(l,"BUTTON",{id:!0,class:!0});var P=children(S);d=claim_svg_element(P,"svg",{class:!0,xmlns:!0,viewBox:!0});var v=children(d);o=claim_svg_element(v,"path",{d:!0}),children(o).forEach(detach),v.forEach(detach),P.forEach(detach),l.forEach(detach),this.h()},h(){attr(i,"class",x=null_to_empty(b[5]===!0?"control":"null")+" svelte-m8wnul"),attr(o,"d","M7 10v8h6v-8h5l-8-8-8 8h5z"),attr(d,"class","icon svelte-m8wnul"),attr(d,"xmlns","http://www.w3.org/2000/svg"),attr(d,"viewBox","0 0 20 20"),attr(S,"id","topBtn"),attr(S,"class","svelte-m8wnul"),attr(t,"class","parent svelte-m8wnul")},m(r,l){insert_hydration(r,t,l),append_hydration(t,i),m[e].m(i,null),append_hydration(t,p),append_hydration(t,S),append_hydration(S,d),append_hydration(d,o),g=!0,E||(A=[listen(window_1,"resize",b[29]),listen(S,"click",b[44])],E=!0)},p(r,l){let F=e;e=s(r),e===F?m[e].p(r,l):(group_outros(),transition_out(m[F],1,1,()=>{m[F]=null}),check_outros(),u=m[e],u?u.p(r,l):(u=m[e]=k[e](r),u.c()),transition_in(u,1),u.m(i,null)),(!g||l[0]&32&&x!==(x=null_to_empty(r[5]===!0?"control":"null")+" svelte-m8wnul"))&&attr(i,"class",x)},i(r){g||(transition_in(u),g=!0)},o(r){transition_out(u),g=!1},d(r){r&&detach(t),m[e].d(),E=!1,run_all(A)}}}const minScale=1,maxScale=2.3;function instance$8(b,t,i){let{url:e}=t,{scale:u=1.8}=t,{pageNum:x=1}=t,{flipTime:p=120}=t,{showButtons:S=!0}=t,{showBorder:d=!0}=t,{totalPage:o=0}=t;pdf.exports.GlobalWorkerOptions.workerSrc=pdfjsWorker;let g,E=0,A=0,k=null,m=!1,s=null,r=0,l="",F=0,P=!1,v,a,h=p,C=[],D="",I=!1,L="",W=!1;const tt=Z=>{m=!0,k.getPage(Z).then(function(bt){let K=bt.getViewport({scale:u,rotation:r});const st=g.getContext("2d");i(6,g.height=K.height,g),i(6,g.width=K.width,g);let St={canvasContext:st,viewport:K};bt.render(St).promise.then(function(){if(m=!1,s!==null){if(x<k.totalPage)C[x]=g,i(0,x++,x),k.getPage(x).then(tt);else for(let At=1;At<C.length;At++)g.appendChild(C[At]);s=null}})}),S===!0&&i(7,E.textContent=Z,E)},$=Z=>{m?s=Z:tt(Z)},N=()=>{x<=1||(i(0,x--,x),$(x))},G=()=>{x>=k.numPages||(i(0,x++,x),$(x))},M=()=>{u<=maxScale&&(i(2,u=u+.1),$(x))},q=()=>{u>=minScale&&(i(2,u=u-.1),$(x))},U=Z=>{onPrint(Z)},rt=()=>{r=r+90,$(x)},at=()=>{r=r-90,$(x)},lt=()=>{mt()},mt=async()=>{pdf.exports.getDocument({url:e,password:D}).promise.then(async function(bt){if(k=bt,i(13,I=!1),await tick(),S===!0&&i(8,A.textContent=k.numPages,A),i(3,o=k.numPages),S===!0)for(let K=1;K<=o;K++)getPageText(K,k).then(function(st){l=l.concat(st),i(9,F=calcRT(l))});i(28,W=!0)}).catch(function(bt){i(13,I=!0),i(14,L=bt.message),L==="Failed to fetch"&&(i(1,e=`https://cors-anywhere.herokuapp.com/${e}`),mt())})};mt();const ut=()=>{i(10,P=!P),P===!1&&(clearInterval(v),clearInterval(a)),P===!0&&x<=o&&(a=setInterval(()=>{i(11,h=h-1)},1e3),v=setInterval(()=>{i(11,h=p),G()},p*1e3))},j=Z=>{let bt=Z.substring(Z.lastIndexOf("/")+1);FileSaver.saveAs(Z,bt)};onDestroy(()=>{clearInterval(v),clearInterval(a)});let y,f;function w(){i(15,y=window_1.innerWidth),i(16,f=window_1.innerHeight)}function n(){D=this.value,i(12,D)}const c=()=>N(),_=()=>G(),T=()=>M(),R=()=>q(),B=()=>U(e),z=()=>at(),Y=()=>rt(),H=()=>j(e),et=()=>ut();function J(Z){binding_callbacks[Z?"unshift":"push"](()=>{E=Z,i(7,E)})}function nt(Z){binding_callbacks[Z?"unshift":"push"](()=>{A=Z,i(8,A)})}function ht(Z){binding_callbacks[Z?"unshift":"push"](()=>{g=Z,i(6,g)})}function _t(Z){binding_callbacks[Z?"unshift":"push"](()=>{g=Z,i(6,g)})}const vt=()=>window.scrollTo(0,0);return b.$$set=Z=>{"url"in Z&&i(1,e=Z.url),"scale"in Z&&i(2,u=Z.scale),"pageNum"in Z&&i(0,x=Z.pageNum),"flipTime"in Z&&i(27,p=Z.flipTime),"showButtons"in Z&&i(4,S=Z.showButtons),"showBorder"in Z&&i(5,d=Z.showBorder),"totalPage"in Z&&i(3,o=Z.totalPage)},b.$$.update=()=>{b.$$.dirty[0]&268435457&&W&&$(x)},[x,e,u,o,S,d,g,E,A,F,P,h,D,I,L,y,f,N,G,M,q,U,rt,at,lt,ut,j,p,W,w,n,c,_,T,R,B,z,Y,H,et,J,nt,ht,_t,vt]}class PdfViewer extends SvelteComponent{constructor(t){super(),init(this,t,instance$8,create_fragment$9,safe_not_equal,{url:1,scale:2,pageNum:0,flipTime:27,showButtons:4,showBorder:5,totalPage:3},null,[-1,-1])}}const Resume_svelte_svelte_type_style_lang="";function create_fragment$8(b){let t,i,e,u,x,p;return x=new PdfViewer({props:{showButtons:!1,url:"../cv.pdf",scale:1.25}}),{c(){t=element("div"),i=element("a"),e=text("Download"),u=space(),create_component(x.$$.fragment),this.h()},l(S){t=claim_element(S,"DIV",{class:!0});var d=children(t);i=claim_element(d,"A",{href:!0,download:!0,class:!0});var o=children(i);e=claim_text(o,"Download"),o.forEach(detach),u=claim_space(d),claim_component(x.$$.fragment,d),d.forEach(detach),this.h()},h(){attr(i,"href","../cv.pdf"),attr(i,"download",""),attr(i,"class","text-black text-center flex justify-center items-center download absolute px-2 svelte-3qa3vz"),attr(t,"class","resume-container svelte-3qa3vz")},m(S,d){insert_hydration(S,t,d),append_hydration(t,i),append_hydration(i,e),append_hydration(t,u),mount_component(x,t,null),p=!0},p:noop,i(S){p||(transition_in(x.$$.fragment,S),p=!0)},o(S){transition_out(x.$$.fragment,S),p=!1},d(S){S&&detach(t),destroy_component(x)}}}class Resume extends SvelteComponent{constructor(t){super(),init(this,t,null,create_fragment$8,safe_not_equal,{})}}const ProjectIcon_svelte_svelte_type_style_lang="";function create_fragment$7(b){let t,i,e,u,x,p,S;return{c(){t=element("div"),i=element("div"),e=space(),u=element("div"),x=text(b[1]),this.h()},l(d){t=claim_element(d,"DIV",{});var o=children(t);i=claim_element(o,"DIV",{class:!0,style:!0}),children(i).forEach(detach),e=claim_space(o),u=claim_element(o,"DIV",{class:!0});var g=children(u);x=claim_text(g,b[1]),g.forEach(detach),o.forEach(detach),this.h()},h(){attr(i,"class","projectIcon svelte-1ylletv"),set_style(i,"background-image","url("+b[0]+")"),attr(u,"class","projectIconText truncate text-center mt-1 text-black svelte-1ylletv")},m(d,o){insert_hydration(d,t,o),append_hydration(t,i),append_hydration(t,e),append_hydration(t,u),append_hydration(u,x),p||(S=[listen(u,"mouseenter",function(){is_function(b[3])&&b[3].apply(this,arguments)}),listen(u,"mouseleave",function(){is_function(b[4])&&b[4].apply(this,arguments)}),listen(t,"click",function(){is_function(b[2])&&b[2].apply(this,arguments)})],p=!0)},p(d,[o]){b=d,o&1&&set_style(i,"background-image","url("+b[0]+")"),o&2&&set_data(x,b[1])},i:noop,o:noop,d(d){d&&detach(t),p=!1,run_all(S)}}}function instance$7(b,t,i){let{imageSrc:e=""}=t,{name:u=""}=t,{onClick:x=()=>{}}=t,{onMouseEnter:p=()=>{}}=t,{onMouseLeave:S}=t;return b.$$set=d=>{"imageSrc"in d&&i(0,e=d.imageSrc),"name"in d&&i(1,u=d.name),"onClick"in d&&i(2,x=d.onClick),"onMouseEnter"in d&&i(3,p=d.onMouseEnter),"onMouseLeave"in d&&i(4,S=d.onMouseLeave)},[e,u,x,p,S]}class ProjectIcon extends SvelteComponent{constructor(t){super(),init(this,t,instance$7,create_fragment$7,safe_not_equal,{imageSrc:0,name:1,onClick:2,onMouseEnter:3,onMouseLeave:4})}}const techIconsPath={bootstrap:"../tech/bootstrap.png",css:"../tech/css.png",dialogflow:"../tech/dialogflow.png",firebase:"../tech/firebase.png",html:"../tech/html.png",javascript:"../tech/javascript.png",svelte:"../tech/svelte.png","three.js":"../tech/threejs.svg"},ProjectPreview_svelte_svelte_type_style_lang="";function get_each_context$3(b,t,i){const e=b.slice();return e[1]=t[i],e}function create_each_block$3(b){let t,i,e,u,x=b[1].name+"",p,S;return{c(){t=element("div"),i=element("div"),e=space(),u=element("div"),p=text(x),S=space(),this.h()},l(d){t=claim_element(d,"DIV",{class:!0});var o=children(t);i=claim_element(o,"DIV",{style:!0,class:!0}),children(i).forEach(detach),e=claim_space(o),u=claim_element(o,"DIV",{class:!0});var g=children(u);p=claim_text(g,x),g.forEach(detach),S=claim_space(o),o.forEach(detach),this.h()},h(){set_style(i,"background-image","url('"+b[1].imageSrc+"')"),attr(i,"class","win-icon text-center svelte-nl85ea"),attr(u,"class","window-element-title"),attr(t,"class","text-center full-win-icon text-blue-800 m-3")},m(d,o){insert_hydration(d,t,o),append_hydration(t,i),append_hydration(t,e),append_hydration(t,u),append_hydration(u,p),append_hydration(t,S)},p:noop,d(d){d&&detach(t)}}}function create_fragment$6(b){let t,i,e,u,x,p,S=b[2],d=[];for(let o=0;o<S.length;o+=1)d[o]=create_each_block$3(get_each_context$3(b,S,o));return{c(){t=element("div"),i=element("span"),e=text("Technologies used to build "),u=text(b[0]),x=space(),p=element("div");for(let o=0;o<d.length;o+=1)d[o].c();this.h()},l(o){t=claim_element(o,"DIV",{class:!0});var g=children(t);i=claim_element(g,"SPAN",{class:!0});var E=children(i);e=claim_text(E,"Technologies used to build "),u=claim_text(E,b[0]),E.forEach(detach),x=claim_space(g),p=claim_element(g,"DIV",{class:!0});var A=children(p);for(let k=0;k<d.length;k+=1)d[k].l(A);A.forEach(detach),g.forEach(detach),this.h()},h(){attr(i,"class","text-blue-800"),attr(p,"class","flex flex-row justify-center"),attr(t,"class","window p-4 mt-5 bg-silver text-center svelte-nl85ea")},m(o,g){insert_hydration(o,t,g),append_hydration(t,i),append_hydration(i,e),append_hydration(i,u),append_hydration(t,x),append_hydration(t,p);for(let E=0;E<d.length;E+=1)d[E].m(p,null)},p(o,[g]){if(g&1&&set_data(u,o[0]),g&4){S=o[2];let E;for(E=0;E<S.length;E+=1){const A=get_each_context$3(o,S,E);d[E]?d[E].p(A,g):(d[E]=create_each_block$3(A),d[E].c(),d[E].m(p,null))}for(;E<d.length;E+=1)d[E].d(1);d.length=S.length}},i:noop,o:noop,d(o){o&&detach(t),destroy_each(d,o)}}}function instance$6(b,t,i){let{title:e}=t,{tech:u}=t,x=u.map(p=>({name:p,imageSrc:techIconsPath[p.toLowerCase()]}));return b.$$set=p=>{"title"in p&&i(0,e=p.title),"tech"in p&&i(1,u=p.tech)},[e,u,x]}class ProjectPreview extends SvelteComponent{constructor(t){super(),init(this,t,instance$6,create_fragment$6,safe_not_equal,{title:0,tech:1})}}const Projects_svelte_svelte_type_style_lang="";function get_each_context$2(b,t,i){const e=b.slice();return e[10]=t[i],e}function create_each_block$2(b){let t,i,e,u;function x(){return b[5](b[10])}return i=new ProjectIcon({props:{name:b[10].name,imageSrc:b[10].imageSrc,onClick:b[10].onClick,onMouseEnter:x,onMouseLeave:b[6]}}),{c(){t=element("span"),create_component(i.$$.fragment),e=space()},l(p){t=claim_element(p,"SPAN",{});var S=children(t);claim_component(i.$$.fragment,S),e=claim_space(S),S.forEach(detach)},m(p,S){insert_hydration(p,t,S),mount_component(i,t,null),append_hydration(t,e),u=!0},p(p,S){b=p;const d={};S&1&&(d.onMouseLeave=b[6]),i.$set(d)},i(p){u||(transition_in(i.$$.fragment,p),u=!0)},o(p){transition_out(i.$$.fragment,p),u=!1},d(p){p&&detach(t),destroy_component(i)}}}function create_if_block$1(b){let t,i;return t=new ProjectPreview({props:{title:b[1].name,tech:b[1].tech}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,u){mount_component(t,e,u),i=!0},p(e,u){const x={};u&2&&(x.title=e[1].name),u&2&&(x.tech=e[1].tech),t.$set(x)},i(e){i||(transition_in(t.$$.fragment,e),i=!0)},o(e){transition_out(t.$$.fragment,e),i=!1},d(e){destroy_component(t,e)}}}function create_fragment$5(b){let t,i,e,u,x=b[2],p=[];for(let o=0;o<x.length;o+=1)p[o]=create_each_block$2(get_each_context$2(b,x,o));const S=o=>transition_out(p[o],1,1,()=>{p[o]=null});let d=b[0]&&create_if_block$1(b);return{c(){t=element("div");for(let o=0;o<p.length;o+=1)p[o].c();i=space(),d&&d.c(),e=empty(),this.h()},l(o){t=claim_element(o,"DIV",{class:!0});var g=children(t);for(let E=0;E<p.length;E+=1)p[E].l(g);g.forEach(detach),i=claim_space(o),d&&d.l(o),e=empty(),this.h()},h(){attr(t,"class","projects-container p-4 grid grid-flow-row-dense grid-cols-3 grid-rows-"+b[4]()+" gap-4 gap-y-10 svelte-lvw8a2")},m(o,g){insert_hydration(o,t,g);for(let E=0;E<p.length;E+=1)p[E].m(t,null);insert_hydration(o,i,g),d&&d.m(o,g),insert_hydration(o,e,g),u=!0},p(o,[g]){if(g&13){x=o[2];let E;for(E=0;E<x.length;E+=1){const A=get_each_context$2(o,x,E);p[E]?(p[E].p(A,g),transition_in(p[E],1)):(p[E]=create_each_block$2(A),p[E].c(),transition_in(p[E],1),p[E].m(t,null))}for(group_outros(),E=x.length;E<p.length;E+=1)S(E);check_outros()}o[0]?d?(d.p(o,g),g&1&&transition_in(d,1)):(d=create_if_block$1(o),d.c(),transition_in(d,1),d.m(e.parentNode,e)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(o){if(!u){for(let g=0;g<x.length;g+=1)transition_in(p[g]);transition_in(d),u=!0}},o(o){p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)transition_out(p[g]);transition_out(d),u=!1},d(o){o&&detach(t),destroy_each(p,o),o&&detach(i),d&&d.d(o),o&&detach(e)}}}function instance$5(b,t,i){let e=!1;const u=[{name:"diarist.cloud",imageSrc:"../projects/diarist.png",left:50,top:50,tech:["Firebase","JavaScript","HTML","Bootstrap","Dialogflow"],onClick:()=>d("https://diarist.cloud","diarist.cloud")},{name:"howdumb",imageSrc:"../projects/howdumb.png",left:50,top:50,tech:["Three.js","Svelte","Bootstrap"],onClick:()=>d("https://howdumb-6969.web.app/","howdumb")},{name:"tetris",imageSrc:"../projects/tetris.png",left:50,top:50,tech:["JavaScript","HTML","CSS"],onClick:()=>d("https://teodesk.com/tetris/","tetris")}];let x,p,S=!1;function d(k,m){p=window.setTimeout(()=>S=!1,500),S?(window.clearTimeout(p),S=!1,i(1,x=u.find(s=>s.name===m)),window.open(k,"_blank")):S=!0}function o(k){i(1,x=u.find(m=>m.name===k)),i(0,e=!0)}function g(){return Math.ceil(u.length/3)}return[e,x,u,o,g,k=>o(k.name),()=>i(0,e=!1)]}class Projects_1 extends SvelteComponent{constructor(t){super(),init(this,t,instance$5,create_fragment$5,safe_not_equal,{})}}const Contact_svelte_svelte_type_style_lang="";function get_each_context$1(b,t,i){const e=b.slice();return e[1]=t[i],e}function create_each_block$1(b){let t,i,e,u,x,p,S,d,o,g=b[1].name+"",E,A,k,m=b[1].link+"",s,r;return{c(){t=element("div"),i=element("div"),e=element("a"),u=element("img"),p=space(),S=element("div"),d=element("a"),o=element("span"),E=text(g),A=space(),k=element("p"),s=text(m),r=space(),this.h()},l(l){t=claim_element(l,"DIV",{class:!0});var F=children(t);i=claim_element(F,"DIV",{class:!0});var P=children(i);e=claim_element(P,"A",{href:!0});var v=children(e);u=claim_element(v,"IMG",{class:!0,src:!0,alt:!0}),v.forEach(detach),p=claim_space(P),S=claim_element(P,"DIV",{});var a=children(S);d=claim_element(a,"A",{href:!0});var h=children(d);o=claim_element(h,"SPAN",{class:!0});var C=children(o);E=claim_text(C,g),C.forEach(detach),h.forEach(detach),A=claim_space(a),k=claim_element(a,"P",{class:!0});var D=children(k);s=claim_text(D,m),D.forEach(detach),a.forEach(detach),P.forEach(detach),r=claim_space(F),F.forEach(detach),this.h()},h(){attr(u,"class","w-16 mr-4 on-hover svelte-ks6mzd"),src_url_equal(u.src,x=b[1].icon)||attr(u,"src",x),attr(u,"alt",b[1].name),attr(e,"href",b[1].name=="Email"?`mailto:${b[1].link}`:b[1].link),attr(o,"class","font-bold text-s mb-2 text-black"),attr(d,"href",b[1].name=="Email"?`mailto:${b[1].link}`:b[1].link),attr(k,"class","text-gray-700 text-base"),attr(i,"class","px-6 px-4 flex"),attr(t,"class","rounded overflow-hidden mb-5")},m(l,F){insert_hydration(l,t,F),append_hydration(t,i),append_hydration(i,e),append_hydration(e,u),append_hydration(i,p),append_hydration(i,S),append_hydration(S,d),append_hydration(d,o),append_hydration(o,E),append_hydration(S,A),append_hydration(S,k),append_hydration(k,s),append_hydration(t,r)},p:noop,d(l){l&&detach(t)}}}function create_fragment$4(b){let t,i=b[0],e=[];for(let u=0;u<i.length;u+=1)e[u]=create_each_block$1(get_each_context$1(b,i,u));return{c(){t=element("div");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=claim_element(u,"DIV",{class:!0});var x=children(t);for(let p=0;p<e.length;p+=1)e[p].l(x);x.forEach(detach),this.h()},h(){attr(t,"class","contact-container p-4 flex flex-col svelte-ks6mzd")},m(u,x){insert_hydration(u,t,x);for(let p=0;p<e.length;p+=1)e[p].m(t,null)},p(u,[x]){if(x&1){i=u[0];let p;for(p=0;p<i.length;p+=1){const S=get_each_context$1(u,i,p);e[p]?e[p].p(S,x):(e[p]=create_each_block$1(S),e[p].c(),e[p].m(t,null))}for(;p<e.length;p+=1)e[p].d(1);e.length=i.length}},i:noop,o:noop,d(u){u&&detach(t),destroy_each(e,u)}}}function instance$4(b){return[[{name:"LinkedIn",icon:"../contact/linkedin.png",link:"https://www.linkedin.com/in/paul-lukic/"},{name:"Email",icon:"../contact/gmail.png",link:"paul.lukic94@gmail.com"}]]}class Contact extends SvelteComponent{constructor(t){super(),init(this,t,instance$4,create_fragment$4,safe_not_equal,{})}}const DraggableIcon_svelte_svelte_type_style_lang="";function create_fragment$3(b){let t,i,e,u;const x=b[6].default,p=create_slot(x,b,b[5],null);return{c(){t=element("section"),p&&p.c(),this.h()},l(S){t=claim_element(S,"SECTION",{style:!0,class:!0});var d=children(t);p&&p.l(d),d.forEach(detach),this.h()},h(){set_style(t,"left",b[0]),set_style(t,"top",b[1]),attr(t,"class","draggable svelte-1bgse54")},m(S,d){insert_hydration(S,t,d),p&&p.m(t,null),i=!0,e||(u=[listen(window,"mouseup",b[4]),listen(window,"mousemove",b[3]),listen(t,"mousedown",b[2])],e=!0)},p(S,[d]){p&&p.p&&(!i||d&32)&&update_slot_base(p,x,S,S[5],i?get_slot_changes(x,S[5],d,null):get_all_dirty_from_scope(S[5]),null),(!i||d&1)&&set_style(t,"left",S[0]),(!i||d&2)&&set_style(t,"top",S[1])},i(S){i||(transition_in(p,S),i=!0)},o(S){transition_out(p,S),i=!1},d(S){S&&detach(t),p&&p.d(S),e=!1,run_all(u)}}}function instance$3(b,t,i){let{$$slots:e={},$$scope:u}=t,{left:x="100"}=t,{top:p="100"}=t,S=!1;function d(){S=!0}function o(E){S&&(i(0,x=parseInt(x)+E.movementX+"px"),i(1,p=parseInt(p)+E.movementY+"px"))}function g(){S=!1}return b.$$set=E=>{"left"in E&&i(0,x=E.left),"top"in E&&i(1,p=E.top),"$$scope"in E&&i(5,u=E.$$scope)},[x,p,d,o,g,u,e]}class DraggableIcon extends SvelteComponent{constructor(t){super(),init(this,t,instance$3,create_fragment$3,safe_not_equal,{left:0,top:1})}}const get_window_content_slot_changes=b=>({}),get_window_content_slot_context=b=>({}),get_window_bar_slot_changes=b=>({}),get_window_bar_slot_context=b=>({});function create_fragment$2(b){let t,i,e,u,x,p;const S=b[8]["window-bar"],d=create_slot(S,b,b[7],get_window_bar_slot_context),o=b[8]["window-content"],g=create_slot(o,b,b[7],get_window_content_slot_context);return{c(){t=element("section"),d&&d.c(),i=space(),e=element("section"),g&&g.c(),this.h()},l(E){t=claim_element(E,"SECTION",{style:!0,class:!0});var A=children(t);d&&d.l(A),A.forEach(detach),i=claim_space(E),e=claim_element(E,"SECTION",{style:!0,class:!0});var k=children(e);g&&g.l(k),k.forEach(detach),this.h()},h(){set_style(t,"left",b[0]+"px"),set_style(t,"top",b[1]+"px"),set_style(t,"z-index",b[2]),attr(t,"class","absolute"),set_style(e,"left",b[0]+"px"),set_style(e,"top",b[1]+"px"),set_style(e,"z-index",b[2]),attr(e,"class","absolute")},m(E,A){insert_hydration(E,t,A),d&&d.m(t,null),insert_hydration(E,i,A),insert_hydration(E,e,A),g&&g.m(e,null),u=!0,x||(p=[listen(window,"mouseup",b[9]),listen(window,"mousemove",b[5]),listen(t,"mousedown",b[4])],x=!0)},p(E,[A]){d&&d.p&&(!u||A&128)&&update_slot_base(d,S,E,E[7],u?get_slot_changes(S,E[7],A,get_window_bar_slot_changes):get_all_dirty_from_scope(E[7]),get_window_bar_slot_context),(!u||A&1)&&set_style(t,"left",E[0]+"px"),(!u||A&2)&&set_style(t,"top",E[1]+"px"),(!u||A&4)&&set_style(t,"z-index",E[2]),g&&g.p&&(!u||A&128)&&update_slot_base(g,o,E,E[7],u?get_slot_changes(o,E[7],A,get_window_content_slot_changes):get_all_dirty_from_scope(E[7]),get_window_content_slot_context),(!u||A&1)&&set_style(e,"left",E[0]+"px"),(!u||A&2)&&set_style(e,"top",E[1]+"px"),(!u||A&4)&&set_style(e,"z-index",E[2])},i(E){u||(transition_in(d,E),transition_in(g,E),u=!0)},o(E){transition_out(d,E),transition_out(g,E),u=!1},d(E){E&&detach(t),d&&d.d(E),E&&detach(i),E&&detach(e),g&&g.d(E),x=!1,run_all(p)}}}function instance$2(b,t,i){let{$$slots:e={},$$scope:u}=t,{left:x=100}=t,{top:p=100}=t,{zIndex:S}=t,{title:d}=t,o;windowPositionLocalStorage.subscribe(s=>{if(s)return localStorage.windowsPos=s}),o=localStorage.windowsPos?JSON.parse(localStorage.windowsPos):[];let g=!1;function E(){g=!0}function A(s){if(g){const r=document.documentElement.clientWidth,l=document.documentElement.clientHeight;let F=s.movementX+x,P=s.movementY+p;F<0&&(F=0),P<4&&(P=4),F>r-x+600&&(F=r-x+600),P>l-p&&(P=l-p),i(0,x=F),i(1,p=P)}}function k(s){if(g)if(o.find(r=>r.split(",")[0]===s)){let r=o.findIndex(l=>l.split(",")[0]===s);o[r]=`${s},${x},${p}`,windowPositionLocalStorage.set(JSON.stringify(o))}else{let r=`${s},${x},${p}`;o=[...o,r],windowPositionLocalStorage.set(JSON.stringify(o))}g=!1}const m=()=>k(d);return b.$$set=s=>{"left"in s&&i(0,x=s.left),"top"in s&&i(1,p=s.top),"zIndex"in s&&i(2,S=s.zIndex),"title"in s&&i(3,d=s.title),"$$scope"in s&&i(7,u=s.$$scope)},[x,p,S,d,E,A,k,u,e,m]}class DraggableWindow extends SvelteComponent{constructor(t){super(),init(this,t,instance$2,create_fragment$2,safe_not_equal,{left:0,top:1,zIndex:2,title:3})}}const Window_svelte_svelte_type_style_lang="";function create_window_bar_slot(b){let t,i,e,u,x,p,S,d,o,g,E;return{c(){t=element("div"),i=element("div"),e=element("div"),u=text(b[1]),x=space(),p=element("div"),S=element("div"),d=element("div"),this.h()},l(A){t=claim_element(A,"DIV",{class:!0,slot:!0});var k=children(t);i=claim_element(k,"DIV",{class:!0});var m=children(i);e=claim_element(m,"DIV",{class:!0});var s=children(e);u=claim_text(s,b[1]),s.forEach(detach),x=claim_space(m),p=claim_element(m,"DIV",{class:!0});var r=children(p);S=claim_element(r,"DIV",{class:!0});var l=children(S);d=claim_element(l,"DIV",{class:!0}),children(d).forEach(detach),l.forEach(detach),r.forEach(detach),m.forEach(detach),k.forEach(detach),this.h()},h(){attr(e,"class","window-bar-title-text"),attr(d,"class","close svelte-1eh0ylb"),attr(S,"class","window-bar-title-button"),attr(p,"class","window-bar-title-buttons"),attr(i,"class","window-bar-title"),attr(t,"class",o=null_to_empty(b[1]+"element window-bar")+" svelte-1eh0ylb"),attr(t,"slot","window-bar")},m(A,k){insert_hydration(A,t,k),append_hydration(t,i),append_hydration(i,e),append_hydration(e,u),append_hydration(i,x),append_hydration(i,p),append_hydration(p,S),append_hydration(S,d),g||(E=[listen(d,"click",function(){is_function(b[2])&&b[2].apply(this,arguments)}),listen(t,"click",b[5])],g=!0)},p(A,k){b=A,k&2&&set_data(u,b[1]),k&2&&o!==(o=null_to_empty(b[1]+"element window-bar")+" svelte-1eh0ylb")&&attr(t,"class",o)},d(A){A&&detach(t),g=!1,run_all(E)}}}function create_window_content_slot(b){let t,i,e,u,x;const p=b[6].default,S=create_slot(p,b,b[7],null);return{c(){t=element("div"),S&&S.c(),this.h()},l(d){t=claim_element(d,"DIV",{class:!0,slot:!0});var o=children(t);S&&S.l(o),o.forEach(detach),this.h()},h(){attr(t,"class",i=null_to_empty(b[1]+"element window")+" svelte-1eh0ylb"),attr(t,"slot","window-content")},m(d,o){insert_hydration(d,t,o),S&&S.m(t,null),e=!0,u||(x=listen(t,"click",b[5]),u=!0)},p(d,o){S&&S.p&&(!e||o&128)&&update_slot_base(S,p,d,d[7],e?get_slot_changes(p,d[7],o,null):get_all_dirty_from_scope(d[7]),null),(!e||o&2&&i!==(i=null_to_empty(d[1]+"element window")+" svelte-1eh0ylb"))&&attr(t,"class",i)},i(d){e||(transition_in(S,d),e=!0)},o(d){transition_out(S,d),e=!1},d(d){d&&detach(t),S&&S.d(d),u=!1,x()}}}function create_fragment$1(b){let t,i;return t=new DraggableWindow({props:{zIndex:b[0],title:b[1],left:b[3],top:b[4],$$slots:{"window-content":[create_window_content_slot],"window-bar":[create_window_bar_slot]},$$scope:{ctx:b}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,u){mount_component(t,e,u),i=!0},p(e,[u]){const x={};u&1&&(x.zIndex=e[0]),u&2&&(x.title=e[1]),u&8&&(x.left=e[3]),u&16&&(x.top=e[4]),u&134&&(x.$$scope={dirty:u,ctx:e}),t.$set(x)},i(e){i||(transition_in(t.$$.fragment,e),i=!0)},o(e){transition_out(t.$$.fragment,e),i=!1},d(e){destroy_component(t,e)}}}function instance$1(b,t,i){let{$$slots:e={},$$scope:u}=t,x;activeWindowZIndex.subscribe(A=>x=A);let{title:p}=t,{onClose:S}=t,{zIndex:d}=t,{left:o}=t,{top:g}=t;function E(){d<=x&&browser&&(i(0,d=x+1),activeWindowZIndex.set(d))}return b.$$set=A=>{"title"in A&&i(1,p=A.title),"onClose"in A&&i(2,S=A.onClose),"zIndex"in A&&i(0,d=A.zIndex),"left"in A&&i(3,o=A.left),"top"in A&&i(4,g=A.top),"$$scope"in A&&i(7,u=A.$$scope)},[d,p,S,o,g,E,e,u]}class Window extends SvelteComponent{constructor(t){super(),init(this,t,instance$1,create_fragment$1,safe_not_equal,{title:1,onClose:2,zIndex:0,left:3,top:4,setToTopView:5})}get setToTopView(){return this.$$.ctx[5]}}const win98_svelte_svelte_type_style_lang="",{document:document_1}=globals;function get_each_context(b,t,i){const e=b.slice();return e[20]=t[i],e[22]=i,e}function get_each_context_1(b,t,i){const e=b.slice();return e[23]=t[i],e}function get_each_context_2(b,t,i){const e=b.slice();return e[20]=t[i],e[22]=i,e}function get_each_context_3(b,t,i){const e=b.slice();return e[27]=t[i],e}function create_default_slot_1(b){let t,i,e,u,x=b[27].name+"",p,S,d;return{c(){t=element("div"),i=element("div"),e=space(),u=element("p"),p=text(x),this.h()},l(o){t=claim_element(o,"DIV",{class:!0});var g=children(t);i=claim_element(g,"DIV",{style:!0,class:!0}),children(i).forEach(detach),e=claim_space(g),u=claim_element(g,"P",{class:!0});var E=children(u);p=claim_text(E,x),E.forEach(detach),g.forEach(detach),this.h()},h(){set_style(i,"background-image","url('"+b[27].icon+"')"),attr(i,"class","win-icon text-center svelte-1e4tzpu"),attr(u,"class","text-center drop-shadow-lg "),attr(t,"class","text-center full-win-icon svelte-1e4tzpu")},m(o,g){insert_hydration(o,t,g),append_hydration(t,i),append_hydration(t,e),append_hydration(t,u),append_hydration(u,p),S||(d=listen(t,"click",b[27].onClick),S=!0)},p(o,g){b=o},d(o){o&&detach(t),S=!1,d()}}}function create_each_block_3(b){let t,i;return t=new DraggableIcon({props:{left:b[27].left,top:b[27].top,$$slots:{default:[create_default_slot_1]},$$scope:{ctx:b}}}),{c(){create_component(t.$$.fragment)},l(e){claim_component(t.$$.fragment,e)},m(e,u){mount_component(t,e,u),i=!0},p(e,u){const x={};u&1073741824&&(x.$$scope={dirty:u,ctx:e}),t.$set(x)},i(e){i||(transition_in(t.$$.fragment,e),i=!0)},o(e){transition_out(t.$$.fragment,e),i=!1},d(e){destroy_component(t,e)}}}function create_default_slot(b){let t,i,e;var u=b[20].component;function x(p){return{}}return u&&(t=new u(x())),{c(){t&&create_component(t.$$.fragment),i=space()},l(p){t&&claim_component(t.$$.fragment,p),i=claim_space(p)},m(p,S){t&&mount_component(t,p,S),insert_hydration(p,i,S),e=!0},p(p,S){if(u!==(u=p[20].component)){if(t){group_outros();const d=t;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}u?(t=new u(x()),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,i.parentNode,i)):t=null}},i(p){e||(t&&transition_in(t.$$.fragment,p),e=!0)},o(p){t&&transition_out(t.$$.fragment,p),e=!1},d(p){t&&destroy_component(t,p),p&&detach(i)}}}function create_each_block_2(b){var u,x;let t,i;function e(){return b[9](b[20])}return t=new Window({props:{left:(u=b[20].left)!=null?u:100,top:(x=b[20].top)!=null?x:100,zIndex:b[22],title:b[20].name,onClose:e,$$slots:{default:[create_default_slot]},$$scope:{ctx:b}}}),{c(){create_component(t.$$.fragment)},l(p){claim_component(t.$$.fragment,p)},m(p,S){mount_component(t,p,S),i=!0},p(p,S){var o,g;b=p;const d={};S&2&&(d.left=(o=b[20].left)!=null?o:100),S&2&&(d.top=(g=b[20].top)!=null?g:100),S&2&&(d.title=b[20].name),S&2&&(d.onClose=e),S&1073741826&&(d.$$scope={dirty:S,ctx:b}),t.$set(d)},i(p){i||(transition_in(t.$$.fragment,p),i=!0)},o(p){transition_out(t.$$.fragment,p),i=!1},d(p){destroy_component(t,p)}}}function create_if_block(b){let t,i=b[5],e=[];for(let u=0;u<i.length;u+=1)e[u]=create_each_block_1(get_each_context_1(b,i,u));return{c(){t=element("div");for(let u=0;u<e.length;u+=1)e[u].c();this.h()},l(u){t=claim_element(u,"DIV",{class:!0});var x=children(t);for(let p=0;p<e.length;p+=1)e[p].l(x);x.forEach(detach),this.h()},h(){attr(t,"class","container start-menu bg-gray-200 border-t-2 border-gray-700 py-4 svelte-1e4tzpu")},m(u,x){insert_hydration(u,t,x);for(let p=0;p<e.length;p+=1)e[p].m(t,null)},p(u,x){if(x&32){i=u[5];let p;for(p=0;p<i.length;p+=1){const S=get_each_context_1(u,i,p);e[p]?e[p].p(S,x):(e[p]=create_each_block_1(S),e[p].c(),e[p].m(t,null))}for(;p<e.length;p+=1)e[p].d(1);e.length=i.length}},d(u){u&&detach(t),destroy_each(e,u)}}}function create_each_block_1(b){let t,i=b[23].name+"",e,u,x;return{c(){t=element("button"),e=text(i),this.h()},l(p){t=claim_element(p,"BUTTON",{type:!0,class:!0});var S=children(t);e=claim_text(S,i),S.forEach(detach),this.h()},h(){attr(t,"type","button"),attr(t,"class","w-full inline-block px-6 py-2.5 text-gray-700 text-left font-bold text-xs leading-tight uppercase hover:bg-gray-300 focus:bg-gray-300 focus:ring-0 active:bg-gray-400 transition duration-150 ease-in-out")},m(p,S){insert_hydration(p,t,S),append_hydration(t,e),u||(x=listen(t,"click",b[23].onClick),u=!0)},p(p,S){b=p},d(p){p&&detach(t),u=!1,x()}}}function create_each_block(b){let t,i,e,u,x,p=b[20].name+"",S,d,o,g;function E(...k){return b[10](b[20],...k)}function A(){return b[11](b[20])}return{c(){t=element("span"),i=element("img"),u=space(),x=element("button"),S=text(p),d=space(),this.h()},l(k){t=claim_element(k,"SPAN",{class:!0});var m=children(t);i=claim_element(m,"IMG",{class:!0,src:!0}),u=claim_space(m),x=claim_element(m,"BUTTON",{type:!0,class:!0});var s=children(x);S=claim_text(s,p),s.forEach(detach),d=claim_space(m),m.forEach(detach),this.h()},h(){var k;attr(i,"class","w-5 flex-initial"),src_url_equal(i.src,e=(k=b[4].find(E))==null?void 0:k.icon)||attr(i,"src",e),attr(x,"type","button"),attr(x,"class","flex-initial ml-2 startbar-window-name"),attr(t,"class","flex start-menu-button mr-1 inset-y-0 px-4 py-2 bg-gray-200 text-gray-700 font-bold text-xs leading-tight uppercase hover:bg-gray-300 focus:bg-gray-300 focus:ring-0 active:bg-gray-400 svelte-1e4tzpu")},m(k,m){insert_hydration(k,t,m),append_hydration(t,i),append_hydration(t,u),append_hydration(t,x),append_hydration(x,S),append_hydration(t,d),o||(g=listen(t,"click",A),o=!0)},p(k,m){var s;b=k,m&2&&!src_url_equal(i.src,e=(s=b[4].find(E))==null?void 0:s.icon)&&attr(i,"src",e),m&2&&p!==(p=b[20].name+"")&&set_data(S,p)},d(k){k&&detach(t),o=!1,g()}}}function create_fragment(b){let t,i,e,u,x,p,S,d,o,g,E,A,k,m,s,r,l,F,P,v,a,h,C,D,I,L,W,tt,$,N,G,M,q=b[4],U=[];for(let f=0;f<q.length;f+=1)U[f]=create_each_block_3(get_each_context_3(b,q,f));const rt=f=>transition_out(U[f],1,1,()=>{U[f]=null});let at=b[1],lt=[];for(let f=0;f<at.length;f+=1)lt[f]=create_each_block_2(get_each_context_2(b,at,f));const mt=f=>transition_out(lt[f],1,1,()=>{lt[f]=null});let ut=b[0]&&create_if_block(b),j=b[1],y=[];for(let f=0;f<j.length;f+=1)y[f]=create_each_block(get_each_context(b,j,f));return{c(){t=space(),i=element("div");for(let f=0;f<U.length;f+=1)U[f].c();e=space();for(let f=0;f<lt.length;f+=1)lt[f].c();u=space(),x=element("footer"),ut&&ut.c(),p=space(),S=element("div"),d=element("span"),o=element("img"),E=space(),A=element("button"),k=text("Start"),m=space(),s=element("span"),r=element("div"),l=text("a"),F=space(),P=element("div"),v=text("a"),a=space(),h=element("span");for(let f=0;f<y.length;f+=1)y[f].c();C=space(),D=element("span"),I=element("div"),L=text(b[2]),W=space(),tt=element("div"),$=text(b[3]),this.h()},l(f){query_selector_all('[data-svelte="svelte-1dtwy7u"]',document_1.head).forEach(detach),t=claim_space(f),i=claim_element(f,"DIV",{class:!0});var n=children(i);for(let ht=0;ht<U.length;ht+=1)U[ht].l(n);e=claim_space(n);for(let ht=0;ht<lt.length;ht+=1)lt[ht].l(n);u=claim_space(n),x=claim_element(n,"FOOTER",{class:!0});var c=children(x);ut&&ut.l(c),p=claim_space(c),S=claim_element(c,"DIV",{class:!0});var _=children(S);d=claim_element(_,"SPAN",{class:!0});var T=children(d);o=claim_element(T,"IMG",{alt:!0,class:!0,src:!0}),E=claim_space(T),A=claim_element(T,"BUTTON",{class:!0,type:!0});var R=children(A);k=claim_text(R,"Start"),R.forEach(detach),T.forEach(detach),m=claim_space(_),s=claim_element(_,"SPAN",{class:!0});var B=children(s);r=claim_element(B,"DIV",{class:!0});var z=children(r);l=claim_text(z,"a"),z.forEach(detach),F=claim_space(B),P=claim_element(B,"DIV",{class:!0});var Y=children(P);v=claim_text(Y,"a"),Y.forEach(detach),B.forEach(detach),a=claim_space(_),h=claim_element(_,"SPAN",{class:!0});var H=children(h);for(let ht=0;ht<y.length;ht+=1)y[ht].l(H);H.forEach(detach),C=claim_space(_),D=claim_element(_,"SPAN",{class:!0});var et=children(D);I=claim_element(et,"DIV",{class:!0});var J=children(I);L=claim_text(J,b[2]),J.forEach(detach),W=claim_space(et),tt=claim_element(et,"DIV",{class:!0});var nt=children(tt);$=claim_text(nt,b[3]),nt.forEach(detach),et.forEach(detach),_.forEach(detach),c.forEach(detach),n.forEach(detach),this.h()},h(){document_1.title="Win98",attr(o,"alt","startIcon"),attr(o,"class","w-5 flex-initial"),src_url_equal(o.src,g="../win98/windows.png")||attr(o,"src",g),attr(A,"class","flex-initial ml-2 uppercase inline-block self-end"),attr(A,"type","button"),attr(d,"class","flex-initial flex start-menu-button inset-y-0 px-3 py-3 bg-gray-200 text-gray-700 font-bold text-xs leading-tight uppercase hover:bg-gray-300 focus:bg-gray-300 focus:ring-0 active:bg-gray-400 svelte-1e4tzpu"),attr(r,"class","text-gray-700 text-xs text-center text-transparent"),attr(P,"class","text-gray-700 text-xs text-right text-transparent"),attr(s,"class","fixed flex-initial transparent-start-menu my-1.5 mx-2 font-bold border-l-2 px-2 border-gray-700 svelte-1e4tzpu"),attr(h,"class","ml-5 flex flex-initial"),attr(I,"class","text-gray-700 text-xs text-center"),attr(tt,"class","text-gray-700 text-xs text-right"),attr(D,"class","fixed right-0 my-1.5 mx-2 font-bold border-l-2 px-2 border-gray-700"),attr(S,"class","p-1 bg-gray-400 left-0 border-t-2 border-gray-700 flex flex-row"),attr(x,"class","absolute inset-x-0 bottom-0"),attr(i,"class","win98-bg svelte-1e4tzpu")},m(f,w){insert_hydration(f,t,w),insert_hydration(f,i,w);for(let n=0;n<U.length;n+=1)U[n].m(i,null);append_hydration(i,e);for(let n=0;n<lt.length;n+=1)lt[n].m(i,null);append_hydration(i,u),append_hydration(i,x),ut&&ut.m(x,null),append_hydration(x,p),append_hydration(x,S),append_hydration(S,d),append_hydration(d,o),append_hydration(d,E),append_hydration(d,A),append_hydration(A,k),append_hydration(S,m),append_hydration(S,s),append_hydration(s,r),append_hydration(r,l),append_hydration(s,F),append_hydration(s,P),append_hydration(P,v),append_hydration(S,a),append_hydration(S,h);for(let n=0;n<y.length;n+=1)y[n].m(h,null);append_hydration(S,C),append_hydration(S,D),append_hydration(D,I),append_hydration(I,L),append_hydration(D,W),append_hydration(D,tt),append_hydration(tt,$),N=!0,G||(M=listen(d,"click",b[6]),G=!0)},p(f,[w]){if(w&16){q=f[4];let n;for(n=0;n<q.length;n+=1){const c=get_each_context_3(f,q,n);U[n]?(U[n].p(c,w),transition_in(U[n],1)):(U[n]=create_each_block_3(c),U[n].c(),transition_in(U[n],1),U[n].m(i,e))}for(group_outros(),n=q.length;n<U.length;n+=1)rt(n);check_outros()}if(w&258){at=f[1];let n;for(n=0;n<at.length;n+=1){const c=get_each_context_2(f,at,n);lt[n]?(lt[n].p(c,w),transition_in(lt[n],1)):(lt[n]=create_each_block_2(c),lt[n].c(),transition_in(lt[n],1),lt[n].m(i,u))}for(group_outros(),n=at.length;n<lt.length;n+=1)mt(n);check_outros()}if(f[0]?ut?ut.p(f,w):(ut=create_if_block(f),ut.c(),ut.m(x,p)):ut&&(ut.d(1),ut=null),w&146){j=f[1];let n;for(n=0;n<j.length;n+=1){const c=get_each_context(f,j,n);y[n]?y[n].p(c,w):(y[n]=create_each_block(c),y[n].c(),y[n].m(h,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=j.length}},i(f){if(!N){for(let w=0;w<q.length;w+=1)transition_in(U[w]);for(let w=0;w<at.length;w+=1)transition_in(lt[w]);N=!0}},o(f){U=U.filter(Boolean);for(let w=0;w<U.length;w+=1)transition_out(U[w]);lt=lt.filter(Boolean);for(let w=0;w<lt.length;w+=1)transition_out(lt[w]);N=!1},d(f){f&&detach(t),f&&detach(i),destroy_each(U,f),destroy_each(lt,f),ut&&ut.d(),destroy_each(y,f),G=!1,M()}}}function getWinLeftPostition(b){if(localStorage.windowsPos){let i=JSON.parse(localStorage.windowsPos).find(e=>e.split(",")[0]===b);if(i)return parseInt(i.split(",")[1])}return 10}function getWinTopPostition(b){if(localStorage.windowsPos){let i=JSON.parse(localStorage.windowsPos).find(e=>e.split(",")[0]===b);if(i)return parseInt(i.split(",")[2])}return 10}function instance(b,t,i){windowPositionLocalStorage.subscribe(a=>{if(a)return localStorage.windowsPos=a});let e=new Date,u=e.getHours(),x=e.getMinutes(),p=`${u}:${x}`,S=`${e.getMonth()}/${e.getDate()}/${e.getFullYear()}`,d=!1,o=!1,g=[{name:"cmd",icon:"../win98/terminal.png",left:"50px",top:"50px",onClick:()=>r("cmd",Terminal),component:Terminal},{name:"projects",icon:"../win98/directory.png",left:"50px",top:"150px",onClick:()=>r("projects",Projects_1),component:Projects_1},{name:"contact",icon:"../win98/contact.png",left:"50px",top:"250px",onClick:()=>r("contact",Contact),component:Contact},{name:"cv",icon:"../win98/cv.png",left:"50px",top:"350px",onClick:()=>r("cv",Resume),component:Resume}],E=[{name:"Projects",onClick:()=>m("projects",Projects_1)},{name:"Resume",onClick:()=>m("cv",Resume)},{name:"Contact",onClick:()=>m("contact",Contact)},{name:"Terminal",onClick:()=>m("cmd",Terminal)}],A=[];function k(){i(0,d=!d)}function m(a,h){i(0,d=!1),A.find(C=>C.name===a)?s(a):i(1,A=[...A,{name:a,component:h,left:getWinLeftPostition(a),top:getWinTopPostition(a)}])}function s(a){i(0,d=!1),Array.from(document.getElementsByClassName(a+"element")).forEach(C=>{C.click()})}function r(a,h){i(0,d=!1),window.setTimeout(()=>o=!1,500),o?A.find(C=>C.name===a)?A.find(C=>C.name===a)&&s(a):i(1,A=[...A,{name:a,component:h,left:getWinLeftPostition(a),top:getWinTopPostition(a)}]):o=!0}function l(a){let h=A.find(C=>C.name===a);h&&(h.left=getWinLeftPostition(a),h.top=getWinTopPostition(a)),i(1,A=A.filter(C=>C.name!==a))}return window.addEventListener("keydown",a=>{a.keyCode}),window.addEventListener("click",a=>{a.target.classList.contains("close")}),[d,A,p,S,g,E,k,s,l,a=>l(a.name),(a,h)=>a.name===h.name,a=>s(a.name)]}class Win98 extends SvelteComponent{constructor(t){super(),init(this,t,instance,create_fragment,safe_not_equal,{})}}export{Win98 as default};
